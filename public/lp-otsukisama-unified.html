<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãŠã¤ãã•ã¾è¨ºæ–­ - æœˆãŒå°ãã‚ãªãŸã®é‹å‘½</title>
    <link rel="stylesheet" href="css/lp-otsukisama.css">
    <link rel="stylesheet" href="css/calendar-new.css">
    <script>
        // WebPå¯¾å¿œãƒã‚§ãƒƒã‚¯ã¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
        function supportsWebP() {
            const canvas = document.createElement('canvas');
            canvas.width = 1;
            canvas.height = 1;
            return canvas.toDataURL('image/webp').indexOf('image/webp') === 0;
        }

        function getImagePath(originalPath) {
            if (!supportsWebP()) {
                return originalPath;
            }

            // WebPç‰ˆãŒå­˜åœ¨ã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ç”»åƒå½¢å¼ã®å ´åˆã€WebPç‰ˆã‚’è¿”ã™
            if (originalPath.match(/\.(jpg|jpeg|png)$/i)) {
                return originalPath.replace(/\.(jpg|jpeg|png)$/i, '.webp');
            }

            return originalPath;
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å¾Œã«å…¨ã¦ã®ç”»åƒã‚’å‡¦ç†
        document.addEventListener('DOMContentLoaded', function() {
            if (supportsWebP()) {
                // ã™ã¹ã¦ã®imgè¦ç´ ã®srcã‚’æ›´æ–°
                document.querySelectorAll('img').forEach(img => {
                    const originalSrc = img.src || img.getAttribute('src');
                    if (originalSrc && originalSrc.match(/\.(jpg|jpeg|png)$/i)) {
                        const webpSrc = originalSrc.replace(/\.(jpg|jpeg|png)$/i, '.webp');

                        // WebPç”»åƒã®å­˜åœ¨ã‚’ç¢ºèª
                        const testImg = new Image();
                        testImg.onload = function() {
                            img.src = webpSrc;
                        };
                        testImg.onerror = function() {
                            // WebPç‰ˆãŒå­˜åœ¨ã—ãªã„å ´åˆã¯å…ƒã®ç”»åƒã‚’ä½¿ç”¨
                            // console.log('WebP not found, using original:', originalSrc);
                        };
                        testImg.src = webpSrc;
                    }
                });
            }
        });
    </script>
    <style>
        /* ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å°‚ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .preview-mode .form-section {
            display: none !important;
        }

        .preview-mode .result-section {
            display: block !important;
        }

        /* ã¼ã‹ã—åŠ¹æœã¨ãƒ­ãƒƒã‚¯ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
        .preview-mode .content-locked {
            position: relative !important;
            min-height: 200px; /* æœ€å°é«˜ã•ã‚’ç¢ºä¿ */
        }

        /* ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã¿ã«blurã‚’é©ç”¨ */
        .preview-mode .text-blur {
            filter: blur(8px);
            user-select: none;
            pointer-events: none;
        }

        /* ãƒãƒŠãƒ¼ç”»åƒã¨ã‚¿ã‚¤ãƒˆãƒ«ã¯ãƒ¢ã‚¶ã‚¤ã‚¯ã‚’é©ç”¨ã—ãªã„ */
        .preview-mode .content-locked img[src*="/images/banner/"],
        .preview-mode .content-locked .section-header-container,
        .preview-mode .content-locked .fortune-banner-wrapper,
        .preview-mode .content-locked h2,
        .preview-mode .content-locked h3,
        .preview-mode .content-locked h4,
        .preview-mode .content-locked .moon-phase-header,
        .preview-mode .content-locked .tsukuyomi-section {
            filter: none !important;
            opacity: 1 !important;
            user-select: auto;
            pointer-events: auto;
        }

        .preview-mode .lock-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 25px 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(138, 97, 250, 0.3);
            border: 2px solid rgba(138, 97, 250, 0.2);
            z-index: 100;
            filter: none;
            display: block;
            max-width: 280px;
            width: 80%;
        }

        .complete-mode .lock-overlay {
            display: none;
        }

        .complete-mode .content-locked {
            filter: none;
            user-select: auto;
            pointer-events: auto;
        }

        .lock-icon {
            font-size: 32px;
            display: block;
            margin-bottom: 10px;
        }

        .lock-overlay h3 {
            color: #4a3a8c;
            font-size: 20px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .lock-overlay p {
            color: #666;
            font-size: 13px;
            line-height: 1.4;
            margin-bottom: 10px;
        }

        .lock-message {
            font-size: 12px !important;
            margin-bottom: 5px !important;
        }

        .unlock-button {
            background: linear-gradient(135deg, #8a61fa 0%, #c77dff 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .unlock-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(138, 97, 250, 0.4);
        }

        /* å°ã•ã‚ã®CTAãƒœã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ« */
        .purchase-button-mini {
            background: linear-gradient(135deg, #8a61fa 0%, #c77dff 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 15px;
            font-size: 13px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            text-decoration: none;
            margin-top: 10px;
        }

        .purchase-button-mini:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(138, 97, 250, 0.4);
        }

        /* å°ã•ãªãƒ¢ã‚¶ã‚¤ã‚¯ã‚¨ãƒªã‚¢ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .content-locked-mini {
            position: relative;
            min-height: 60px;
            margin: 15px 0;
        }

        /* æ‹æ„›é‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒãƒŠãƒ¼ã¨æ ã‚’ç¹‹ã’ã‚‹ */
        .love-section-box {
            margin-top: 0 !important;
        }

        .lock-overlay-mini {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
        }

        .preview-mode .lock-overlay-mini {
            display: block;
        }

        .complete-mode .lock-overlay-mini {
            display: none;
        }

        /* æœ‰æ–™ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒ©ãƒƒãƒ‘ãƒ¼ */
        .premium-content-wrapper {
            position: relative;
        }

        /* CTAã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .preview-cta {
            background: linear-gradient(135deg, #f8f4ff 0%, #fff5fb 100%);
            padding: 60px 20px;
            margin: 60px 0;
            border-radius: 30px;
            text-align: center;
            border: 2px solid rgba(138, 97, 250, 0.1);
        }

        .complete-mode .preview-cta {
            display: none;
        }

        .preview-cta h2 {
            color: #4a3a8c;
            font-size: 28px;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .preview-cta p {
            color: #666;
            font-size: 16px;
            margin-bottom: 30px;
            line-height: 1.8;
        }

        /* ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ãƒªã‚¹ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .preview-features-list {
            text-align: left;
            max-width: 500px;
            margin: 30px auto;
            padding: 0;
            list-style: none;
        }

        .preview-features-list li {
            color: #4a4a4a;
            line-height: 2.2;
            padding: 12px 20px;
            margin-bottom: 8px;
            position: relative;
            background: transparent;
            border-left: 3px solid rgba(138, 97, 250, 0.3);
            padding-left: 35px;
            transition: all 0.3s ease;
        }

        .preview-features-list li:hover {
            background: rgba(138, 97, 250, 0.05);
            border-left-color: rgba(138, 97, 250, 0.6);
            padding-left: 40px;
        }

        .preview-features-list li::before {
            content: "âœ¨";
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
        }

        /* ã‚¹ãƒãƒ›è¡¨ç¤ºç”¨ */
        @media (max-width: 480px) {
            .preview-features-list {
                max-width: 100%;
                margin: 20px auto;
            }

            .preview-features-list li {
                font-size: 14px;
                padding: 10px 15px 10px 30px;
                margin-bottom: 6px;
            }

            .preview-features-list li::before {
                font-size: 14px;
                left: 8px;
            }
        }

        .price-info {
            margin: 30px 0;
        }

        .original-price {
            color: #999;
            text-decoration: line-through;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .special-price {
            font-size: 36px;
            color: #8a61fa;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .price-note {
            color: #666;
            font-size: 14px;
        }

        .purchase-button {
            background: linear-gradient(135deg, #8a61fa 0%, #c77dff 100%);
            color: white;
            border: none;
            padding: 20px 60px;
            border-radius: 30px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            text-decoration: none;
            margin-top: 20px;
        }

        .purchase-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(138, 97, 250, 0.4);
        }

    </style>
</head>
<body class="preview-mode loading-active" id="pageBody">
    <!-- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£: ã‚¹ã‚­ãƒƒãƒ—ãƒªãƒ³ã‚¯ -->

    <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆæœ€åˆã‹ã‚‰è¡¨ç¤ºï¼‰ -->
    <div class="loading-overlay" id="loadingOverlay" style="display: flex;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">è¨ºæ–­çµæœã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</div>
            <div class="loading-progress-container">
                <div class="loading-progress-bar" id="loadingProgress">
                    <span class="loading-moon-character">ğŸŒ™</span>
                </div>
                <div class="loading-stars">
                    <span class="loading-star" style="left: 10%; animation-delay: 0s;">âœ¨</span>
                    <span class="loading-star" style="left: 30%; animation-delay: 0.3s;">âœ¨</span>
                    <span class="loading-star" style="left: 50%; animation-delay: 0.6s;">âœ¨</span>
                    <span class="loading-star" style="left: 70%; animation-delay: 0.9s;">âœ¨</span>
                    <span class="loading-star" style="left: 90%; animation-delay: 1.2s;">âœ¨</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é€²æ—ãƒãƒ¼ -->
    <div class="scroll-progress" id="scrollProgress"></div>
    <!-- æ˜Ÿç©ºèƒŒæ™¯ -->
    <div class="stars-container" id="starsContainer"></div>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="header">
            <div class="main-moon"></div>
            <img src="/images/banner/1-title.png" alt="ãŠã¤ãã•ã¾è¨ºæ–­" class="responsive-image">
            <img src="/images/banner/moon-guides-destiny.png" alt="æœˆãŒå°ãã‚ãªãŸã®é‹å‘½" class="responsive-image" style="margin-top: 20px; width: 100%;">
        </div>

        <!-- çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="result-section" id="resultSection">
            <!-- æœˆè© ã®æŒ¨æ‹¶ -->
            <div class="tsukuyomi-section">
                <div class="tsukuyomi-character">
                    <img src="/images/tsukuyomi/2.png" alt="æœˆè© ">
                </div>
                <div class="tsukuyomi-bubble">
                    <div class="tsukuyomi-name">æœˆè© </div>
                    <p>
                        ã“ã‚“ã«ã¡ã¯ã€<span id="resultName"></span>ã•ã‚“ã€‚ç§ã¯æœˆè© ï¼ˆã¤ãã‚ˆã¿ï¼‰ã¨ç”³ã—ã¾ã™ã€‚ä»Šå¤œã®æœˆãŒã€ã‚ãªãŸã®é‹å‘½ã‚’ç…§ã‚‰ã—å‡ºã—ã¾ã™ã€‚ã‚ãªãŸãŒç”Ÿã¾ã‚ŒãŸæ—¥ã®æœˆã¯ã€ç‰¹åˆ¥ãªå½¢ã‚’ã—ã¦ã„ã¾ã—ãŸã€‚ãã®æœˆãŒæŒã¤ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã€ä»Šã‹ã‚‰ãŠä¼ãˆã—ã¦ã„ãã¾ã™ã­ã€‚
                    </p>
                </div>
            </div>


            <!-- æœˆè© ã«ã‚ˆã‚‹è¨ºæ–­èª¬æ˜ -->
            <div class="tsukuyomi-section right">
                <div class="tsukuyomi-character">
                    <img src="/images/tsukuyomi/4.png" alt="æœˆè© ">
                </div>
                <div class="tsukuyomi-bubble">
                    <div class="tsukuyomi-name">æœˆè© </div>
                    <p>
                        ã•ã¦ã€ã“ã“ã‹ã‚‰ãŒæœ¬é¡Œã§ã™ã€‚ã“ã‚Œã‹ã‚‰ã€ã‚ãªãŸã®ç”Ÿã¾ã‚ŒãŸæ—¥ã®æœˆç›¸ã‚’åŸºã«ã€6ã¤ã®è¦ç´ ã‹ã‚‰ã‚ãªãŸã®æœ¬è³ªã‚’æ˜ã‚‰ã‹ã«ã—ã¦ã„ãã¾ã™ã€‚ã¾ãšã¯ã€ã“ã®6ã¤ã®è¦ç´ ãŒä½•ã‚’æ„å‘³ã™ã‚‹ã®ã‹ã”è¦§ãã ã•ã„ã€‚
                    </p>
                </div>
            </div>

            <!-- 6ã¤ã®ã‚¿ã‚¤ãƒ—ã‚’å††å½¢é…ç½® -->
            <div class="moon-types-circle">
                <!-- è»Œé“ç·š -->
                <div class="orbit-path"></div>

                <!-- ä¸­å¿ƒã®æœˆ -->
                <div class="center-moon"></div>

                <!-- è¦ç´ ã‚³ãƒ³ãƒ†ãƒŠ -->
                <div class="elements-container">
                    <!-- æœˆç›¸ (0åº¦ - ä¸Š) -->
                    <div class="type-item moon-phase-item" data-position="0" data-moon-type="omote" data-moon-phase="0">
                        <img src="/images/moon/omote-0.png" alt="è¡¨æœˆç›¸" class="circle-element-image">
                        <span class="circle-element-label-top label-color-gold">æœˆç›¸</span>
                        <span class="circle-element-label-bottom">èª­ã¿è¾¼ã¿ä¸­...</span>
                    </div>

                    <!-- è£æœˆç›¸ (60åº¦ - å³ä¸Š) -->
                    <div class="type-item moon-phase-item" data-position="60" data-moon-type="ura" data-moon-phase="1">
                        <img src="/images/moon/ura-0.png" alt="è£æœˆç›¸" class="circle-element-image">
                        <span class="circle-element-label-top label-color-purple">è£æœˆç›¸</span>
                        <span class="circle-element-label-bottom">èª­ã¿è¾¼ã¿ä¸­...</span>
                    </div>

                    <!-- æ„Ÿæƒ…è¡¨ç¾ (120åº¦ - å³ä¸‹) -->
                    <div class="type-item love-type-item" data-position="120" data-type="emotional" data-value="">
                        <img src="/images/love-types/emotional/straight.png" alt="æ„Ÿæƒ…è¡¨ç¾" class="circle-element-image-contain">
                        <span class="circle-element-label-top label-color-pink">æ„Ÿæƒ…è¡¨ç¾</span>
                        <span class="circle-element-label-bottom">...</span>
                    </div>

                    <!-- è·é›¢æ„Ÿ (180åº¦ - ä¸‹) -->
                    <div class="type-item love-type-item" data-position="180" data-type="distance" data-value="">
                        <img src="/images/love-types/distance/close.png" alt="è·é›¢æ„Ÿ" class="circle-element-image-contain">
                        <span class="circle-element-label-top label-color-green">è·é›¢æ„Ÿ</span>
                        <span class="circle-element-label-bottom">...</span>
                    </div>

                    <!-- ä¾¡å€¤è¦³ (240åº¦ - å·¦ä¸‹) -->
                    <div class="type-item love-type-item" data-position="240" data-type="values" data-value="">
                        <img src="/images/love-types/values/realistic.png" alt="ä¾¡å€¤è¦³" class="circle-element-image-contain">
                        <span class="circle-element-label-top label-color-blue">ä¾¡å€¤è¦³</span>
                        <span class="circle-element-label-bottom">...</span>
                    </div>

                    <!-- ã‚¨ãƒãƒ«ã‚®ãƒ¼ (300åº¦ - å·¦ä¸Š) -->
                    <div class="type-item love-type-item" data-position="300" data-type="energy" data-value="">
                        <img src="/images/love-types/energy/intense.png" alt="ã‚¨ãƒãƒ«ã‚®ãƒ¼" class="circle-element-image-contain">
                        <span class="circle-element-label-top label-color-orange">ã‚¨ãƒãƒ«ã‚®ãƒ¼</span>
                        <span class="circle-element-label-bottom">...</span>
                    </div>
                </div>
            </div>

            <img src="/images/banner/birth-moon-true-self.png" alt="ç”Ÿã¾ã‚ŒãŸæ—¥ã®æœˆç›¸ã‹ã‚‰èª­ã¿è§£ãã€ã‚ãªãŸã®ã€Œæœ¬å½“ã®è‡ªåˆ†ã€" class="full-width-banner" style="margin: 20px 0;">

            <!-- æœˆç›¸èª¬æ˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="section-header-container">
                <img src="/images/banner/3-getsusou.png" alt="ã¾ãšã¯ã€ã‚ãªãŸã®æœˆç›¸ã‹ã‚‰è¦‹ã¦ã„ãã¾ã—ã‚‡ã†" class="full-width-banner">
                <p class="section-description">
                    æœˆç›¸ã¨ã¯ã€ã‚ãªãŸãŒç”Ÿã¾ã‚ŒãŸæ—¥ã®æœˆã®å½¢ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€ã‚ãªãŸã®åŸºæœ¬çš„ãªæ€§æ ¼ã‚„äººç”Ÿã®ãƒ†ãƒ¼ãƒãŒã‚ã‹ã‚Šã¾ã™ã€‚ã‚ãªãŸã®æœˆç›¸ã¯...
                </p>
            </div>

            <!-- æœˆç›¸ã‚¿ã‚¤ãƒ— -->
            <div class="moon-phase-card new-moon">
                <div class="moon-phase-header">
                    <img src="/images/moon/omote-0.png" alt="æ–°æœˆ" class="moon-phase-visual moon-phase-image">
                    <div class="moon-phase-info">
                        <h2>æ–°æœˆ</h2>
                        <p class="moon-phase-subtitle">æ–°ã—ã„å§‹ã¾ã‚Šã®åŠ›ã€‚ç„¡é™ã®å¯èƒ½æ€§ã‚’ç§˜ã‚ãŸé–‹æ‹“è€…</p>
                    </div>
                </div>
                <div class="moon-phase-description" id="moon-phase-description">
                    ã‚ãªãŸã¯æ–°æœˆã®æ—¥ã«ç”Ÿã¾ã‚ŒãŸã€å§‹ã¾ã‚Šã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æŒã¤äººã€‚ä½•ã‚‚ãªã„ã¨ã“ã‚ã‹ã‚‰ä½•ã‹ã‚’ç”Ÿã¿å‡ºã™åŠ›ãŒã‚ã‚Šã€ã‚¼ãƒ­ã‹ã‚‰1ã‚’ä½œã‚Šå‡ºã™ã“ã¨ã«é•·ã‘ã¦ã„ã¾ã™ã€‚ç´”ç²‹ã§ç´ ç›´ãªå¿ƒã‚’æŒã¡ã€æ–°ã—ã„ã“ã¨ã¸ã®å¥½å¥‡å¿ƒãŒæ—ºç››ã€‚ã¾ã èª°ã‚‚è¸ã¿å…¥ã‚Œã¦ã„ãªã„é“ã‚’é€²ã‚€ãƒ‘ã‚¤ã‚ªãƒ‹ã‚¢ç²¾ç¥ãŒã‚ã‚Šã¾ã™ã€‚æ™‚ã«ç„¡é‰„ç ²ã«è¦‹ãˆã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ãŒã€ãã®å‹‡æ°—ã“ããŒã‚ãªãŸã®æœ€å¤§ã®æ­¦å™¨ãªã®ã§ã™ã€‚
                </div>
            </div>

            <!-- è³¼å…¥CTAï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§ã®ã¿è¡¨ç¤ºï¼‰ -->
            <div class="preview-cta">
                <h2>ğŸ”’ å®Œå…¨ç‰ˆã§å…¨ã¦ã®å†…å®¹ã‚’è¦‹ã‚‹</h2>
                <p>
                    ä»¥ä¸‹ã®å†…å®¹ã‚’å«ã‚€ã€ã‚ãªãŸã ã‘ã®å®Œå…¨ãªè¨ºæ–­çµæœã‚’ã”è¦§ã„ãŸã ã‘ã¾ã™ï¼š
                </p>
                <ul class="preview-features-list">
                    <li>è£ã®æœˆç›¸ã¨ã‚ãªãŸã®éš ã•ã‚ŒãŸé¡”</li>
                    <li>3ã¤ã®æœˆã®åŠ›ã®è©³ç´°è§£èª¬</li>
                    <li>4ã¤ã®è»¸ã‹ã‚‰è¦‹ãŸæ‹æ„›æ€§æ ¼ã®å®Œå…¨åˆ†æ</li>
                    <li>ç›´è¿‘3ãƒ¶æœˆã®è©³ç´°ãªé‹å‹¢äºˆæ¸¬</li>
                    <li>æ‹æ„›é‹ãƒ»äººé–“é–¢ä¿‚é‹ãƒ»ä»•äº‹é‹ãƒ»é‡‘é‹ã®å®Œå…¨ç‰ˆ</li>
                    <li>ã‚ãªãŸã ã‘ã®æœˆé½¢ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</li>
                    <li>æœˆãŒæ•™ãˆã¦ãã‚Œã‚‹5ã¤ã®æ•™ãˆ</li>
                </ul>

                <div class="price-info">
                    <div class="original-price">é€šå¸¸ä¾¡æ ¼ Â¥2,980</div>
                    <div class="special-price">ç‰¹åˆ¥ä¾¡æ ¼ Â¥980</div>
                    <div class="price-note">ï¼ˆç¨è¾¼ï¼‰</div>
                </div>

                <button class="purchase-button" id="purchaseButton">
                    è¨ºæ–­çµæœã‚’è³¼å…¥ã™ã‚‹
                </button>
            </div>
        </div><!-- result-sectionçµ‚äº† -->

        <!-- ä»¥é™ã®å†…å®¹ï¼ˆãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼‰ -->
        <div class="premium-content-wrapper">
                <!-- è£æœˆç›¸ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <!-- è£æœˆç›¸èª¬æ˜ -->
                <div class="section-header-container">
                    <img src="/images/banner/hidden-moon-explanation.png" alt="ãã—ã¦ã€ã‚ãªãŸã®è£ã®é¡”ã‚‚è¦‹ã¦ã¿ã¾ã—ã‚‡ã†" class="full-width-banner">
                </div>

                <!-- è£æœˆç›¸ã‚«ãƒ¼ãƒ‰ -->
                <div class="moon-phase-card crescent" id="hidden-phase-card">
                    <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                </div>

                <!-- 3ã¤ã®æœˆã®åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="section-header-container">
                    <img src="/images/banner/deeper-moon-powers.png" alt="ã‚ãªãŸãŒæŒã£ã¦ã„ã‚‹3ã¤ã®åŠ›ã¯ã€‡ã€‡ã§ã™" class="full-width-banner">
                </div>

                <div class="content-locked-mini">
                    <div class="text-blur">
                        <div class="energy-types three-powers" id="threePowersContainer">
                            <div class="energy-item">
                                <div class="energy-title">ç›´æ„ŸåŠ›</div>
                                <div class="energy-description">
                                    ç¬¬å…­æ„ŸãŒé‹­ãã€è¦‹ãˆãªã„å±é™ºã‚’å¯ŸçŸ¥ã™ã‚‹èƒ½åŠ›ãŒã‚ã‚Šã¾ã™ã€‚è¿·ã£ãŸæ™‚ã¯ã€ç†å±ˆã‚ˆã‚Šç›´æ„Ÿã‚’ä¿¡ã˜ã‚‹ã“ã¨ã§æ­£ã—ã„é“ã‚’é¸ã¹ã‚‹ã§ã—ã‚‡ã†ã€‚
                                </div>
                            </div>
                            <div class="energy-item">
                                <div class="energy-title">å‰µé€ åŠ›</div>
                                <div class="energy-description">
                                    ç„¡ã‹ã‚‰æœ‰ã‚’ç”Ÿã¿å‡ºã™åŠ›ã€‚ã‚¢ã‚¤ãƒ‡ã‚¢ãŒæ¹§ãå‡ºã‚‹æ³‰ã®ã‚ˆã†ãªå­˜åœ¨ã§ã€å‘¨ã‚Šã®äººã«æ–°ã—ã„è¦–ç‚¹ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
                                </div>
                            </div>
                            <div class="energy-item">
                                <div class="energy-title">æµ„åŒ–åŠ›</div>
                                <div class="energy-description">
                                    ãƒã‚¬ãƒ†ã‚£ãƒ–ãªã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è·³ã­è¿”ã—ã€å‘¨ã‚Šã®ç©ºæ°—ã‚’æ¸…ã‚ã‚‹åŠ›ã€‚ã‚ãªãŸãŒã„ã‚‹ã ã‘ã§ã€å ´ã®é›°å›²æ°—ãŒæ˜ã‚‹ããªã‚Šã¾ã™ã€‚
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="lock-overlay-mini">
                        <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                    </div>
                </div>

                <!-- 4ã¤ã®è»¸ã‹ã‚‰ã‚ãªãŸã‚’ç´è§£ã -->
                <div style="padding: 20px 0 10px; text-align: center;">
                    <img src="/images/banner/four-axes-analysis.png" alt="4ã¤ã®è»¸ã‹ã‚‰ã‚ãªãŸã‚’ç´è§£ã" style="max-width: 100%; height: auto; margin-bottom: 5px;">
                </div>

                <div class="content-locked-mini">
                    <div class="text-blur">
                        <div class="love-type-grid">
                            <div class="love-type-card">
                                <div class="love-type-title">
                                    <img src="/images/love-types/emotional/straight.png" alt="ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆå‹">
                                    æ„Ÿæƒ…è¡¨ç¾ï¼š<span id="emotionalExpressionType">ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆå‹</span>
                                </div>
                                <div class="love-type-content" id="emotionalExpressionContent">
                                    å¥½ããªäººã«ã¯ç´ ç›´ã«æ°—æŒã¡ã‚’ä¼ãˆã‚‹ã‚¿ã‚¤ãƒ—ã€‚é§†ã‘å¼•ãã¯è‹¦æ‰‹ã§ã€æ€ã£ãŸã“ã¨ãŒã™ãé¡”ã«å‡ºã¦ã—ã¾ã„ã¾ã™ã€‚ãã®ç´”ç²‹ã•ãŒã€ç›¸æ‰‹ã®å¿ƒã‚’å‹•ã‹ã™æœ€å¤§ã®é­…åŠ›ã€‚
                                </div>
                            </div>
                            <div class="love-type-card">
                                <div class="love-type-title">
                                    <img src="/images/love-types/distance/independent.png" alt="è‡ªç”±ãƒã‚¤ãƒšãƒ¼ã‚¹å‹">
                                    è·é›¢æ„Ÿï¼š<span id="distanceStyleType">è‡ªç”±ãƒã‚¤ãƒšãƒ¼ã‚¹å‹</span>
                                </div>
                                <div class="love-type-content" id="distanceStyleContent">
                                    æŸç¸›ã•ã‚Œã‚‹ã“ã¨ã‚’å«Œã„ã€è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã‚’å¤§åˆ‡ã«ã—ã¾ã™ã€‚ç›¸æ‰‹ã«ã‚‚è‡ªç”±ã‚’ä¸ãˆã€ãŠäº’ã„ã«æˆé•·ã§ãã‚‹é–¢ä¿‚ã‚’ç†æƒ³ã¨ã—ã¾ã™ã€‚
                                </div>
                            </div>
                            <div class="love-type-card">
                                <div class="love-type-title">
                                    <img src="/images/love-types/values/romantic.png" alt="ãƒ­ãƒãƒ³ãƒã‚¹ãƒˆå‹">
                                    ä¾¡å€¤è¦³ï¼š<span id="loveValuesType">ãƒ­ãƒãƒ³ãƒã‚¹ãƒˆå‹</span>
                                </div>
                                <div class="love-type-content" id="loveValuesContent">
                                </div>
                            </div>
                            <div class="love-type-card">
                                <div class="love-type-title">
                                    <img src="/images/love-types/energy/intense.png" alt="ç‡ƒãˆä¸ŠãŒã‚Šå‹">
                                    ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼š<span id="loveEnergyType">ç‡ƒãˆä¸ŠãŒã‚Šå‹</span>
                                </div>
                                <div class="love-type-content" id="loveEnergyContent">
                                    ã‚ãªãŸã¯æ‹æ„›ã«ãŠã„ã¦ã€ä¸€æ°—ã«æ„Ÿæƒ…ãŒç‡ƒãˆä¸ŠãŒã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="lock-overlay-mini">
                        <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                    </div>
                </div>

                <!-- æœˆè© ã«ã‚ˆã‚‹æ‹æ„›ã‚¿ã‚¤ãƒ—ç·æ‹¬ -->
                <div class="tsukuyomi-section">
                    <div class="tsukuyomi-character">
                        <img src="/images/tsukuyomi/5.png" alt="æœˆè© ">
                    </div>
                    <div class="tsukuyomi-bubble">
                        <div class="tsukuyomi-name">æœˆè© </div>
                        <p>
                            ã„ã‹ãŒã§ã—ãŸã§ã—ã‚‡ã†ã‹ã€‚ã‚ãªãŸè‡ªèº«ã€è‡ªè¦šã—ã¦ã„ãŸé¢ã‚‚ã€åˆã‚ã¦æ„è­˜ã—ãŸé¢ã‚‚ã‚ã£ãŸã¨æ€ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã™ã¹ã¦ãŒã€ã‚ãªãŸã¨ã„ã†æœˆã®æŒã¤å¤šé¢çš„ãªè¼ããªã®ã§ã™ã€‚
                        </p>
                    </div>
                </div>

                <!-- é‹å‘½ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                    <!-- æœˆè© ã«ã‚ˆã‚‹ç›´è¿‘3ãƒ¶æœˆå°å…¥ -->
                    <div class="tsukuyomi-section right">
                        <div class="tsukuyomi-character">
                            <img src="/images/tsukuyomi/7.png" alt="æœˆè© ">
                        </div>
                        <div class="tsukuyomi-bubble">
                            <div class="tsukuyomi-name">æœˆè© </div>
                            <p>
                                ã“ã“ã¾ã§ã€ã‚ãªãŸã®æœˆç›¸ã€è£ã®é¡”ã€3ã¤ã®æœˆã®åŠ›ã€ãã—ã¦4ã¤ã®è»¸ã‹ã‚‰è¦‹ãŸã‚ãªãŸã®æœ¬è³ªã‚’è¦‹ã¦ãã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã™ã¹ã¦ã‚’è¸ã¾ãˆã¦ã€ã„ã‚ˆã„ã‚ˆ<span style="color: #ffd700; font-weight: bold; font-size: 20px;">ç›´è¿‘3ãƒ¶æœˆã®ã‚ãªãŸã«è¨ªã‚Œã‚‹é‹å‘½</span>ã‚’èª­ã¿è§£ã„ã¦ã„ãã¾ã™ã€‚å…¨ä½“é‹ã‹ã‚‰å§‹ã¾ã‚Šã€æ‹æ„›é‹ã€äººé–“é–¢ä¿‚é‹ã€ä»•äº‹é‹ã€é‡‘é‹...æœˆã®ãƒªã‚ºãƒ ãŒæ•™ãˆã¦ãã‚Œã‚‹ã€ã‚ãªãŸã ã‘ã®3ãƒ¶æœˆã®é›†ä¸­çš„ãªã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’ãŠå±Šã‘ã—ã¾ã™ã­ã€‚
                            </p>
                        </div>
                    </div>

                <!-- ã‚¹ã‚¿ãƒ¼ã‚»ãƒ‘ãƒ¬ãƒ¼ã‚¿ãƒ¼ -->
                <div class="star-separator"></div>

                <!-- ç›´è¿‘3ãƒ¶æœˆå…¨ä½“é‹ -->
                <div class="fortune-section destiny" style="padding-top: 0; margin-top: 30px; overflow: hidden;">
                    <!-- ãƒãƒŠãƒ¼ã‚’æ å†…ã®ä¸Šéƒ¨ã«é…ç½® -->
                    <img src="/images/banner/7-unmei.png" alt="ç›´è¿‘3ãƒ¶æœˆã®é‹å‘½" style="width: calc(100% + 16px); height: auto; display: block; margin: -8px -8px 20px -8px; border-radius: 8px 8px 0 0;">
                    <div class="section-header">
                        <h2 class="rhythm-heading" id="fortune-overall-title">æœªæ±ºå®š</h2>
                        <p id="fortune-overall-intro"></p>
                    </div>

                    <!-- é‹å‹¢ã‚°ãƒ©ãƒ•ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆoverallå†…ã«ç§»å‹•ï¼‰ -->
                    <div class="fortune-graph-section" style="margin: 30px 0;">
                        <div style="background: linear-gradient(135deg, rgba(20, 10, 50, 0.95), rgba(40, 20, 70, 0.95)); padding: 20px 15px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                            <h4 style="color: #ffd700; margin-bottom: 20px; text-align: center; font-size: 24px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">
                                3ãƒ¶æœˆã®é‹å‹¢æ¨ç§»ã‚°ãƒ©ãƒ•
                            </h4>
                            <div class="content-locked-mini">
                                <div class="text-blur">
                                    <div style="background: rgba(0, 0, 0, 0.2); border-radius: 10px; padding: 10px; position: relative;">
                                        <div style="height: 420px;">
                                            <canvas id="fortuneChart"></canvas>
                                        </div>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="fortune-content">
                        <!-- overall-1.pngãƒãƒŠãƒ¼ã¨ç›´ä¸‹ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å‰Šé™¤ -->
                        <!-- 1ãƒ¶æœˆç›®ãƒ»2ãƒ¶æœˆç›®ã®å±•é–‹ã¨æ³¨æ„ãƒã‚¤ãƒ³ãƒˆã‚’å‰Šé™¤ -->
                    </div>
                </div>

                <!-- æ‹æ„›é‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <!-- æœˆè© ã«ã‚ˆã‚‹æ‹æ„›é‹ã¸ã®ç§»è¡Œ -->
                <div class="tsukuyomi-section">
                    <div class="tsukuyomi-character">
                        <img src="/images/tsukuyomi/7.png" alt="æœˆè© ">
                    </div>
                    <div class="tsukuyomi-bubble">
                        <div class="tsukuyomi-name">æœˆè© </div>
                        <p>
                            å…¨ä½“é‹ã‚’è¸ã¾ãˆã¦ã€æ¬¡ã«æ°—ã«ãªã‚‹ã®ã¯æ‹æ„›é‹ã§ã™ã­ã€‚ç›´è¿‘3ãƒ¶æœˆã€ã‚ãªãŸã®æ‹æ„›ã«ã¯ã©ã‚“ãªå±•é–‹ãŒå¾…ã£ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚æœˆã®å°ãã‹ã‚‰ã€ã‚ãªãŸã®æ‹ã®è¡Œæ–¹ã‚’è©³ã—ãè¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚
                        </p>
                    </div>
                </div>

                <!-- æ‹æ„›é‹ãƒãƒŠãƒ¼ -->
                <div class="fortune-banner-wrapper">
                    <img src="/images/banner/8-rennai.png" alt="ã‚ãªãŸã®æ‹æ„›é‹" class="fortune-main-banner">

                    <!-- æ‹æ„›é‹ -->
                    <div class="fortune-section love">
                        <div class="fortune-content">
                            <div class="content-locked-mini">
                                <div class="text-blur">
                                    <div class="fortune-highlight">
                                        <p class="fortune-love-text" id="fortune-love-text"></p>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>

                            <!-- æ–°è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼šé‹å‘½çš„ãªå‡ºä¼šã„ -->
                            <img src="/images/banner/love-1.png" alt="ã‚ãªãŸã®å¿ƒã‚’ã¨ãã‚ã‹ã›ã‚‹ã€é‹å‘½çš„ãªå‡ºä¼šã„ã¯è¨ªã‚Œã‚‹ï¼Ÿ" class="section-banner">
                            <div class="content-locked-mini love-section-box">
                                <div class="text-blur">
                                    <div class="love-new-section hanging-text">
                                        <p id="fortune-love-destiny-meeting" class="fortune-text"></p>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>

                            <!-- æ–°è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼šæ‹ã®çŸ¢ã‚’å‘ã‘ã¦ã„ã‚‹ç›¸æ‰‹ -->
                            <img src="/images/banner/love-2.png" alt="ä»Šå¾Œ3ãƒ¶æœˆã€ã‚ãªãŸã«æ‹ã®çŸ¢ã‚’å‘ã‘ã¦ã„ã‚‹ãŠç›¸æ‰‹ã¯ã“ã‚“ãªäºº" class="section-banner">
                            <div class="content-locked-mini love-section-box">
                                <div class="text-blur">
                                    <div class="love-new-section hanging-text">
                                        <p id="fortune-love-admirer-type" class="fortune-text"></p>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>

                            <!-- æ–°è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼šå±é™ºãªç•°æ€§ã®ã‚¿ã‚¤ãƒ— -->
                            <img src="/images/banner/love-3.png" alt="å±é™ºãªæ‹ã®ç½ ï¼Ÿã“ã®3ãƒ¶æœˆã€ã‚ãªãŸãŒå‡ºä¼šã†ã¨å±é™ºãªç•°æ€§ã®ã‚¿ã‚¤ãƒ—" class="section-banner">
                            <div class="content-locked-mini love-section-box">
                                <div class="text-blur">
                                    <div class="love-new-section hanging-text">
                                        <p id="fortune-love-dangerous-type" class="fortune-text"></p>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>

                            <!-- æ‹æ„›ã®æ³¨æ„ãƒã‚¤ãƒ³ãƒˆã‚’å‰Šé™¤ -->
                        </div>
                    </div>
                </div>

                <!-- äººé–“é–¢ä¿‚é‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <!-- æœˆè© ã«ã‚ˆã‚‹äººé–“é–¢ä¿‚é‹ã¸ã®ç§»è¡Œ -->
                <div class="tsukuyomi-section right">
                    <div class="tsukuyomi-character">
                        <img src="/images/tsukuyomi/4.png" alt="æœˆè© ">
                    </div>
                    <div class="tsukuyomi-bubble">
                        <div class="tsukuyomi-name">æœˆè© </div>
                        <p>
                            æ‹æ„›é‹ã¯ã„ã‹ãŒã§ã—ãŸã‹ï¼Ÿã•ã¦ã€æ‹æ„›ã ã‘ã§ãªãã€ã™ã¹ã¦ã®äººé–“é–¢ä¿‚ã‚‚è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ç›´è¿‘3ãƒ¶æœˆã€ã‚ãªãŸã®å‘¨ã‚Šã«ã¯ã©ã‚“ãªäººãŒé›†ã¾ã£ã¦ãã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚
                        </p>
                    </div>
                </div>

                <!-- äººé–“é–¢ä¿‚é‹ -->
                <div class="fortune-banner-wrapper">
                    <img src="/images/banner/9-ningenn.png" alt="ã‚ãªãŸã®äººé–“é–¢ä¿‚é‹" class="fortune-main-banner">

                    <div class="fortune-section relationship">
                        <div class="fortune-content">
                            <div class="content-locked-mini">
                                <div class="text-blur">
                                    <div class="fortune-highlight">
                                        <p class="fortune-relationship-text" id="fortune-relationship-text"></p>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>

                            <!-- æ–°è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼šæ–°ã—ã„äººé–“é–¢ä¿‚ -->
                            <img src="/images/banner/relation-1.png" alt="ä»Šå¾Œ3ãƒ¶æœˆã§ã‚ãªãŸãŒç¯‰ãã“ã¨ã«ãªã‚‹ã€æ–°ã—ã„äººé–“é–¢ä¿‚ã¨ã¯" class="section-banner">
                            <div class="content-locked-mini love-section-box">
                                <div class="text-blur">
                                    <div class="relationship-new-section hanging-text">
                                        <p id="fortune-relationship-new-connections" class="fortune-text"></p>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>

                            <!-- æ–°è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼šäººé–“é–¢ä¿‚ã®è»¢æ©Ÿ -->
                            <img src="/images/banner/relation-2.png" alt="äººé–“é–¢ä¿‚ã®è»¢æ©ŸãŒè¨ªã‚Œã¾ã™ã€‚åˆ‡ã‚‹ã¹ãç¸ã¨ç¹‹ãã¹ãç¸ã¨ã¯ï¼Ÿ" class="section-banner">
                            <div class="content-locked-mini love-section-box">
                                <div class="text-blur">
                                    <div class="relationship-new-section hanging-text">
                                        <p id="fortune-relationship-challenges" class="fortune-text"></p>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>

                            <!-- äººé–“é–¢ä¿‚ã®æ³¨æ„ãƒã‚¤ãƒ³ãƒˆã‚’å‰Šé™¤ -->
                        </div>
                    </div>
                </div>

                <!-- ä»•äº‹é‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <!-- æœˆè© ã«ã‚ˆã‚‹ä»•äº‹é‹ã¸ã®ç§»è¡Œ -->
                <div class="tsukuyomi-section">
                    <div class="tsukuyomi-character">
                        <img src="/images/tsukuyomi/3.png" alt="æœˆè© ">
                    </div>
                    <div class="tsukuyomi-bubble">
                        <div class="tsukuyomi-name">æœˆè© </div>
                        <p>
                            äººé–“é–¢ä¿‚ã®æµã‚Œã‚’è¸ã¾ãˆã¦ã€æ¬¡ã¯ä»•äº‹é‹ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ç›´è¿‘3ãƒ¶æœˆã€ã‚ãªãŸã®ä»•äº‹ã‚„ã‚­ãƒ£ãƒªã‚¢ã«ã¯ã©ã‚“ãªå±•é–‹ãŒå¾…ã£ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚
                        </p>
                    </div>
                </div>

                <!-- ä»•äº‹é‹ -->
                <div class="fortune-banner-wrapper">
                    <img src="/images/banner/10-shigoto.png" alt="ã‚ãªãŸã®ä»•äº‹é‹" class="fortune-main-banner">

                    <div class="fortune-section work">
                        <div class="fortune-content">
                            <div class="content-locked-mini">
                                <div class="text-blur">
                                    <div class="fortune-highlight">
                                        <p class="fortune-work-text" id="fortune-work-text"></p>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>

                            <!-- æ–°è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼šä»•äº‹ã§ã®èºé€²ãƒãƒ£ãƒ³ã‚¹ -->
                            <img src="/images/banner/work-1.png" alt="ä»•äº‹ã§ã®èºé€²ãƒãƒ£ãƒ³ã‚¹ã¯ä»Šã«ã‚‚æ‰‹ã«å±Šããã†" class="section-banner">
                            <div class="content-locked-mini love-section-box">
                                <div class="text-blur">
                                    <div class="work-new-section hanging-text">
                                        <p id="fortune-work-new-talent" class="fortune-text"></p>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>

                            <!-- æ–°è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼šé¿ã‘ã‚‹ã¹ãè½ã¨ã—ç©´ -->
                            <img src="/images/banner/work-2.png" alt="ä»•äº‹ã§é™¥ã‚ŠãŒã¡ãªè½ã¨ã—ç©´" class="section-banner">
                            <div class="content-locked-mini love-section-box">
                                <div class="text-blur">
                                    <div class="work-new-section hanging-text">
                                        <p id="fortune-work-turning-point" class="fortune-text"></p>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>

                            <!-- ä»•äº‹ã®æ³¨æ„ãƒã‚¤ãƒ³ãƒˆã‚’å‰Šé™¤ -->
                        </div>
                    </div>
                </div>

                <!-- é‡‘é‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <!-- æœˆè© ã«ã‚ˆã‚‹é‡‘é‹ã¸ã®ç§»è¡Œ -->
                <div class="tsukuyomi-section right">
                    <div class="tsukuyomi-character">
                        <img src="/images/tsukuyomi/6.png" alt="æœˆè© ">
                    </div>
                    <div class="tsukuyomi-bubble">
                        <div class="tsukuyomi-name">æœˆè© </div>
                        <p>
                            æœ€å¾Œã«ã€èª°ã‚‚ãŒæ°—ã«ãªã‚‹é‡‘é‹ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ç›´è¿‘3ãƒ¶æœˆã€ã‚ãªãŸã®è²¡é‹ã«ã¯ã©ã‚“ãªæµã‚ŒãŒè¨ªã‚Œã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚
                        </p>
                    </div>
                </div>

                <!-- é‡‘é‹ -->
                <div class="fortune-banner-wrapper">
                    <img src="/images/banner/11-kin.png" alt="ã‚ãªãŸã®é‡‘é‹" class="fortune-main-banner">

                    <div class="fortune-section money">
                        <div class="fortune-content">
                            <div class="content-locked-mini">
                                <div class="text-blur">
                                    <div class="fortune-highlight">
                                        <p class="fortune-money-text" id="fortune-money-text"></p>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>

                            <!-- æ–°è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼šãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ -->
                            <img src="/images/banner/money-1.png" alt="ã‚ãªãŸã®é‡‘é‹ã‚’åº•ä¸Šã’ã™ã‚‹ã€ã¨ã£ã¦ãŠãã®ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³" class="section-banner">
                            <div class="content-locked-mini love-section-box">
                                <div class="text-blur">
                                    <div class="money-new-section hanging-text">
                                        <div id="fortune-money-lucky">
                                            <p>
                                                æ–°æœˆã®æ—¥ã«è²¡å¸ƒã‚’æ–°èª¿ã—ã€æº€æœˆã®å¤œã«è²¡å¸ƒã‚’æœˆå…‰æµ´ã•ã›ã‚‹ã¨é‡‘é‹UPã€‚æœˆãŒæ¬ ã‘ã¦ã„ãæ™‚æœŸã¯ç„¡é§„é£ã„ã‚’æ§ãˆã€æ¯æœˆã®æ–°æœˆã¨æº€æœˆã«è²¡å¸ƒã‚’æ•´ç†ã™ã‚‹ã“ã¨ãŒå¤§åˆ‡ã€‚
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>

                            <!-- æ–°è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼šé‡‘éŠ­ãƒˆãƒ©ãƒ–ãƒ«å›é¿ -->
                            <img src="/images/banner/money-2.png" alt="ãŠé‡‘ã®è²¸ã—å€Ÿã‚Šã¯æ…é‡ã«ã€‚äººé–“é–¢ä¿‚ã«ãƒ’ãƒ“ã‚’å…¥ã‚Œã‚‹é‡‘éŠ­å•é¡Œ" class="section-banner">
                            <div class="content-locked-mini love-section-box">
                                <div class="text-blur">
                                    <div class="money-new-section hanging-text">
                                        <p id="fortune-money-trouble" class="fortune-text"></p>
                                    </div>
                                </div>
                                <div class="lock-overlay-mini">
                                    <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æœˆè© ã«ã‚ˆã‚‹æœˆé½¢ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¸ã®ç§»è¡Œ -->
                <div class="tsukuyomi-section">
                    <div class="tsukuyomi-character">
                        <img src="/images/tsukuyomi/5.png" alt="æœˆè© ">
                    </div>
                    <div class="tsukuyomi-bubble">
                        <div class="tsukuyomi-name">æœˆè© </div>
                        <p>
                            ã“ã“ã§ç‰¹åˆ¥ãªãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆãŒã‚ã‚Šã¾ã™ï¼æ‹æ„›é‹ã‚’ã•ã‚‰ã«æ´»ã‹ã™ãŸã‚ã«ã€ã‚ãªãŸã ã‘ã®ç‰¹åˆ¥ãªæœˆé½¢ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ãŠä¼ãˆã—ã¾ã™ã­ã€‚
                        </p>
                    </div>
                </div>

                <!-- æœˆé½¢ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ -->
                <div class="monthly-fortune">
                    <div id="moonCalendarSection">
                        <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                    </div>
                </div>

                <!-- æœˆè© ã«ã‚ˆã‚‹æœ€çµ‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¸ã®å°å…¥ -->
                <div class="tsukuyomi-section right">
                    <div class="tsukuyomi-character">
                        <img src="/images/tsukuyomi/2.png" alt="æœˆè© ">
                    </div>
                    <div class="tsukuyomi-bubble">
                        <div class="tsukuyomi-name">æœˆè© </div>
                        <p>
                            ã“ã“ã¾ã§é•·ã„è¨ºæ–­ã§ã—ãŸã­ã€‚æœ€å¾Œã«ã€ç›´è¿‘3ãƒ¶æœˆã‚’å¹¸ã›ã«éã”ã™ãŸã‚ã®ç‰¹åˆ¥ãªéµã‚’ãŠä¼ãˆã—ã¾ã™ã€‚
                        </p>
                    </div>
                </div>

                <!-- æœ€å¾Œã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <!-- æœ€çµ‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
                <div class="final-message">
                    <!-- ã€Œæ–°æœˆã®ã‚ãªãŸã¯ã€ãƒãƒŠãƒ¼ã‚’å…ˆã« -->
                    <div style="margin-bottom: 30px;">
                        <img src="/images/banner/12-saigo.png" alt="æœˆãŒæ•™ãˆã¦ãã‚Œã‚‹5ã¤ã®æ•™ãˆ" style="max-width: 100%; height: auto; margin-bottom: 5px;">
                        <div class="content-locked-mini">
                            <div class="text-blur">
                                <p>
                                    æ–°æœˆã®ã‚ãªãŸã¯ã€å¸¸ã«æ–°ã—ã„ã“ã¨ã¸ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã™ã‚‹å‹‡æ°—ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ãã®å‹‡æ°—ã¯ç´ æ™´ã‚‰ã—ã„ã‚‚ã®ã§ã™ãŒã€æ™‚ã«ã¯ç«‹ã¡æ­¢ã¾ã‚‹ã“ã¨ã‚‚å¤§åˆ‡ã€‚æœˆã®ãƒªã‚ºãƒ ã«åˆã‚ã›ã¦ã€ç·©æ€¥ã‚’ã¤ã‘ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šå¤§ããªæˆæœã‚’å¾—ã‚‰ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚
                                </p>
                            </div>
                            <div class="lock-overlay-mini">
                                <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                            </div>
                        </div>
                    </div>

                    <!-- ãã®å¾Œã«ã€Œæœ€ã‚‚é‡è¦ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã¨ã€Œ5ã¤ã®æ•™ãˆã€ -->
                    <img src="/images/banner/last.png" alt="æœˆãŒæ•™ãˆã¦ãã‚Œã‚‹æœ€ã‚‚é‡è¦ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸" style="width: 100%; height: auto; margin-bottom: 20px;">
                    <div class="content-locked-mini">
                        <div class="text-blur">
                            <!-- å‹•çš„ã«è¡¨ç¤ºã•ã‚Œã‚‹æœˆãŒæ•™ãˆã¦ãã‚Œã‚‹æœ€ã‚‚é‡è¦ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
                            <div id="fortune-important-message" style="text-align: left; margin: 30px 0;">
                                <!-- ã“ã“ã«å‹•çš„ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ -->
                            </div>
                        </div>
                        <div class="lock-overlay-mini">
                            <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                        </div>
                    </div>
                </div>

                    <!-- æœˆè© ã®æœ€çµ‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
                    <div class="tsukuyomi-section">
                        <div class="tsukuyomi-character">
                            <img src="/images/tsukuyomi/9.png" alt="æœˆè© ">
                        </div>
                        <div class="tsukuyomi-bubble">
                            <div class="tsukuyomi-name">æœˆè© </div>
                            <p>
                                é•·ã„è¨ºæ–­ã§ã—ãŸãŒã€æœ€å¾Œã¾ã§èã„ã¦ãã ã•ã£ã¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚ã“ã“ã¾ã§ã€ã‚ãªãŸã®æœˆç›¸ã€è£ã®é¡”ã€3ã¤ã®æœˆã®åŠ›ã€4ã¤ã®è»¸ã‹ã‚‰è¦‹ãŸã‚ãªãŸã®æœ¬è³ªã€ãã—ã¦ç›´è¿‘3ãƒ¶æœˆã®é‹å‹¢ã‚’è¦‹ã¦ãã¾ã—ãŸã€‚æœˆã®å…‰ã¯ã€ã‚ãªãŸã®å†…ãªã‚‹å…‰ã‚’æ˜ ã—å‡ºã™é¡ã€‚ã“ã®è¨ºæ–­ã‚’é€šã—ã¦ã€ã‚ãªãŸãŒæœ¬å½“ã®è‡ªåˆ†ã‚’è¦‹ã¤ã‘ã€ã‚ˆã‚Šè¼ã‹ã—ã„äººç”Ÿã‚’æ­©ã‚€ãã£ã‹ã‘ã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚æœˆã®ãƒªã‚ºãƒ ã¨å…±ã«ã€ç´ æ™´ã‚‰ã—ã„æ—¥ã€…ã‚’ãŠéã”ã—ãã ã•ã„ã­ã€‚
                            </p>
                        </div>
                    </div>

                    <!-- ãŠã¤ãã•ã¾ã‹ã‚‰ã®ç´„æŸï¼ˆCTAï¼‰ -->
                    <div class="moon-promise-section" style="background: linear-gradient(135deg, rgba(118, 75, 162, 0.1), rgba(102, 126, 234, 0.1)); border: 2px solid rgba(255, 215, 0, 0.3); border-radius: 20px; padding: 40px 20px; margin: 40px auto; max-width: 600px; text-align: center;">
                        <h2 style="color: #ffd700; font-size: 24px; margin-bottom: 20px; text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);">
                            ğŸŒ™ ãŠã¤ãã•ã¾ã‹ã‚‰ã®ç´„æŸ
                        </h2>

                        <p style="color: #fff; line-height: 1.8; margin-bottom: 25px;">
                            <span class="user-name-display">ã‚ãªãŸ</span>ã•ã‚“ã€<br>
                            ä»Šæ—¥ã“ã“ã§å—ã‘å–ã£ãŸãŠã¤ãã•ã¾ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€<br>
                            èª­ã‚“ã§çµ‚ã‚ã‚Šã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
                        </p>

                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 15px; padding: 20px; margin: 20px 0;">
                            <p style="color: #87ceeb; font-size: 16px; margin-bottom: 15px;">
                                ãŠã¤ãã•ã¾ã¯ã€<span id="nextVisitDate" style="color: #ffd700; font-weight: bold;">2é€±é–“å¾Œ</span>ã«<br>
                                ã‚‚ã†ä¸€åº¦ã€<span class="user-name-display">ã‚ãªãŸ</span>ã•ã‚“ã®ã‚‚ã¨ã‚’è¨ªã‚Œã¾ã™ã€‚
                            </p>

                            <p style="color: #ccc; font-size: 14px; line-height: 1.6;">
                                ãã®ã¨ã<br>
                                ã€Œä»Šã®è¡Œå‹•ãŒç¶šã‘ã‚‰ã‚Œã¦ã„ã‚‹ã‹ã€<br>
                                ã€Œå¿ƒã«ã©ã‚“ãªå¤‰åŒ–ãŒèŠ½ç”Ÿãˆã¦ã„ã‚‹ã‹ã€<br>
                                ã‚’ä¸€ç·’ã«ç¢ºã‹ã‚ã¾ã—ã‚‡ã†ã€‚
                            </p>
                        </div>

                        <p style="color: #fff; margin: 20px 0; font-size: 15px;">
                            ã¾ãšã¯å°ã•ãªç¿’æ…£ã‚’2é€±é–“ç¶šã‘ã‚‹ã ã‘ã§ã€<br>
                            æœªæ¥ã®æ™¯è‰²ã¯é©šãã»ã©å¤‰ã‚ã‚Šã¾ã™ã€‚
                        </p>

                        <div style="background: linear-gradient(135deg, #ffd700, #ffed4e); border-radius: 30px; padding: 3px; margin: 30px auto; max-width: 400px;">
                            <button onclick="saveToBookmark()" style="width: 100%; background: linear-gradient(135deg, #764ba2, #667eea); color: white; padding: 15px 30px; border: none; border-radius: 27px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                                ğŸ“± ã“ã®ãƒšãƒ¼ã‚¸ã‚’ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã™ã‚‹
                            </button>
                        </div>

                        <p style="color: #aaa; font-size: 13px; margin-top: 15px;">
                            ã€Œç¶šã‘ã‚‰ã‚Œã¦ã„ã‚‹ã‹ãªï¼Ÿã€ã¨æ„Ÿã˜ãŸã¨ãã¯ã€<br>
                            ã¾ãŸã“ã®ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ã¿ã¦ãã ã•ã„ã€‚
                        </p>

                        <p style="color: #ffd700; margin-top: 25px; font-size: 14px; font-style: italic;">
                            ãŠã¤ãã•ã¾ã¯ã„ã¤ã§ã‚‚ã€<br>
                            <span class="user-name-display">ã‚ãªãŸ</span>ã•ã‚“ã®ãã°ã§æˆé•·ã‚’è¦‹å®ˆã£ã¦ã„ã¾ã™ã€‚
                        </p>
                    </div>

                    <!-- CTAã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                    <div class="cta-section">
                        <h3 class="cta-title">æœˆè© ã¨LINEã§ç¹‹ãŒã‚‹</h3>
                        <p class="cta-description">
                            æ¯æ—¥ã®æœˆé½¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€é€±é–“é‹å‹¢ã‚°ãƒ©ãƒ•ã€æœˆç›¸åˆ¥é–‹é‹ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ãŠå±Šã‘ã—ã¾ã™ã€‚
                            ä»Šãªã‚‰å‹ã ã¡è¿½åŠ ã§ç‰¹åˆ¥ãªæœˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆï¼
                        </p>
                        <a href="https://lin.ee/egmCXoG" class="cta-button">ğŸŒ™ LINEå‹ã ã¡è¿½åŠ ã™ã‚‹</a>
                    </div>
                </div>
        </div><!-- premium-content-wrapperçµ‚äº† -->
    </div><!-- containerçµ‚äº† -->

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/otsukisama-data-loader.js?v=20250108002"></script>
    <script src="js/text-formatter.js?v=20250107001"></script>
    <script src="js/personality-type-mapper.js?v=20250107001"></script>
    <script src="js/three-powers-calculator.js?v=20250107002"></script>
    <script src="js/lp-otsukisama-moon.js?v=20250901001"></script>
    <script src="js/lp-otsukisama-api.js?v=20250901001"></script>
    <script src="js/lp-otsukisama-display.js?v=20250107001"></script>
    <script src="js/lp-otsukisama-display-line.js?v=20250901001"></script>
    <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é–¢é€£ã‚¹ã‚¯ãƒªãƒ—ãƒˆ - text-basedã®ã¿ä½¿ç”¨ -->
    <script src="js/fortune-date-extractor.js?v=20250111003"></script>
    <script src="js/lp-otsukisama-calendar-text-based.js?v=20250111003"></script>
    <script src="js/lp-otsukisama-graph.js?v=20250901001"></script>
    <script src="js/fortune-date-calculator.js?v=20250109001"></script>
    <script src="js/fortune-display.js?v=20250109001"></script>

    <!-- lp-otsukisama-main.jsã¯çµ±åˆç‰ˆã§ã¯ä½¿ç”¨ã—ãªã„ï¼ˆé‡è¤‡ã‚’é¿ã‘ã‚‹ãŸã‚ï¼‰ -->

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentPatternId = null;
        let userName = 'ã€‡ã€‡'; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼å
        window.moonPhaseData = null;
        window.hiddenPhaseData = null;
        window.uiTexts = null;

        // ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿
        async function loadDataFiles() {
            try {
                const [moonPhases, hiddenPhases, texts] = await Promise.all([
                    fetch('/data/moon-phase-descriptions.json').then(r => r.json()),
                    fetch('/data/hidden-phase-descriptions.json').then(r => r.json()),
                    fetch('/data/ui-texts.json').then(r => r.json())
                ]);

                window.moonPhaseData = moonPhases;
                window.hiddenPhaseData = hiddenPhases;
                window.uiTexts = texts;

                // 3ã¤ã®åŠ›è¨ˆç®—æ©Ÿã‚’åˆæœŸåŒ–
                if (window.ThreePowersCalculator) {
                    await window.ThreePowersCalculator.load();
                }

                console.log('Data files loaded successfully');
                return true;
            } catch (error) {
                console.error('Failed to load data files:', error);
                return false;
            }
        }

        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é€²æ—ãƒãƒ¼ã®æ›´æ–°
        function updateScrollProgress() {
            const scrollProgress = document.getElementById('scrollProgress');
            if (scrollProgress) {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrollPercent = (scrollTop / scrollHeight) * 100;
                scrollProgress.style.width = scrollPercent + '%';
            }
        }

        // è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã‚’è¨­å®šï¼ˆAPIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«åŸºã¥ã„ã¦å‹•çš„ã«æ±ºå®šï¼‰
        function setDisplayMode(isPaid) {
            const pageBody = document.getElementById('pageBody');
            const loadingText = document.querySelector('.loading-text');

            if (isPaid) {
                // å®Œå…¨ç‰ˆãƒ¢ãƒ¼ãƒ‰
                document.body.className = 'complete-mode';
                if (pageBody) pageBody.className = 'complete-mode';
                if (loadingText) {
                    loadingText.textContent = 'è¨ºæ–­çµæœã‚’æº–å‚™ã—ã¦ã„ã¾ã™...';
                }
                // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ã‚‚æ›´æ–°
                document.title = 'ãŠã¤ãã•ã¾è¨ºæ–­ - æœˆãŒå°ãã‚ãªãŸã®é‹å‘½';
                return 'complete';
            } else {
                // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰
                document.body.className = 'preview-mode';
                if (pageBody) pageBody.className = 'preview-mode';
                if (loadingText) {
                    loadingText.textContent = 'è¨ºæ–­çµæœã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...';
                }
                // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ã‚‚æ›´æ–°
                document.title = 'è¨ºæ–­çµæœãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ - ãŠã¤ãã•ã¾è¨ºæ–­';
                return 'preview';
            }
        }

        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»å®Œå…¨ç‰ˆçµ±åˆã®åˆæœŸåŒ–é–¢æ•°
        async function initUnified() {
            const urlParams = new URLSearchParams(window.location.search);
            const diagnosisId = urlParams.get('id');

            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¯æ—¢ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã®ã§ã€é€²æ—ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿é–‹å§‹
            const loadingOverlay = document.getElementById('loadingOverlay');
            const loadingProgress = document.getElementById('loadingProgress');

            // é€²æ—ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 20;
                if (progress > 90) progress = 90; // 90%ã§ä¸€æ—¦æ­¢ã‚ã‚‹
                if (loadingProgress) {
                    loadingProgress.style.width = progress + '%';
                }
            }, 300);

            // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã«ã‚¯ãƒªã‚¢
            window.loadingProgressInterval = progressInterval;

            // è¨ºæ–­ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
            if (diagnosisId) {
                try {
                    console.log('è¨ºæ–­ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­:', diagnosisId);
                    const userId = urlParams.get('userId');
                    const response = await fetch(`/api/profile-form-v2?action=get-diagnosis&id=${diagnosisId}&userId=${userId || ''}`);
                    const data = await response.json();
                    console.log('å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿:', data);

                    if (data.success && data.diagnosis) {
                        // è¨ºæ–­æ—¥ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«è¨­å®šï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—ã—ãŸcreated_atã‚’ä½¿ç”¨ï¼‰
                        if (data.diagnosis.created_at) {
                            // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«è¨­å®šï¼ˆlp-otsukisama-display.jsã§ä½¿ç”¨ï¼‰
                            window.globalDiagnosisDate = data.diagnosis.created_at;
                            console.log('è¨ºæ–­æ—¥ã‚’è¨­å®š:', data.diagnosis.created_at);

                            // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã‚‚è¿½åŠ ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼‰
                            if (!urlParams.has('diagnosisDate')) {
                                urlParams.set('diagnosisDate', data.diagnosis.created_at);
                                const newUrl = window.location.pathname + '?' + urlParams.toString();
                                window.history.replaceState({}, '', newUrl);
                            }
                        }

                        // ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®ç¢ºèªï¼ˆtest=trueãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã¯æ¨©é™ã‚’ãƒã‚¤ãƒ‘ã‚¹ï¼‰
                        const isTestMode = urlParams.get('test') === 'true';

                        // ã‚¢ã‚¯ã‚»ã‚¹ãƒ¬ãƒ™ãƒ«ã«åŸºã¥ã„ã¦ãƒ¢ãƒ¼ãƒ‰ã‚’è¨­å®šï¼ˆãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã¯å¸¸ã«fullï¼‰
                        const isPaid = isTestMode ? true : (data.accessLevel === 'full');
                        const mode = setDisplayMode(isPaid);
                        window.currentMode = mode;  // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ä¿å­˜

                        // ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã¯è­¦å‘Šè¡¨ç¤º
                        if (isTestMode) {
                            console.warn('âš ï¸ ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰: æ¨©é™ãƒã‚§ãƒƒã‚¯ã‚’ãƒã‚¤ãƒ‘ã‚¹ã—ã¦å®Œå…¨ç‰ˆã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™');
                        }
                        window.currentUserId = userId;  // ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚‚ä¿å­˜
                        // åå‰ã‚’è¡¨ç¤º
                        const resultName = document.getElementById('resultName');
                        if (resultName) {
                            resultName.textContent = data.diagnosis.user_name || 'ã‚ãªãŸ';
                        }

                        // ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å®šç¾©ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã¨ã—ã¦ï¼‰
                        const userName = data.diagnosis.user_name || 'ã€‡ã€‡';

                        // ãƒ‘ã‚¿ãƒ¼ãƒ³IDã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«è¨­å®š
                        currentPatternId = data.diagnosis.moon_pattern_id || data.diagnosis.pattern_id;

                        // æœˆç›¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ›´æ–°
                        if (typeof updateMoonPhaseContent === 'function') {
                            updateMoonPhaseContent(currentPatternId);
                        }

                        // æœˆç›¸ã‚’è¨ˆç®—ã—ã¦è¡¨ç¤º
                        const moonPhaseIndex = Math.floor(currentPatternId / 8);
                        const hiddenPhaseIndex = currentPatternId % 8;
                        const moonPhaseNames = ['æ–°æœˆ', 'ä¸‰æ—¥æœˆ', 'ä¸Šå¼¦ã®æœˆ', 'åä¸‰å¤œ', 'æº€æœˆ', 'åå…­å¤œ', 'ä¸‹å¼¦ã®æœˆ', 'æš'];
                        const moonPhase = moonPhaseNames[moonPhaseIndex];
                        const hiddenMoonPhase = moonPhaseNames[hiddenPhaseIndex];

                        // æœˆç›¸ã‚«ãƒ¼ãƒ‰ã‚’å‹•çš„ã«ç”Ÿæˆ
                        updateMoonPhaseCard(currentPatternId, moonPhaseIndex, moonPhase);

                        // è£æœˆç›¸ã‚«ãƒ¼ãƒ‰ã‚’å‹•çš„ã«ç”Ÿæˆï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’æ¸¡ã™ï¼‰
                        updateHiddenPhaseCard(currentPatternId, hiddenPhaseIndex, hiddenMoonPhase, userName);

                        // 3ã¤ã®åŠ›ã‚’æ›´æ–°
                        const birthDate = data.diagnosis.birth_date || localStorage.getItem('birthDate');
                        if (birthDate) {
                            updateThreePowers(birthDate, moonPhase, userName);
                        }

                        // 4ã¤ã®è»¸ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®šï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ç›´æ¥ä½¿ç”¨ï¼‰
                        const loveProfile = {
                            emotionalExpression: data.diagnosis.emotional_expression,
                            distanceStyle: data.diagnosis.distance_style,
                            loveValues: data.diagnosis.love_values,
                            loveEnergy: data.diagnosis.love_energy
                        };
                        console.log('=== 4ã¤ã®è»¸ãƒ‡ãƒ¼ã‚¿ç¢ºèª ===');
                        console.log('Database values:', loveProfile);
                        console.log('API response:', data.diagnosis);
                        console.log('Access level:', data.accessLevel);
                        console.log('Cache version: 20250108001');


                        // 6ã¤ã®è¦ç´ ã‚’æ›´æ–°
                        if (typeof updateSixElements === 'function') {
                            // å¸¸ã«å…¨ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™ï¼ˆã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ã‚’ä¸€æ—¦ç„¡åŠ¹åŒ–ï¼‰
                            updateSixElements(currentPatternId, moonPhase, hiddenMoonPhase, loveProfile);
                        }

                        // 4ã¤ã®è»¸ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºï¼ˆå¸¸ã«è¡¨ç¤ºï¼‰
                        if (typeof updatePersonalityDisplay === 'function') {
                            console.log('Calling updatePersonalityDisplay with:', loveProfile);
                            await updatePersonalityDisplay(loveProfile);
                            console.log('updatePersonalityDisplay completed');
                        } else {
                            console.error('updatePersonalityDisplay is not defined');
                        }

                        // ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ›´æ–°ï¼ˆå¸¸ã«è¡¨ç¤ºï¼‰
                        if (typeof updateLoveEnergyContent === 'function' && loveProfile.loveEnergy) {
                            await updateLoveEnergyContent(loveProfile.loveEnergy);
                        }

                        // æ–°ã—ã„é‹å‹¢è¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨
                        const fortuneDisplay = new FortuneDisplay();
                        await fortuneDisplay.loadFortuneData();
                        const graphType = await fortuneDisplay.displayAllFortunes(currentPatternId, userName);
                        console.log('Fortune display completed with graph type:', graphType);

                        // æ—§ã‚·ã‚¹ãƒ†ãƒ ã¨ã®äº’æ›æ€§ã®ãŸã‚ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚‚æ›´æ–°
                        if (window.OtsukisamaDataLoader && window.OtsukisamaDataLoader.isLoaded()) {
                            const pattern = window.OtsukisamaDataLoader.getPatternFortune(currentPatternId);
                            console.log('Pattern data for legacy system:', pattern);
                            if (pattern && typeof updateDynamicContentFromPattern === 'function') {
                                await updateDynamicContentFromPattern(pattern);
                            }
                        } else {
                            // ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ€ãƒ¼ã®èª­ã¿è¾¼ã¿ã‚’å¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œ
                            window.addEventListener('otsukisama-data-loaded', async () => {
                                const pattern = window.OtsukisamaDataLoader.getPatternFortune(currentPatternId);
                                console.log('Pattern data for legacy system (after wait):', pattern);
                                if (pattern && typeof updateDynamicContentFromPattern === 'function') {
                                    await updateDynamicContentFromPattern(pattern);
                                }
                            }, { once: true });
                        }

                        // ã‚°ãƒ©ãƒ•ã‚’åˆæœŸåŒ–ï¼ˆå¸¸ã«è¡¨ç¤ºï¼‰ - å°‘ã—é…å»¶ã‚’å…¥ã‚Œã¦ç¢ºå®Ÿã«å®Ÿè¡Œ
                        setTimeout(async () => {
                            if (typeof updateFortuneGraph === 'function') {
                                console.log('Initializing fortune graph for pattern:', currentPatternId);
                                await updateFortuneGraph(currentPatternId);
                            } else {
                                console.error('updateFortuneGraph function not found');
                            }
                        }, 100);

                        // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’åˆæœŸåŒ–ï¼ˆçµ±åˆç‰ˆã‚’ä½¿ç”¨ï¼‰ - é‹å‹¢ãƒ†ã‚­ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚ŒãŸå¾Œã«å®Ÿè¡Œ
                        setTimeout(async () => {
                            // è¨ºæ–­ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”¨ï¼‰
                            const fortuneTextData = {
                                overall: { text: document.getElementById('fortune-overall-text')?.textContent || document.getElementById('fortune-overall-text')?.innerText || '' },
                                love: { text: document.getElementById('fortune-love-text')?.textContent || document.getElementById('fortune-love-text')?.innerText || '' },
                                career: { text: document.getElementById('fortune-career-text')?.textContent || document.getElementById('fortune-career-text')?.innerText || '' },
                                relationship: { text: document.getElementById('fortune-relationship-text')?.textContent || document.getElementById('fortune-relationship-text')?.innerText || '' },
                                money: { text: document.getElementById('fortune-money-text')?.textContent || document.getElementById('fortune-money-text')?.innerText || '' }
                            };
                            
                            console.log('[Main] Fortune text data for calendar:', fortuneTextData);

                            if (typeof generateTextBasedCalendar === 'function') {
                                console.log('Initializing text-based calendar for pattern:', currentPatternId);
                                await generateTextBasedCalendar(currentPatternId, fortuneTextData);
                            } else if (typeof generateIntegratedCalendar === 'function') {
                                console.log('Falling back to integrated calendar for pattern:', currentPatternId);
                                await generateIntegratedCalendar(currentPatternId, fortuneData);
                            } else if (typeof generatePersonalizedCalendar === 'function') {
                                console.log('Falling back to original calendar for pattern:', currentPatternId);
                                await generatePersonalizedCalendar(currentPatternId);
                            } else {
                                console.error('Calendar generation function not found');
                            }
                        }, 500); // é‹å‹¢ãƒ†ã‚­ã‚¹ãƒˆãŒç¢ºå®Ÿã«è¡¨ç¤ºã•ã‚ŒãŸå¾Œã«å®Ÿè¡Œ

                        console.log('ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºå®Œäº†');
                    } else {
                        console.error('è¨ºæ–­ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ:', data);
                    }
                } catch (error) {
                    console.error('è¨ºæ–­ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                } finally {
                    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’éè¡¨ç¤ºï¼ˆé€²æ—ãƒãƒ¼ã‚’100%ã«ã—ã¦ã‹ã‚‰ï¼‰
                    if (loadingOverlay) {
                        // é€²æ—ãƒãƒ¼ã‚’100%ã«
                        if (loadingProgress) {
                            loadingProgress.style.width = '100%';
                        }
                        // ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã‚’ã‚¯ãƒªã‚¢
                        if (window.loadingProgressInterval) {
                            clearInterval(window.loadingProgressInterval);
                        }
                        setTimeout(() => {
                            loadingOverlay.style.display = 'none';
                            document.body.classList.remove('loading-active');
                        }, 500);
                    }
                }
            } else {
                // è¨ºæ–­IDãŒãªã„å ´åˆã‚‚ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’éè¡¨ç¤º
                if (loadingOverlay) {
                    loadingOverlay.style.display = 'none';
                    document.body.classList.remove('loading-active');
                    if (window.loadingProgressInterval) {
                        clearInterval(window.loadingProgressInterval);
                    }
                }
            }

            // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã€è³¼å…¥ãƒœã‚¿ãƒ³ã®è¨­å®š
            if (window.currentMode !== 'complete') {
                const purchaseButton = document.getElementById('purchaseButton');
                if (purchaseButton) {
                    purchaseButton.addEventListener('click', async () => {
                        // æ±ºæ¸ˆé¸æŠç”»é¢ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
                        const diagnosisId = urlParams.get('id');
                        const userId = urlParams.get('userId');
                        window.location.href = `/payment-select.html?id=${diagnosisId}&userId=${userId || ''}`;
                    });
                }

            }
        }

        // è³¼å…¥å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹é–¢æ•°
        // ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ä¿å­˜æ©Ÿèƒ½
        function saveToBookmark() {
            const pageTitle = 'ãŠã¤ãã•ã¾è¨ºæ–­ - ã‚ãªãŸã®é‹å‘½ã®3ãƒ¶æœˆ';
            const pageUrl = window.location.href;

            // ãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒã‚¤ã‚¹ã‹ãƒã‚§ãƒƒã‚¯
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

            if (navigator.share && isMobile) {
                // Web Share APIãŒä½¿ãˆã‚‹å ´åˆï¼ˆãƒ¢ãƒã‚¤ãƒ«ï¼‰
                navigator.share({
                    title: pageTitle,
                    text: 'ãŠã¤ãã•ã¾ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å®šæœŸçš„ã«ç¢ºèªã—ã‚ˆã†',
                    url: pageUrl
                }).then(() => {
                    alert('ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ ã—ã¦ãã ã•ã„ï¼');
                }).catch((error) => {
                    console.log('å…±æœ‰ã‚¨ãƒ©ãƒ¼:', error);
                });
            } else {
                // ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã®å ´åˆ
                alert('ã“ã®ãƒšãƒ¼ã‚¸ã‚’ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ ã—ã¦ãã ã•ã„ã€‚\n\nWindows: Ctrl + D\nMac: Command + D\n\nã¾ãŸã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ ã€ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
            }

            // 2é€±é–“å¾Œã®æ—¥ä»˜ã‚’è¨ˆç®—ã—ã¦è¡¨ç¤º
            const twoWeeksLater = new Date();
            twoWeeksLater.setDate(twoWeeksLater.getDate() + 14);
            const dateStr = `${twoWeeksLater.getMonth() + 1}æœˆ${twoWeeksLater.getDate()}æ—¥`;

            const nextVisitElement = document.getElementById('nextVisitDate');
            if (nextVisitElement) {
                nextVisitElement.textContent = `${dateStr}ï¼ˆ2é€±é–“å¾Œï¼‰`;
            }
        }

        // æœˆç›¸ã‚«ãƒ¼ãƒ‰ã‚’å‹•çš„ã«æ›´æ–°
        async function updateMoonPhaseCard(patternId, moonPhaseIndex, moonPhase) {
            const moonPhaseCard = document.querySelector('.moon-phase-card.new-moon');
            if (!moonPhaseCard) return;

            try {
                // æœˆç›¸ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
                const response = await fetch('/data/moon-phase-descriptions.json?v=' + Date.now());
                const moonPhaseData = await response.json();
                const desc = moonPhaseData[moonPhase];

                if (desc) {
                    // ã‚«ãƒ¼ãƒ‰å…¨ä½“ã®HTMLã‚’æ›´æ–°
                    moonPhaseCard.innerHTML = `
                        <div class="moon-phase-label">æœˆç›¸</div>
                        <div class="moon-phase-header">
                            <img src="/images/moon/omote-${moonPhaseIndex}.png" alt="${moonPhase}" class="moon-phase-visual moon-phase-image">
                            <div class="moon-phase-info">
                                <h2>${moonPhase}</h2>
                                <p class="moon-phase-subtitle">${desc.title || ''}</p>
                            </div>
                        </div>
                        <div class="moon-phase-description" id="moon-phase-description">
                            ${desc.description || ''}
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Failed to update moon phase card:', error);
            }
        }

        // è£æœˆç›¸ã‚«ãƒ¼ãƒ‰ã‚’å‹•çš„ã«æ›´æ–°
        async function updateHiddenPhaseCard(patternId, hiddenPhaseIndex, hiddenMoonPhase, userName = null) {
            const hiddenPhaseCard = document.getElementById('hidden-phase-card');
            if (!hiddenPhaseCard) return;

            try {
                // è£æœˆç›¸ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
                const response = await fetch('/data/hidden-phase-descriptions.json?v=' + Date.now());
                const hiddenPhaseData = await response.json();
                const desc = hiddenPhaseData[hiddenMoonPhase];

                if (desc) {
                    // ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å–å¾—ï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰ã€ã¾ãŸã¯localStorageã‹ã‚‰ï¼‰
                    const displayName = userName || localStorage.getItem('userName') || 'ã€‡ã€‡';

                    // ãƒ¦ãƒ¼ã‚¶ãƒ¼åç½®æ›ã‚’é©ç”¨ï¼ˆHTMLã‚¿ã‚°ã¯ãã®ã¾ã¾ä¿æŒï¼‰
                    const processText = (text) => {
                        if (!text) return '';
                        return text.replace(/ã€‡ã€‡/g, displayName);
                    };

                    const processedMainText1 = processText(desc.mainText1);
                    const processedMainText2 = processText(desc.mainText2);
                    const processedDescription = processText(desc.description);

                    // HTMLã‚’ç”Ÿæˆ
                    let html = `
                        <div class="moon-phase-label">è£æœˆç›¸</div>
                        <div class="moon-phase-header">
                            <img src="/images/moon/ura-${hiddenPhaseIndex}.png" alt="${hiddenMoonPhase}" class="moon-phase-visual moon-phase-image">
                            <div class="moon-phase-info">
                                <h2>${hiddenMoonPhase}</h2>
                                ${desc.title ? `<p class="moon-phase-subtitle">${desc.title}</p>` : ''}
                            </div>
                        </div>
                        <div class="content-locked-mini">
                            <div class="text-blur">
                                <div class="moon-phase-description" id="hidden-phase-description">
                                    ${processedMainText1 ? `<p>${processedMainText1}</p>` : ''}
                                    ${desc.bulletPoints ? `
                                        <div class="hidden-phase-moment">
                                            <p class="moment-title"><strong>ã“ã‚“ãªç¬é–“ã€ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ</strong></p>
                                            <ul>
                                                ${desc.bulletPoints.map(point => `<li>${processText(point)}</li>`).join('')}
                                            </ul>
                                        </div>
                                    ` : ''}
                                    ${processedMainText2 ? `<p>${processedMainText2}</p>` : ''}
                                    ${!processedMainText1 && processedDescription ? `<p>${processedDescription}</p>` : ''}
                                </div>
                            </div>
                            <div class="lock-overlay-mini">
                                <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                            </div>
                        </div>
                    `;

                    hiddenPhaseCard.innerHTML = html;
                } else {
                    // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å†…å®¹ã‚’è¡¨ç¤º
                    hiddenPhaseCard.innerHTML = `
                        <div class="moon-phase-header">
                            <img src="/images/moon/ura-${hiddenPhaseIndex}.png" alt="${hiddenMoonPhase}" class="moon-phase-visual moon-phase-image">
                            <div class="moon-phase-info">
                                <h2>${hiddenMoonPhase}</h2>
                                <p class="moon-phase-subtitle">å†…ãªã‚‹ç¹Šç´°ã•ã¨æ…é‡ã•ã‚’ç§˜ã‚ãŸç­–å£«</p>
                            </div>
                        </div>
                        <div class="content-locked-mini">
                            <div class="text-blur">
                                <div class="moon-phase-description" id="hidden-phase-description">
                                    è¡¨å‘ãã¯å‹¢ã„ã‚ˆãçªãé€²ã‚€ã‚ãªãŸã§ã™ãŒã€å®Ÿã¯å†…é¢ã§ã¯ç´°ã‚„ã‹ãªé…æ…®ãŒã§ãã‚‹ç¹Šç´°ãªäººã€‚
                                </div>
                            </div>
                            <div class="lock-overlay-mini">
                                <button class="purchase-button-mini" onclick="scrollToPayment()">ğŸ”’ è³¼å…¥ã™ã‚‹</button>
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('è£æœˆç›¸ã‚«ãƒ¼ãƒ‰æ›´æ–°ã‚¨ãƒ©ãƒ¼:', error);
            }
        }

        // 3ã¤ã®åŠ›ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        async function updateThreePowers(birthdate, moonPhase, userName = null) {
            const container = document.getElementById('threePowersContainer');
            if (!container) {
                console.log('3ã¤ã®åŠ›ã®ã‚³ãƒ³ãƒ†ãƒŠãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                return;
            }

            // ThreePowersCalculatorãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
            if (!window.ThreePowersCalculator) {
                console.error('ThreePowersCalculator ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“');
                return;
            }

            try {
                // 3ã¤ã®åŠ›ã‚’è¨ˆç®—
                const powers = await window.ThreePowersCalculator.calculate(birthdate, moonPhase);
                if (!powers) {
                    console.error('3ã¤ã®åŠ›ã®è¨ˆç®—ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    return;
                }

                const displayName = userName || localStorage.getItem('userName') || 'ã€‡ã€‡';

                // æ—¢å­˜ã®è¦ç´ ã‚’ã‚¯ãƒªã‚¢
                container.innerHTML = '';

                // è¡Œå‹•ã®åŠ›
                if (powers.action) {
                    const actionItem = document.createElement('div');
                    actionItem.className = 'energy-item';

                    const actionTitle = document.createElement('div');
                    actionTitle.className = 'energy-title';
                    actionTitle.textContent = powers.action.title;

                    const actionDesc = document.createElement('div');
                    actionDesc.className = 'energy-description';
                    // ãƒ¦ãƒ¼ã‚¶ãƒ¼åç½®æ›ã¨æ”¹è¡Œå‡¦ç†
                    let processedDesc = powers.action.desc.replace(/ã€‡ã€‡/g, displayName);
                    processedDesc = processedDesc.replace(/\n/g, '<br>');
                    actionDesc.innerHTML = processedDesc;

                    actionItem.appendChild(actionTitle);
                    actionItem.appendChild(actionDesc);
                    container.appendChild(actionItem);
                }

                // æ„Ÿæƒ…ã®åŠ›
                if (powers.emotion) {
                    const emotionItem = document.createElement('div');
                    emotionItem.className = 'energy-item';

                    const emotionTitle = document.createElement('div');
                    emotionTitle.className = 'energy-title';
                    emotionTitle.textContent = powers.emotion.title;

                    const emotionDesc = document.createElement('div');
                    emotionDesc.className = 'energy-description';
                    // ãƒ¦ãƒ¼ã‚¶ãƒ¼åç½®æ›ã¨æ”¹è¡Œå‡¦ç†
                    let processedDesc = powers.emotion.desc.replace(/ã€‡ã€‡/g, displayName);
                    processedDesc = processedDesc.replace(/\n/g, '<br>');
                    emotionDesc.innerHTML = processedDesc;

                    emotionItem.appendChild(emotionTitle);
                    emotionItem.appendChild(emotionDesc);
                    container.appendChild(emotionItem);
                }

                // æ€è€ƒã®åŠ›
                if (powers.thinking) {
                    const thinkingItem = document.createElement('div');
                    thinkingItem.className = 'energy-item';

                    const thinkingTitle = document.createElement('div');
                    thinkingTitle.className = 'energy-title';
                    thinkingTitle.textContent = powers.thinking.title;

                    const thinkingDesc = document.createElement('div');
                    thinkingDesc.className = 'energy-description';
                    // ãƒ¦ãƒ¼ã‚¶ãƒ¼åç½®æ›ã¨æ”¹è¡Œå‡¦ç†
                    let processedDesc = powers.thinking.desc.replace(/ã€‡ã€‡/g, displayName);
                    processedDesc = processedDesc.replace(/\n/g, '<br>');
                    thinkingDesc.innerHTML = processedDesc;

                    thinkingItem.appendChild(thinkingTitle);
                    thinkingItem.appendChild(thinkingDesc);
                    container.appendChild(thinkingItem);
                }

                console.log('3ã¤ã®åŠ›ã‚’æ›´æ–°ã—ã¾ã—ãŸ');

            } catch (error) {
                console.error('3ã¤ã®åŠ›ã®æ›´æ–°ã‚¨ãƒ©ãƒ¼:', error);
            }
        }

        // ãƒ¦ãƒ¼ã‚¶ãƒ¼åè¡¨ç¤ºã®æ›´æ–°
        function updateUserNameDisplays() {
            const userName = window.currentUserName || 'ã‚ãªãŸ';
            const displayName = userName === 'ã‚ãªãŸ' ? 'ã‚ãªãŸ' : userName + 'ã•ã‚“';

            document.querySelectorAll('.user-name-display').forEach(elem => {
                elem.textContent = userName;
            });
        }

        async function scrollToPayment() {
            const urlParams = new URLSearchParams(window.location.search);
            const diagnosisId = urlParams.get('id');
            const userId = window.currentUserId || 'anonymous';

            // PayPayæ±ºæ¸ˆç”»é¢ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
            window.location.href = `/payment-select.html?id=${diagnosisId}&userId=${userId}`;
        }

        // DOMãƒ­ãƒ¼ãƒ‰å¾Œã«åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('DOM Content Loaded - Initializing unified page...');

            // ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿
            await loadDataFiles();

            // ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ€ãƒ¼ã®èª­ã¿è¾¼ã¿ã‚’å¾…ã¤
            if (!window.OtsukisamaDataLoader || !window.OtsukisamaDataLoader.isLoaded()) {
                console.log('ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ€ãƒ¼ã®èª­ã¿è¾¼ã¿ã‚’å¾…æ©Ÿä¸­...');
                await new Promise(resolve => {
                    window.addEventListener('otsukisama-data-loaded', resolve, { once: true });
                });
                console.log('ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ€ãƒ¼èª­ã¿è¾¼ã¿å®Œäº†');
            }

            // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰è¨ºæ–­IDã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å–å¾—
            const urlParams = new URLSearchParams(window.location.search);
            const diagnosisId = urlParams.get('id');
            const userId = urlParams.get('userId');

            // è¨ºæ–­ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦è¡¨ç¤º
            if (diagnosisId) {
                try {
                    const response = await fetch(`/api/profile-form-v2?action=get-diagnosis&id=${diagnosisId}`);
                    const data = await response.json();

                    if (data.success && data.diagnosis) {
                        console.log('è¨ºæ–­ãƒ‡ãƒ¼ã‚¿å–å¾—æˆåŠŸ:', data.diagnosis);

                        // è¨ºæ–­æ—¥ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«è¨­å®šï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—ã—ãŸcreated_atã‚’ä½¿ç”¨ï¼‰
                        if (data.diagnosis.created_at) {
                            // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«è¨­å®š
                            window.globalDiagnosisDate = data.diagnosis.created_at;
                            console.log('è¨ºæ–­æ—¥ã‚’è¨­å®š:', data.diagnosis.created_at);

                            // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã‚‚è¿½åŠ ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼‰
                            const urlParams = new URLSearchParams(window.location.search);
                            if (!urlParams.has('diagnosisDate')) {
                                urlParams.set('diagnosisDate', data.diagnosis.created_at);
                                const newUrl = window.location.pathname + '?' + urlParams.toString();
                                window.history.replaceState({}, '', newUrl);
                            }
                        }

                        // ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«è¨­å®š
                        window.currentUserName = data.diagnosis.user_name || 'ã‚ãªãŸ';

                        // ãƒ¦ãƒ¼ã‚¶ãƒ¼åè¡¨ç¤ºã‚’æ›´æ–°
                        updateUserNameDisplays();

                        // è¨ºæ–­ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰èª•ç”Ÿæ—¥ã¨3ã¤ã®åŠ›ã®ã‚­ãƒ¼ã‚’ä¿å­˜
                        if (data.diagnosis.birth_date) {
                            window.currentUserBirthdate = data.diagnosis.birth_date;
                        }
                        if (data.diagnosis.three_powers_keys) {
                            window.currentThreePowersKeys = data.diagnosis.three_powers_keys;
                        }

                        // æœˆç›¸ãƒ‘ã‚¿ãƒ¼ãƒ³IDã‚’è¨­å®š
                        if (typeof currentPatternId !== 'undefined') {
                            currentPatternId = data.diagnosis.moon_pattern_id || data.diagnosis.pattern_id;

                            // æœˆç›¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ›´æ–°
                            if (typeof updateMoonPhaseContent === 'function') {
                                updateMoonPhaseContent(currentPatternId);
                            }

                            // ãƒ‘ã‚¿ãƒ¼ãƒ³IDã‹ã‚‰æœˆç›¸ã‚’è¨ˆç®—
                            const moonPhaseIndex = Math.floor(currentPatternId / 8);
                            const hiddenPhaseIndex = currentPatternId % 8;
                            const moonPhaseNames = ['æ–°æœˆ', 'ä¸‰æ—¥æœˆ', 'ä¸Šå¼¦ã®æœˆ', 'åä¸‰å¤œ', 'æº€æœˆ', 'åå…­å¤œ', 'ä¸‹å¼¦ã®æœˆ', 'æš'];
                            const moonPhase = moonPhaseNames[moonPhaseIndex];
                            const hiddenMoonPhase = moonPhaseNames[hiddenPhaseIndex];

                            // æœˆç›¸ã‚«ãƒ¼ãƒ‰ã‚’å‹•çš„ã«ç”Ÿæˆ
                            updateMoonPhaseCard(currentPatternId, moonPhaseIndex, moonPhase);

                            // è£æœˆç›¸ã‚«ãƒ¼ãƒ‰ã‚’å‹•çš„ã«ç”Ÿæˆï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’æ¸¡ã™ï¼‰
                            const userName = data.diagnosis.user_name || localStorage.getItem('userName');
                            updateHiddenPhaseCard(currentPatternId, hiddenPhaseIndex, hiddenMoonPhase, userName);

                            // 3ã¤ã®åŠ›ã®æ›´æ–°ã¯updateMoonPhaseContentå†…ã§è¡Œã‚ã‚Œã‚‹ãŸã‚ã“ã“ã§ã¯ä¸è¦
                            // updateMoonPhaseContentãŒå‘¼ã°ã‚Œãªã„å ´åˆã®ã¿æ›´æ–°
                            if (!window.currentThreePowersKeys) {
                                const birthDate = data.diagnosis.birth_date || localStorage.getItem('birthDate');
                                if (birthDate) {
                                    updateThreePowers(birthDate, moonPhase, userName);
                                }
                            }

                            // 6ã¤ã®è¦ç´ ã‚’æ›´æ–°ï¼ˆ4ã¤ã®è»¸ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ï¼‰
                            if (typeof updateSixElements === 'function') {
                                const profile = {
                                    emotionalExpression: data.diagnosis.emotional_expression,
                                    distanceStyle: data.diagnosis.distance_style,
                                    loveValues: data.diagnosis.love_values,
                                    loveEnergy: data.diagnosis.love_energy,
                                    userName: data.diagnosis.user_name
                                };
                                updateSixElements(currentPatternId, moonPhase, hiddenMoonPhase, profile);
                            }

                            // ã‚°ãƒ©ãƒ•ãƒ‡ãƒ¼ã‚¿ã‚‚æ›´æ–°
                            if (typeof updateFortuneGraph === 'function') {
                                updateFortuneGraph(currentPatternId);
                            }

                            // 4ã¤ã®è»¸ã®çµæœã‚’æ›´æ–°
                            if (typeof updatePersonalityDisplay === 'function') {
                                const profile = {
                                    emotionalExpression: data.diagnosis.emotional_expression,
                                    distanceStyle: data.diagnosis.distance_style,
                                    loveValues: data.diagnosis.love_values,
                                    loveEnergy: data.diagnosis.love_energy,
                                    userName: data.diagnosis.user_name
                                };
                                updatePersonalityDisplay(profile);
                            }

                            // çµ„ã¿åˆã‚ã›è¨ºæ–­æ–‡ã‚’ç”Ÿæˆã—ã¦è¡¨ç¤º
                            if (typeof displayCombinedPersonality === 'function') {
                                const profile = {
                                    emotionalExpression: data.diagnosis.emotional_expression,
                                    distanceStyle: data.diagnosis.distance_style,
                                    loveValues: data.diagnosis.love_values,
                                    loveEnergy: data.diagnosis.love_energy,
                                    userName: data.diagnosis.user_name
                                };
                                displayCombinedPersonality(profile);
                            }
                        }
                    }
                } catch (error) {
                    console.error('è¨ºæ–­ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                }
            }

            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚èª­ã¿è¾¼ã‚€ï¼ˆäº’æ›æ€§ã®ãŸã‚ï¼‰
            // userIdãŒã‚ã‚‹å ´åˆã€ã¾ãŸã¯patternãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆ
            const patternParam = urlParams.get('pattern');
            if ((userId || patternParam !== null) && typeof loadUserProfile === 'function') {
                await loadUserProfile();
            }

            // æ˜Ÿç©ºèƒŒæ™¯ã‚’ç”Ÿæˆ
            const starsContainer = document.getElementById('starsContainer');
            if (starsContainer && !starsContainer.children.length) {
                for (let i = 0; i < 100; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    star.style.left = Math.random() * 100 + '%';
                    star.style.top = Math.random() * 100 + '%';
                    star.style.animationDelay = Math.random() * 3 + 's';
                    star.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    starsContainer.appendChild(star);
                }
            }

            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é€²æ—ãƒãƒ¼ã®è¨­å®š
            window.addEventListener('scroll', updateScrollProgress);

            // çµ±åˆåˆæœŸåŒ–ã‚’å®Ÿè¡Œ
            await initUnified();
        });
    </script>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <footer style="
        background: linear-gradient(135deg, #0a001a 0%, #1a0033 100%);
        padding: 60px 20px 30px;
        margin-top: 100px;
        border-top: 1px solid rgba(255, 215, 0, 0.2);
    ">
        <div style="
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        ">
            <!-- å…è²¬äº‹é … -->
            <div style="
                margin-bottom: 40px;
                padding: 30px;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 15px;
                border: 1px solid rgba(255, 215, 0, 0.1);
            ">
                <h3 style="
                    color: #ffd700;
                    font-size: 18px;
                    margin-bottom: 15px;
                    font-weight: bold;
                ">ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦ã®æ³¨æ„äº‹é …</h3>
                <p style="
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 12px;
                    line-height: 1.8;
                    text-align: left;
                ">
                    â€» æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã¯å ã„ãƒ»ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ³ãƒ¡ãƒ³ãƒˆã‚’ç›®çš„ã¨ã—ãŸã‚‚ã®ã§ã‚ã‚Šã€ç§‘å­¦çš„æ ¹æ‹ ã«åŸºã¥ãåŒ»å­¦çš„ãƒ»å¿ƒç†å­¦çš„ãªè¨ºæ–­ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>
                    â€» è¨ºæ–­çµæœã¯å‚è€ƒç¨‹åº¦ã«ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚<br>
                    â€» ãƒ‡ã‚¸ã‚¿ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ€§è³ªä¸Šã€è³¼å…¥å¾Œã®è¿”å“ãƒ»äº¤æ›ã¯ãŠå—ã‘ã—ã¦ãŠã‚Šã¾ã›ã‚“ã€‚<br>
                    â€» è¨ºæ–­çµæœã«åŸºã¥ãè¡Œå‹•ã«ã‚ˆã‚Šç”Ÿã˜ãŸæå®³ã«ã¤ã„ã¦ã€å½“ç¤¾ã¯ä¸€åˆ‡è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚
                </p>
            </div>

            <!-- ãƒªãƒ³ã‚¯é›† -->
            <div style="
                margin-bottom: 30px;
                display: flex;
                justify-content: center;
                gap: 30px;
                flex-wrap: wrap;
            ">
                <a href="/tokusho.html" style="
                    color: #ffd700;
                    text-decoration: none;
                    font-size: 14px;
                    transition: opacity 0.3s;
                " onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">
                    ç‰¹å®šå•†å–å¼•æ³•ã«åŸºã¥ãè¡¨è¨˜
                </a>
                <a href="/privacy-policy.html" style="
                    color: #ffd700;
                    text-decoration: none;
                    font-size: 14px;
                    transition: opacity 0.3s;
                " onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">
                    ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼
                </a>
                <a href="/contact.html" style="
                    color: #ffd700;
                    text-decoration: none;
                    font-size: 14px;
                    transition: opacity 0.3s;
                " onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">
                    ãŠå•ã„åˆã‚ã›
                </a>
            </div>

            <!-- ã‚³ãƒ”ãƒ¼ãƒ©ã‚¤ãƒˆ -->
            <div style="
                padding-top: 20px;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
                color: rgba(255, 255, 255, 0.5);
                font-size: 12px;
            ">
                <p>Â© 2025 ãŠã¤ãã•ã¾è¨ºæ–­ | MiNTsæ ªå¼ä¼šç¤¾</p>
                <p style="margin-top: 5px;">All rights reserved.</p>
            </div>
        </div>
    </footer>
    <!-- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨JavaScript -->
    <script>
    (function() {
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¯¾è±¡ã®è¦ç´ ã‚’å–å¾—
        const animateElements = [
            '.moon-phase-card',
            '#hidden-phase-card',
            '.fortune-section',
            '.monthly-fortune',
            '.tsukuyomi-section',
            '.three-powers',
            '.six-elements',
            '#important-message-section',
            '#moonCalendarSection',
            '#fortune-graph',
            '.banner-image',
            '.feelings-section ul li',
            '.evidence-section ul li',
            '.important-actions-list li'
        ];

        // Intersection Observer ã®è¨­å®š
        const observerOptions = {
            root: null,
            rootMargin: '100px 0px', // 100pxæ‰‹å‰ã‹ã‚‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
            threshold: 0.01 // è¦ç´ ã®1%ãŒè¦‹ãˆãŸã‚‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
        };

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ  - å…¨ã¦ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã«çµ±ä¸€
        const animationClasses = {
            '.moon-phase-card': 'animate-fade-in',
            '#hidden-phase-card': 'animate-fade-in',
            '.fortune-section': 'animate-fade-in',
            '.fortune-section.love': 'animate-fade-in', // æ‹æ„›é‹å°‚ç”¨
            '.monthly-fortune': 'animate-fade-in',
            '.tsukuyomi-section': 'animate-fade-in',
            '.three-powers': 'animate-fade-in',
            '.six-elements': 'animate-fade-in',
            '#important-message-section': 'animate-fade-in',
            '#moonCalendarSection': 'animate-fade-in',
            '#fortune-graph': 'animate-fade-in',
            '.banner-image': 'animate-fade-in',
            '.feelings-section ul li': 'animate-fade-in',
            '.evidence-section ul li': 'animate-fade-in',
            '.important-actions-list li': 'animate-fade-in'
        };

        // Observer ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
        const observerCallback = (entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const element = entry.target;
                    const selector = Object.keys(animationClasses).find(key =>
                        element.matches(key)
                    );

                    if (selector) {
                        element.classList.add(animationClasses[selector]);
                        observer.unobserve(element); // ä¸€åº¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã—ãŸã‚‰ç›£è¦–ã‚’è§£é™¤
                    }
                }
            });
        };

        // Observer ã‚’ä½œæˆ
        const observer = new IntersectionObserver(observerCallback, observerOptions);

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å¾Œã«è¦ç´ ã‚’ç›£è¦–é–‹å§‹
        document.addEventListener('DOMContentLoaded', () => {
            animateElements.forEach(selector => {
                const elements = document.querySelectorAll(selector);
                elements.forEach(element => {
                    // åˆæœŸçŠ¶æ…‹ã§éè¡¨ç¤º
                    element.style.opacity = '0';
                    observer.observe(element);
                });
            });
        });
    })();
    </script>
</body>
</html>
