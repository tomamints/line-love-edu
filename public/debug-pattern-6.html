<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Debug Pattern 6</title>
</head>
<body>
    <h1>Pattern 6 Debug</h1>
    <button onclick="testLoadPattern()">Test Load Pattern 6</button>
    <div id="output"></div>
    
    <script src="js/otsukisama-data-loader.js"></script>
    <script>
        async function testLoadPattern() {
            const output = document.getElementById('output');
            output.innerHTML = '<p>Loading...</p>';
            
            try {
                // Initialize data loader
                await window.OtsukisamaDataLoader.loadAllData();
                console.log('Data loader initialized');
                
                // Try to load pattern 6
                const pattern6 = await window.OtsukisamaDataLoader.getPatternFortune(6);
                console.log('Pattern 6 loaded:', pattern6);
                
                if (pattern6) {
                    output.innerHTML = `
                        <h2>Success! Pattern 6 Loaded</h2>
                        <h3>Title: ${pattern6.overall?.title || 'No title'}</h3>
                        <h3>Has new format fields:</h3>
                        <ul>
                            <li>emotionalValidation: ${pattern6.overall?.emotionalValidation ? '✓' : '✗'}</li>
                            <li>reassurance: ${pattern6.overall?.reassurance ? '✓' : '✗'}</li>
                            <li>reason: ${pattern6.overall?.reason ? '✓' : '✗'}</li>
                            <li>pastValidation: ${pattern6.overall?.pastValidation ? '✓' : '✗'}</li>
                            <li>actionSteps: ${pattern6.overall?.actionSteps ? '✓ (' + pattern6.overall.actionSteps.length + ' items)' : '✗'}</li>
                        </ul>
                        <h3>First 200 chars of emotionalValidation:</h3>
                        <p>${(pattern6.overall?.emotionalValidation || 'Not found').substring(0, 200)}...</p>
                    `;
                } else {
                    output.innerHTML = '<p style="color: red;">Pattern 6 not found</p>';
                }
            } catch (error) {
                output.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
                console.error('Error:', error);
            }
        }
    </script>
</body>
</html>