<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Fortune Debug Test</title>
</head>
<body>
    <h1>Fortune Debug Test</h1>
    <div id="debug-output"></div>
    
    <script src="js/otsukisama-data-loader.js?v=20250829001"></script>
    <script>
        async function testFortuneData() {
            const output = document.getElementById('debug-output');
            
            // Wait for data to load
            if (!window.OtsukisamaDataLoader || !window.OtsukisamaDataLoader.isLoaded()) {
                await new Promise(resolve => {
                    window.addEventListener('otsukisama-data-loaded', resolve, { once: true });
                });
            }
            
            // Test pattern 0
            const pattern = window.OtsukisamaDataLoader.getPatternFortune(0);
            
            output.innerHTML = `
                <h2>Pattern 0 Data:</h2>
                <pre>${JSON.stringify(pattern, null, 2)}</pre>
                
                <h3>Specific checks:</h3>
                <ul>
                    <li>Has pattern: ${!!pattern}</li>
                    <li>Has overall: ${!!pattern?.overall}</li>
                    <li>Has overall.mainText: ${!!pattern?.overall?.mainText}</li>
                    <li>Overall.mainText (first 100 chars): ${pattern?.overall?.mainText?.substring(0, 100)}</li>
                    <li>Has love: ${!!pattern?.love}</li>
                    <li>Has love.mainText: ${!!pattern?.love?.mainText}</li>
                </ul>
            `;
        }
        
        // Run test when page loads
        window.addEventListener('DOMContentLoaded', testFortuneData);
    </script>
</body>
</html>