# おつきさま診断 - 動作確認ガイド

## 🚀 クイックスタート確認手順

### 1. ローカル環境での確認

```bash
# 1. サーバー起動
npm run dev

# 2. ブラウザで以下のURLにアクセス
http://localhost:3001/lp-otsukisama-input.html
```

### 2. 動作確認チェックリスト

## ✅ ステップ1: 入力ページ確認

**URL**: `http://localhost:3001/lp-otsukisama-input.html`

- [ ] ページが正常に表示される
- [ ] 星空背景がアニメーションしている
- [ ] 名前入力フィールドが表示される
- [ ] 生年月日のドロップダウンが3つ表示される
- [ ] 「診断する」ボタンが表示される

**テスト入力**:
```
名前: テスト太郎
生年月日: 1990年5月15日
```

- [ ] 「診断する」ボタンをクリック
- [ ] プレビューページにリダイレクトされる

## ✅ ステップ2: プレビューページ確認

**URL**: `http://localhost:3001/lp-otsukisama-preview.html?id=temp_XXXXX`

### 無料コンテンツ（はっきり見える）
- [ ] 月詠の挨拶が表示される（名前入り）
- [ ] 月相診断結果が表示される
- [ ] 4つの性格軸の円形配置が表示される

### 有料コンテンツ（ぼかし表示）
- [ ] 性格タイプの詳細がぼかされている
- [ ] 全体運セクションに🔒マークが表示される
- [ ] 恋愛運セクションに🔒マークが表示される
- [ ] 仕事運セクションに🔒マークが表示される
- [ ] 金運セクションに🔒マークが表示される

### CTA（購入促進）
- [ ] 「完全版で全ての運勢を解放しましょう」が表示される
- [ ] 価格（¥2,980）が表示される
- [ ] 「今すぐ完全版を購入する」ボタンが表示される

## ✅ ステップ3: 完全版ページ確認（手動）

**URL**: `http://localhost:3001/lp-otsukisama-result.html?id=temp_XXXXX`

※ 決済機能未実装のため、URLを直接入力してアクセス

- [ ] 「✨ 完全版 ✨」バッジが表示される
- [ ] お礼メッセージが表示される
- [ ] 全てのコンテンツがぼかしなしで表示される
- [ ] 共有ボタンが4つ表示される（LINE、X、Facebook、コピー）
- [ ] ダウンロードボタンが表示される

## 🔧 デバッグ方法

### ブラウザのコンソールを確認

1. **Chrome DevTools を開く**: F12 または 右クリック → 検証
2. **Consoleタブ** を選択
3. エラーメッセージが表示されていないか確認

### よくあるエラーと対処法

#### エラー1: プレビューページで「診断結果の読み込みに失敗しました」

**原因**: ローカルストレージにデータがない

**解決方法**:
```javascript
// コンソールで実行
localStorage.setItem('otsukisama_diagnosis', JSON.stringify({
  name: 'テスト',
  birthDate: '1990-05-15',
  patternId: 10,
  timestamp: new Date().toISOString()
}));

// ページをリロード
location.reload();
```

#### エラー2: パターンデータが読み込めない

**原因**: JSONファイルのパスが正しくない

**確認事項**:
- `/public/data/otsukisama-patterns-v3.json` が存在するか
- ネットワークタブで404エラーが出ていないか

#### エラー3: 画像が表示されない

**原因**: 画像パスが正しくない

**確認事項**:
- `/public/images/` フォルダに画像があるか
- ネットワークタブで画像の読み込みエラーを確認

## 📱 LINE Bot経由での確認

### 設定確認
1. **環境変数の確認**:
```bash
echo $BASE_URL
# https://line-love-edu.vercel.app が表示されるべき
```

2. **LINE Botの動作確認**:
- LINEアプリを開く
- ボットに「本格」と送信
- Flexメッセージが返信される
- 「今すぐ診断を始める」ボタンをクリック
- 入力ページが開く

## 📊 データフローの確認

### 1. 入力 → プレビュー

**LocalStorageの確認**:
```javascript
// Consoleで実行
console.log(localStorage.getItem('otsukisama_diagnosis'));
```

期待される出力:
```json
{
  "name": "テスト太郎",
  "birthDate": "1990-05-15T00:00:00.000Z",
  "patternId": 10,
  "timestamp": "2024-XX-XX..."
}
```

### 2. パターンデータの確認

**Consoleで実行**:
```javascript
// プレビューページで実行
const renderer = new DiagnosisRenderer('preview');
await renderer.loadDiagnosisData();
console.log(renderer.diagnosisData);
```

## 🎨 表示確認ポイント

### レスポンシブデザイン
- [ ] PC（1920x1080）で正常表示
- [ ] タブレット（768x1024）で正常表示
- [ ] スマートフォン（375x667）で正常表示

### ぼかし効果
- [ ] 有料コンテンツが `filter: blur(8px)` で表示
- [ ] 🔒アイコンが中央に表示
- [ ] 「完全版を見る」ボタンが機能する

## 📝 最終チェックリスト

- [ ] 全3ページが表示される
- [ ] データが正しく引き継がれる
- [ ] 無料/有料の区別が正しい
- [ ] エラーメッセージが適切
- [ ] モバイル表示が崩れていない

## 🆘 トラブル時の連絡先

問題が解決しない場合は、以下の情報を添えて報告してください：

1. エラーメッセージのスクリーンショット
2. Consoleのログ
3. NetworkタブのエラーがあるURL
4. 使用ブラウザとバージョン

---

これで全ての動作確認ができます。順番に確認してください。