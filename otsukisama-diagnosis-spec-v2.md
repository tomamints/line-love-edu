# おつきさま診断 - 占い結果構成仕様書 v2.0

## 📋 ドキュメント概要

### 目的
本ドキュメントは「おつきさま診断」の占い結果画面の全体構成と、必要なデータ構造を定義するものです。

### バージョン情報
- バージョン: 2.0
- 更新日: 2024年12月
- 主な変更: 恋愛運、人間関係運、金運セクションに新規コンテンツ追加

---

## 1. 診断フロー

### 1.1 診断開始
```yaml
画面要素:
  タイトル: おつきさま診断
  サブタイトル: 月が導くあなたの運命
  説明: 生まれた日の月相から読み解く、あなただけの特別な運勢メッセージ
  
入力項目:
  名前: 
    - 必須: true
    - プレースホルダー: "例：月読みゆき"
  生年月日:
    - 年: 1920-2025
    - 月: 1-12
    - 日: 1-31
    
アクション:
  ボタン: 診断する
  補足: 無料で全ての結果が見れます
```

### 1.2 診断処理
```yaml
処理内容:
  1. 生年月日から月相を算出
  2. 8×8=64パターンからユーザーのパターンIDを特定
  3. パターンIDに対応するデータを取得
  4. 結果画面を動的生成
```

---

## 2. 結果画面構成

### 2.1 第1章：あなたの本質を読み解く

#### 2.1.1 導入部
```yaml
セクション: 月詠の挨拶
内容:
  - パーソナライズされた挨拶文
  - ユーザー名を含む
  - 月詠キャラクターの紹介
```

#### 2.1.2 6つの要素
```yaml
表示形式: 六角形配置
要素:
  月相: 
    位置: 0度（上）
    内容: 表の顔・社会的性格
  裏月相: 
    位置: 180度（下）
    内容: 裏の顔・プライベートな性格
  感情表現:
    位置: 60度
    内容: 恋愛における感情表現タイプ
  距離感:
    位置: 120度
    内容: 恋愛における距離感タイプ
  価値観:
    位置: 240度
    内容: 恋愛における価値観タイプ
  エネルギー:
    位置: 300度
    内容: 恋愛におけるエネルギータイプ
```

#### 2.1.3 月相解説
```yaml
構成:
  見出し: 生まれた日の月相から読み解く、あなたの「本当の自分」
  月相名: [8種類から1つ]
  キャッチフレーズ: 月相の特徴を表す短文
  詳細解説: 300-500文字の性格解説
```

#### 2.1.4 裏月相解説
```yaml
構成:
  導入文: 裏月相の意味説明
  裏月相名: [8種類から1つ]
  キャッチフレーズ: 内面的特徴を表す短文
  詳細解説: 300-500文字の内面解説
```

#### 2.1.5 3つの月の力
```yaml
構成:
  導入文: 月の力についての説明
  第1の力:
    名称: パターンごとに異なる
    説明: 約100文字
  第2の力:
    名称: パターンごとに異なる
    説明: 約100文字
  第3の力:
    名称: パターンごとに異なる
    説明: 約100文字
```

#### 2.1.6 4つの恋愛タイプ
```yaml
条件分岐:
  LINE未診断:
    表示: LINE診断への誘導
    内容: 診断方法の説明
  診断済み:
    表示:
      - 感情表現タイプ（8種類）
      - 距離感タイプ（8種類）
      - 価値観タイプ（8種類）+ 詳細説明
      - エネルギータイプ（8種類）+ 詳細説明
```

### 2.2 第2章：直近3ヶ月の運勢

#### 2.2.1 運勢グラフ
```yaml
仕様:
  ライブラリ: Chart.js
  期間: 12週間
  データ:
    - 全体運
    - 恋愛運
    - 仕事運
    - 金運
  表示: 折れ線グラフ
```

#### 2.2.2 全体運
```yaml
構成:
  タイトル: パターンごとの組み合わせ名
  導入文: 約100文字
  全体の流れ: 約500文字
  月別展開:
    1ヶ月目:
      タイトル: 動的生成
      説明: 約100文字
    2ヶ月目:
      タイトル: 動的生成
      説明: 約100文字
    3ヶ月目:
      タイトル: 動的生成
      説明: 約100文字
  注意ポイント: 約100文字
  重要な転機: 3つの時期を提示
```

#### 2.2.3 恋愛運【拡張版】
```yaml
構成:
  導入文: 約100文字
  
  新セクション1:
    タイトル: あなたの心をときめかせる、運命的な出会いは訪れる？
    内容: 約200文字（パターンごと）
    
  新セクション2:
    タイトル: 今後3ヶ月、あなたに恋の矢を向けているお相手はこんな人
    内容: 約200文字（パターンごと）
    
  新セクション3:
    タイトル: 危険な恋の罠？この3ヶ月、あなたが出会うと危険な異性のタイプ
    内容: 約200文字（パターンごと）
```

#### 2.2.4 月齢カレンダー
```yaml
機能:
  表示: 当月のカレンダー
  マーカー:
    ラッキーデー: 緑色（3-5日/月）
    パワーデー: オレンジ色（3-5日/月）
    注意日: 赤色（3-5日/月）
```

#### 2.2.5 人間関係運【拡張版】
```yaml
構成:
  導入文: 約100文字
  
  新セクション1:
    タイトル: 今後3ヶ月であなたが築くことになる、新しい人間関係とは
    内容: 約200文字（パターンごと）
    
  新セクション2:
    タイトル: あなたの人間関係における課題と、それを乗り越えるヒント
    内容: 約200文字（パターンごと）
```

#### 2.2.6 仕事運
```yaml
構成:
  タイトル: 動的生成
  導入文: 約100文字
  詳細説明: 約300文字（パターンごと）
  キャリアの転機: 約100文字
  成功の秘訣: 約150文字
```

#### 2.2.7 金運【拡張版】
```yaml
構成:
  導入文: 約100文字
  詳細説明: 約300文字（パターンごと）
  
  ラッキーアクション:
    タイトル: あなたの金運を底上げする、とっておきのラッキーアクション
    内容: 約150文字
    
  新セクション:
    タイトル: お金の貸し借りは慎重に。人間関係にヒビを入れる金銭問題
    内容: 約200文字（パターンごと）
```

### 2.3 第3章：まとめとメッセージ

#### 2.3.1 月が教えてくれる5つの教え
```yaml
構成:
  導入文: パターンごとのメッセージ
  5つの教え:
    1. 新月の教え: 始める勇気
    2. 上弦の月の教え: 成長を楽しむ
    3. 満月の教え: 感謝を忘れずに
    4. 下弦の月の教え: 手放す勇気
    5. 闇月の教え: 休息も大切
  締めのメッセージ: 励ましの言葉
```

#### 2.3.2 LINE誘導
```yaml
目的: 継続的な関係構築
内容:
  - 毎日の月占い
  - 相性診断
  - 恋愛相談
CTA: LINE友だち追加ボタン
```

---

## 3. データ構造定義

### 3.1 パターンデータ（64種類）
```json
{
  "patternId": "0-63",
  "moonPhase": "表の月相名",
  "hiddenPhase": "裏の月相名",
  
  "fortune": {
    "overall": "全体運詳細（500文字）",
    "love": "恋愛運詳細（300文字）",
    "work": "仕事運詳細（300文字）",
    "relationship": "人間関係運詳細（300文字）",
    "money": "金運詳細（300文字）"
  },
  
  "newSections": {
    "love": {
      "destinyMeeting": "運命的な出会い（200文字）",
      "admirerType": "想いを寄せる相手（200文字）",
      "dangerousType": "危険な異性タイプ（200文字）"
    },
    "relationship": {
      "newConnections": "新しい人間関係（200文字）",
      "challengesAndSolutions": "課題と解決策（200文字）"
    },
    "money": {
      "moneyTrouble": "金銭トラブル回避（200文字）"
    }
  },
  
  "dynamicContent": {
    "overallTitle": "タイトル",
    "overallIntro": "導入文",
    "month1Title": "1ヶ月目タイトル",
    "month1Text": "1ヶ月目説明",
    "month2Title": "2ヶ月目タイトル",
    "month2Text": "2ヶ月目説明",
    "month3Title": "3ヶ月目タイトル",
    "month3Text": "3ヶ月目説明",
    "overallCaution": "注意ポイント",
    "criticalTiming1": "重要な転機1",
    "criticalTiming2": "重要な転機2",
    "criticalTiming3": "重要な転機3"
  },
  
  "threePowers": {
    "power1": {
      "name": "力の名前",
      "description": "説明（100文字）"
    },
    "power2": {
      "name": "力の名前",
      "description": "説明（100文字）"
    },
    "power3": {
      "name": "力の名前",
      "description": "説明（100文字）"
    }
  },
  
  "graphData": {
    "overall": [12週分の数値配列],
    "love": [12週分の数値配列],
    "work": [12週分の数値配列],
    "money": [12週分の数値配列]
  },
  
  "calendar": {
    "luckyDays": [日付配列],
    "powerDays": [日付配列],
    "cautionDays": [日付配列]
  }
}
```

### 3.2 月相マスターデータ
```yaml
月相一覧:
  0: 新月 - 始まりのエネルギー
  1: 三日月 - 成長のエネルギー
  2: 上弦の月 - 決断のエネルギー
  3: 十三夜月 - 調和のエネルギー
  4: 満月 - 完成のエネルギー
  5: 十六夜 - 洞察のエネルギー
  6: 下弦の月 - 解放のエネルギー
  7: 二十六夜月 - 内省のエネルギー
```

### 3.3 必要文字数サマリー
```yaml
1パターンあたり:
  基本運勢: 1,900文字
  新規追加分: 1,000文字
  動的コンテンツ: 1,200文字
  合計: 約4,100文字

64パターン合計:
  総文字数: 約262,400文字
```

---

## 4. 実装要件

### 4.1 技術スタック
```yaml
フロントエンド:
  - HTML5
  - CSS3（レスポンシブ対応）
  - JavaScript（ES6+）
  - Chart.js（グラフ描画）

データ:
  - JSON形式
  - ローカルストレージ活用

パフォーマンス:
  - 遅延読み込み
  - キャッシュ活用
```

### 4.2 デザイン要件
```yaml
カラースキーム:
  背景: ダークブルーグラデーション
  メインテキスト: ホワイト
  サブテキスト: ライトグレー
  アクセント: ゴールド/イエロー

レスポンシブ対応:
  - モバイル: 640px以下
  - タブレット: 641-1024px
  - デスクトップ: 1025px以上
```

---

## 5. 今後の実装ステップ

### Phase 1: データ作成
- [ ] 64パターンの新規セクションデータ作成
- [ ] JSONファイルの更新
- [ ] データバリデーション

### Phase 2: 表示実装
- [ ] HTMLテンプレート更新
- [ ] JavaScript表示処理追加
- [ ] CSSスタイリング調整

### Phase 3: テスト
- [ ] 全64パターンの表示確認
- [ ] レスポンシブ動作確認
- [ ] パフォーマンステスト

---

このドキュメントに基づいて、次は64パターンの新規データを作成します。