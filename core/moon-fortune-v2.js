// æœˆç›¸å ã„ã‚¨ãƒ³ã‚¸ãƒ³ V2
// aisyo.md ã®è©³ç´°ãªæœˆã‚¿ã‚¤ãƒ—è¨ºæ–­ã‚’å®Ÿè£…

const { getCompatibilityData } = require('./fortune/compatibility-data');
const compatibilityActionList = require('../data/moon-compatibility-actions.json');

const compatibilityActionsMap = new Map();
compatibilityActionList.forEach(entry => {
  const key = `${entry.userType}-${entry.partnerType}`;
  compatibilityActionsMap.set(key, entry);
});

class MoonFortuneEngineV2 {
  constructor() {
    // 8ã¤ã®æœˆã‚¿ã‚¤ãƒ—å®šç¾©ï¼ˆaisyo.mdãƒ™ãƒ¼ã‚¹ï¼‰
    this.moonTypes = [
      'æ–°æœˆ',      // 0.
      'ä¸‰æ—¥æœˆ',    // 1
      'ä¸Šå¼¦ã®æœˆ',  // 2
      'åä¸‰å¤œ',    // 3
      'æº€æœˆ',      // 4
      'åå…­å¤œ',    // 5
      'ä¸‹å¼¦ã®æœˆ',  // 6
      'æš'         // 7
    ];

    // æœˆé½¢ã‹ã‚‰æœˆã‚¿ã‚¤ãƒ—ã¸ã®ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆV1ã¨ã®äº’æ›æ€§ã‚’ä¿ã¤ï¼‰
    this.moonPhaseRanges = [
      { type: 'æ–°æœˆ', emoji: 'ğŸŒ‘', range: [0, 3.7] },        // æ—§: æ–°æœˆã‚¿ã‚¤ãƒ— (0-45Â°)
      { type: 'ä¸‰æ—¥æœˆ', emoji: 'ğŸŒ’', range: [3.7, 7.4] },    // æ—§: ä¸‰æ—¥æœˆã‚¿ã‚¤ãƒ— (45-90Â°)
      { type: 'ä¸Šå¼¦ã®æœˆ', emoji: 'ğŸŒ“', range: [7.4, 11.1] }, // æ—§: ä¸Šå¼¦ã®æœˆã‚¿ã‚¤ãƒ— (90-135Â°)
      { type: 'åä¸‰å¤œ', emoji: 'ğŸŒ”', range: [11.1, 14.8] },  // æ—§: æº€ã¡ã‚†ãæœˆã‚¿ã‚¤ãƒ— (135-180Â°)
      { type: 'æº€æœˆ', emoji: 'ğŸŒ•', range: [14.8, 18.5] },    // æ—§: æº€æœˆã‚¿ã‚¤ãƒ— (180-225Â°)
      { type: 'åå…­å¤œ', emoji: 'ğŸŒ–', range: [18.5, 22.1] },  // æ—§: æ¬ ã‘ã‚†ãæœˆã‚¿ã‚¤ãƒ— (225-270Â°)
      { type: 'ä¸‹å¼¦ã®æœˆ', emoji: 'ğŸŒ—', range: [22.1, 25.8] },// æ—§: ä¸‹å¼¦ã®æœˆã‚¿ã‚¤ãƒ— (270-315Â°)
      { type: 'æš', emoji: 'ğŸŒ˜', range: [25.8, 29.53] }      // æ—§: é€†ä¸‰æ—¥æœˆã‚¿ã‚¤ãƒ— (315-360Â°)
    ];

    // ç›¸æ€§ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ï¼ˆaisyo.mdã‹ã‚‰ï¼‰
    // â—=95ç‚¹ã€â—‹=75ç‚¹ã€â–³=55ç‚¹
    this.compatibilityMatrix = {
      'æ–°æœˆ': {
        'æ–°æœˆ': 95, 'ä¸‰æ—¥æœˆ': 55, 'ä¸Šå¼¦ã®æœˆ': 75, 'åä¸‰å¤œ': 95,
        'æº€æœˆ': 95, 'åå…­å¤œ': 75, 'ä¸‹å¼¦ã®æœˆ': 55, 'æš': 55
      },
      'ä¸‰æ—¥æœˆ': {
        'æ–°æœˆ': 55, 'ä¸‰æ—¥æœˆ': 95, 'ä¸Šå¼¦ã®æœˆ': 95, 'åä¸‰å¤œ': 75,
        'æº€æœˆ': 75, 'åå…­å¤œ': 95, 'ä¸‹å¼¦ã®æœˆ': 75, 'æš': 55
      },
      'ä¸Šå¼¦ã®æœˆ': {
        'æ–°æœˆ': 75, 'ä¸‰æ—¥æœˆ': 95, 'ä¸Šå¼¦ã®æœˆ': 75, 'åä¸‰å¤œ': 75,
        'æº€æœˆ': 55, 'åå…­å¤œ': 55, 'ä¸‹å¼¦ã®æœˆ': 95, 'æš': 75
      },
      'åä¸‰å¤œ': {
        'æ–°æœˆ': 95, 'ä¸‰æ—¥æœˆ': 75, 'ä¸Šå¼¦ã®æœˆ': 75, 'åä¸‰å¤œ': 95,
        'æº€æœˆ': 75, 'åå…­å¤œ': 55, 'ä¸‹å¼¦ã®æœˆ': 55, 'æš': 95
      },
      'æº€æœˆ': {
        'æ–°æœˆ': 95, 'ä¸‰æ—¥æœˆ': 75, 'ä¸Šå¼¦ã®æœˆ': 55, 'åä¸‰å¤œ': 75,
        'æº€æœˆ': 55, 'åå…­å¤œ': 95, 'ä¸‹å¼¦ã®æœˆ': 75, 'æš': 55
      },
      'åå…­å¤œ': {
        'æ–°æœˆ': 75, 'ä¸‰æ—¥æœˆ': 95, 'ä¸Šå¼¦ã®æœˆ': 55, 'åä¸‰å¤œ': 55,
        'æº€æœˆ': 95, 'åå…­å¤œ': 95, 'ä¸‹å¼¦ã®æœˆ': 75, 'æš': 75
      },
      'ä¸‹å¼¦ã®æœˆ': {
        'æ–°æœˆ': 55, 'ä¸‰æ—¥æœˆ': 75, 'ä¸Šå¼¦ã®æœˆ': 95, 'åä¸‰å¤œ': 55,
        'æº€æœˆ': 75, 'åå…­å¤œ': 75, 'ä¸‹å¼¦ã®æœˆ': 95, 'æš': 95
      },
      'æš': {
        'æ–°æœˆ': 55, 'ä¸‰æ—¥æœˆ': 55, 'ä¸Šå¼¦ã®æœˆ': 75, 'åä¸‰å¤œ': 95,
        'æº€æœˆ': 55, 'åå…­å¤œ': 75, 'ä¸‹å¼¦ã®æœˆ': 95, 'æš': 95
      }
    };

    // æœˆã‚¿ã‚¤ãƒ—ã”ã¨ã®è©³ç´°èª¬æ˜ï¼ˆaisyo.mdã‹ã‚‰æŠœç²‹ï¼‰
    this.moonTypeDetails = {
      'æ–°æœˆ': {
        title: 'æ–°æœˆã‚¿ã‚¤ãƒ—ã®ç‰©èª',
        introduction: 'ã‚ãªãŸãŒç”Ÿã¾ã‚ŒãŸå¤œã€ç©ºã«ã¯æœˆãŒè¦‹ãˆã¾ã›ã‚“ã§ã—ãŸã€‚',
        symbolism: 'æ–°æœˆã¯ã€Œå§‹ã¾ã‚Šã€ã€ŒçœŸã£ã•ã‚‰ãªå¯èƒ½æ€§ã€ã€Œã¾ã è¦‹ãˆãªã„æœªæ¥ã€ã‚’è±¡å¾´ã—ã¾ã™ã€‚',
        traits: [
          'ç›´æ„ŸåŠ›ã¨ç¬ç™ºåŠ›ãŒé£›ã³æŠœã‘ã¦ã„ã¾ã™',
          'æœªçŸ¥ã®äººãƒ»å ´æ‰€ãƒ»ä½“é¨“ã«å¼·ãæƒ¹ã‹ã‚Œã‚‹',
          'å¿ƒãŒå‹•ã„ãŸç¬é–“ã«è¡Œå‹•ã§ãã‚‹',
          'åˆå¯¾é¢ã§ã‚‚è‡ªç„¶ã«è·é›¢ã‚’ç¸®ã‚ã‚‰ã‚Œã‚‹',
          'ã€Œä»Šã€ã®æ°—æŒã¡ã‚’å¤§äº‹ã«ã—ã€å‹¢ã„ãŒã‚ã‚‹'
        ],
        loveStyle: 'æ–°æœˆã®æ‹ã¯ã€é›·ãŒè½ã¡ã‚‹ã‚ˆã†ã«å§‹ã¾ã‚Šã¾ã™ã€‚ã€Œã“ã®äººã ï¼ã€ã¨ç›´æ„Ÿã—ãŸã‚‰ã€ä¸€æ°—ã«è·é›¢ã‚’è©°ã‚ã€çŸ­æœŸé–“ã§æ·±ã„é–¢ä¿‚ã«ã€‚',
        loveExamples: [
          'å‡ºä¼šã£ã¦æ•°æ™‚é–“ã§ã€Œæ¥é€±ã€ã”é£¯è¡Œã“ã†ï¼ã€ã¨å³ææ¡ˆ',
          'LINEã¯ç†±é‡é«˜ã‚ã€å†™çœŸã‚„å‹•ç”»ã‚‚ã™ãå…±æœ‰',
          'ä»˜ãåˆã†å‰ã§ã‚‚ã‚µãƒ—ãƒ©ã‚¤ã‚ºã‚„é å‡ºã‚’ææ¡ˆã—ã€ç›¸æ‰‹ã‚’ãƒ¯ã‚¯ãƒ¯ã‚¯ã•ã›ã‚‹'
        ],
        caution: 'ãŸã ã—ã€å®‰å®šæœŸã«å…¥ã‚‹ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒçŸ­ããªã£ãŸã‚Šã€ä¼šã†é–“éš”ãŒç©ºã„ãŸã‚Šã™ã‚‹ã“ã¨ã‚‚ã€‚æœ¬äººã¯ã€Œè½ã¡ç€ã„ãŸã ã‘ã€ã§ã‚‚ã€ç›¸æ‰‹ã¯ã€Œå†·ã‚ã‚‰ã‚ŒãŸï¼Ÿã€ã¨æ„Ÿã˜ã‚„ã™ã„ç‚¹ã«æ³¨æ„ã€‚',
        actionAdvice: [
          'ã€Œå®‰å®šãƒ‡ãƒ¼ã€ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«å…ˆç½®ãï¼šæœˆã«2å›ã¯å‹•ã‹ãªã„ãƒ‡ãƒ¼ãƒˆï¼ˆè‡ªç‚Šãƒ»æ•£æ­©ãƒ»æ˜ ç”»ï¼‰ã‚’äºˆç´„',
          'ç†±é‡ã®"3æ®µå¤‰é€Ÿ"é‹è»¢ï¼šåˆæœŸï¼å…¨é–‹ï¼ä¸­æœŸï¼å®‰å®šï¼é•·æœŸï¼ä½ç‡ƒè²»',
          'é€±1æ—¥ã¯é€£çµ¡ã‚„ææ¡ˆã‚’ã›ãšã€ç›¸æ‰‹ã‹ã‚‰ã®å‹•ãã‚’å¾…ã¤'
        ]
      },
      'ä¸‰æ—¥æœˆ': {
        title: 'ä¸‰æ—¥æœˆã‚¿ã‚¤ãƒ—ã®ç‰©èª',
        introduction: 'ã‚ãªãŸãŒç”Ÿã¾ã‚ŒãŸæ—¥ã®å¤œç©ºã«ã¯ã€å³å´ã«ç´°ãå…‰ã‚‹ä¸‰æ—¥æœˆãŒæµ®ã‹ã‚“ã§ã„ã¾ã—ãŸã€‚',
        symbolism: 'ä¸‰æ—¥æœˆã¯ã€Œæº–å‚™ã€ã€ŒèŠ½å¹ãã®ä¿è­·ã€ã€ŒæŸ”è»Ÿãªé©å¿œåŠ›ã€ã‚’è±¡å¾´ã—ã¾ã™ã€‚',
        traits: [
          'çŠ¶æ³ã‚’ã‚ˆãè¦³å¯Ÿã—ã€ç›¸æ‰‹ã‚„ç’°å¢ƒã«åˆã‚ã›ã¦è·é›¢æ„Ÿã‚’èª¿æ•´ã§ãã‚‹',
          'ç›¸æ‰‹ã®æ„Ÿæƒ…ã‚„é›°å›²æ°—ã‚’æ•æ„Ÿã«å¯ŸçŸ¥ã™ã‚‹',
          'è‡ªåˆ†ã‚ˆã‚Šã‚‚ç›¸æ‰‹ã‚’å„ªå…ˆã™ã‚‹å ´é¢ãŒå¤šã„',
          'ç„¡ç†ã‚’ã›ãšè‡ªç„¶ä½“ã§é–¢ä¿‚ã‚’ç¶šã‘ã‚‰ã‚Œã‚‹'
        ],
        loveStyle: 'ä¸‰æ—¥æœˆã®æ‹ã¯ã€ç¨®ã‚’å°‘ã—ãšã¤è‚²ã¦ã‚‹åº­å¸«ã®ã‚ˆã†ã§ã™ã€‚ä¸€ç›®æƒšã‚Œã‚ˆã‚Šã‚‚ã€å®‰å¿ƒæ„Ÿã‚’ç©ã¿é‡ã­ã¦è·é›¢ã‚’ç¸®ã‚ã¾ã™ã€‚',
        loveExamples: [
          'æ°—ã«ãªã‚‹ç›¸æ‰‹ã«ã¯ã€ã¾ãšLINEã‚„ä¼šè©±ã§ä¿¡é ¼é–¢ä¿‚ã‚’ä½œã£ã¦ã‹ã‚‰ãƒ‡ãƒ¼ãƒˆã«èª˜ã†',
          'ç›¸æ‰‹ãŒå¿™ã—ã„ã¨ãã¯ç„¡ç†ã«ä¼šãŠã†ã¨ã›ãšã€çŸ­ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã ã‘é€ã‚‹',
          'æ‹äººã®ç–²ã‚Œã‚’å¯ŸçŸ¥ã—ã¦ã€ä¼šã†ä»£ã‚ã‚Šã«ã€Œã‚†ã£ãã‚Šä¼‘ã‚“ã§ã­ã€ã¨ä¼ãˆã‚‹'
        ],
        caution: 'å„ªã—ã•ãŒå¼·ã™ãã¦æœ¬éŸ³ã‚’å¾Œå›ã—ã«ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã€æ‹æ„›ã®é€²å±•ãŒã‚†ã£ãã‚Šã«ãªã‚ŠãŒã¡ã§ã™ã€‚',
        actionAdvice: [
          '"å°ã•ãªä¸€æ­©ã‚¢ã‚¯ã‚·ãƒ§ãƒ³"ã‚’æœˆ3å›ï¼šè»½ã„èª˜ã„ã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§è‡ªåˆ†ã‹ã‚‰å‹•ãç¿’æ…£',
          'æœ¬éŸ³ãƒ¡ãƒ¢ã‚’é€±1å›ï¼šç›¸æ‰‹ã«ä¼ãˆãŸã„ã“ã¨ã‚’ãƒ¡ãƒ¢ã«æ›¸ãå‡ºã—ã€ãã®ä¸­ã‹ã‚‰1ã¤ã ã‘ä¼ãˆã‚‹',
          'æ„Ÿæƒ…å…±æœ‰ãƒ‡ãƒ¼ï¼šæœˆæœ«ã«ã€Œä»Šæœˆã®å¬‰ã—ã‹ã£ãŸã“ã¨ãƒ»ä¸å®‰ã ã£ãŸã“ã¨ã€ã‚’ãŠäº’ã„è©±ã™'
        ]
      },
      'ä¸Šå¼¦ã®æœˆ': {
        title: 'ä¸Šå¼¦ã®æœˆã‚¿ã‚¤ãƒ—ã®ç‰©èª',
        introduction: 'ã‚ãªãŸãŒç”Ÿã¾ã‚ŒãŸå¤œã€å³åŠåˆ†ãŒãã£ãã‚Šã¨å…‰ã‚‹ä¸Šå¼¦ã®æœˆãŒç©ºã«ã‹ã‹ã£ã¦ã„ã¾ã—ãŸã€‚',
        symbolism: 'ä¸Šå¼¦ã®æœˆã¯ã€Œè¡Œå‹•è¨ˆç”»ã€ã€ŒåŠ é€Ÿã€ã€Œæ®µéšçš„ãªæˆé•·ã€ã‚’è±¡å¾´ã—ã¾ã™ã€‚',
        traits: [
          'ç›®çš„ã‚’æ±ºã‚ãŸã‚‰"ã„ã¤ãƒ»ä½•ã‚’ãƒ»ã©ã†ã‚„ã£ã¦"ã‚’è‡ªç„¶ã«çµ„ã¿ç«‹ã¦ã‚‹',
          'å‹¢ã„ã ã‘ã§èµ°ã‚‹ã®ã§ã¯ãªãã€ç¾å®Ÿã«è½ã¨ã—è¾¼ã‚€è¨­è¨ˆå›³ã¥ãã‚ŠãŒå¾—æ„',
          'ç€å®Ÿã«å‰ã¸é€²ã‚ã‚‹æ¨é€²åŠ›ãŒã‚ã‚‹',
          'è¨ˆç”»ã‚’å®ˆã‚‹æ„è­˜ãŒå¼·ã„'
        ],
        loveStyle: 'ä¸Šå¼¦ã‚¿ã‚¤ãƒ—ã®æ‹ã¯ã€"è¦‹é€šã—"ã‚’æŒã¤ã¨ã“ã‚ã‹ã‚‰å§‹ã¾ã‚Šã¾ã™ã€‚ç›¸æ‰‹ã‚’ã‚ˆãè¦³å¯Ÿã—ã€ä¾¡å€¤è¦³ã‚„ç”Ÿæ´»ãƒªã‚ºãƒ ãŒå™›ã¿åˆã†ã‹ã‚’ç¢ºèªã€‚',
        loveExamples: [
          'åˆå›ã®é£Ÿäº‹ãŒè‰¯ã„æ„Ÿè§¦ãªã‚‰ã€å¸°ã‚Šéš›ã«ã€Œæ¥é€±ã©ã“ã‹ã§ãƒ©ãƒ³ãƒã©ã†ï¼Ÿã€ã¨ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å‰æã§èª˜ã†',
          'ç›¸æ‰‹ãŒå¿™ã—ã„æ™‚æœŸã¯ã€"è² æ‹…ã‚’ä¸Šã’ãªã„æ¥ç‚¹"ã¨ã—ã¦ãƒœã‚¤ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚„ã‚¹ã‚¿ãƒ³ãƒ—ã§æ§˜å­è¦‹',
          'é–¢ä¿‚ãŒé€²ã‚€ã¨ã€æ—…è¡Œãƒ»è¨˜å¿µæ—¥ãƒ»å°†æ¥ã®æš®ã‚‰ã—æ–¹ãªã©ä¸­æœŸè¨ˆç”»ã®è©±é¡Œã‚’è‡ªç„¶ã«æŒã¡è¾¼ã‚€'
        ],
        caution: 'ãƒšãƒ¼ã‚¹è¨­å®šãŒã‚„ã‚„"å‰ã®ã‚ã‚Š"ã«ãªã‚Šã‚„ã™ãã€ç›¸æ‰‹ã«ã¯ã€Œæ€¥ã‹ã•ã‚Œã¦ã„ã‚‹ã€ã¨æ„Ÿã˜ã‚‰ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚',
        actionAdvice: [
          '"ä½™ç™½ãƒ‡ãƒ¼"ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«å…ˆç½®ãï¼šæœˆã«2å›ã€ã‚ãˆã¦"ä½•ã‚‚ã—ãªã„ãƒ‡ãƒ¼ãƒˆ"ã‚’äºˆç´„',
          'ä¼šè©±ã®å†’é ­15åˆ†ã¯"å…±æ„Ÿãƒ¢ãƒ¼ãƒ‰å›ºå®š"ï¼šè§£æ±ºç­–ãƒ»ææ¡ˆã¯15åˆ†ä»¥é™',
          'ãƒ‡ãƒ¼ãƒˆã®å¹¹ã‚’ç›¸æ‰‹ã«ä¸¸æŠ•ã’ã™ã‚‹"ãŠä»»ã›å›"ã‚’å®šæœŸé–‹å‚¬'
        ]
      },
      'åä¸‰å¤œ': {
        title: 'åä¸‰å¤œã‚¿ã‚¤ãƒ—ã®ç‰©èª',
        introduction: 'ã‚ãªãŸãŒç”Ÿã¾ã‚ŒãŸå¤œã€ã»ã¼æº€ã¡ãŸæœˆâ€•â€•åä¸‰å¤œãŒã€æº€ã¡ã‚‹ç›´å‰ã®é™ã‹ãªé«˜ã¾ã‚Šã‚’æ¹›ãˆã¦ã„ã¾ã—ãŸã€‚',
        symbolism: 'åä¸‰å¤œã¯ã€Œå®Ÿã‚Šã€ã€Œå……è¶³ã€ã€Œå®‰å®šã—ãŸç™ºå±•ã€ã‚’è±¡å¾´ã—ã¾ã™ã€‚',
        traits: [
          'è½ã¡ç€ã„ãŸç‰©è…°ã¨ã€ç›¸æ‰‹ã®æ°—æŒã¡ã‚’å—ã‘æ­¢ã‚ã‚‹åŒ…å®¹åŠ›',
          'å£°ã‚’è’ã’ãšã€çŠ¶æ³ã‚’æ•´ãˆã€å ´ã®æ¸©åº¦ã‚’ã¡ã‚‡ã†ã©ã‚ˆãä¿ã¤',
          'ä»•äº‹ã§ã¯ç«æ¶ˆã—ãƒ»æ®µå–ã‚Šã®å¾®ä¿®æ­£ãƒ»é–¢ä¿‚èª¿æ•´ãŒå¾—æ„',
          'å‹äººé–“ã§ã¯"èãå½¹"ã¨ã—ã¦å®‰å¿ƒã‚’ä¾›çµ¦'
        ],
        loveStyle: 'åä¸‰å¤œã®æ‹ã¯ã€å®‰å¿ƒã®åœŸå°ã¥ãã‚Šã‹ã‚‰å§‹ã¾ã‚Šã¾ã™ã€‚é€£çµ¡ã¯é‡ã‚ˆã‚Šè³ªã€‚ä¼šã†é »åº¦ã‚‚"æŒç¶šå¯èƒ½ãªãƒšãƒ¼ã‚¹"ã‚’é‡è¦–ã€‚',
        loveExamples: [
          'é€±3ã®çŸ­ã„LINEã‚ˆã‚Šã€é€±2ã®ä¸å¯§ãªé€šè©±ã§äº’ã„ã®è¿‘æ³ã¨æ„Ÿæƒ…ã‚’å…±æœ‰',
          'å¤–é£Ÿç¶šãã‚ˆã‚Šã€è‡ªå®…ã§ä¸€ç·’ã«æ–™ç†â†’ãƒ‰ãƒ©ãƒ1è©±ã®ã»ã†ãŒæº€è¶³åº¦ãŒé«˜ã„',
          'å°†æ¥ã®è©±ã‚‚ã€Œ2å¹´ä»¥å†…ã«åŒæ£²ã€ã€ŒåŒæ–¹ã®é€šå‹¤30åˆ†åœå†…ã€ãªã©ç¾å®Ÿçš„ãªæ¡ä»¶ã§æ“¦ã‚Šåˆã‚ã›'
        ],
        caution: 'æ…é‡ã•ãŒ"å—ã‘èº«"ã«è¦‹ãˆã‚‹ã“ã¨ãŒã‚ã‚Šã€ç›¸æ‰‹ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸ææ¡ˆã«ã€Œä»Šåº¦ã­ã€ã‚’é‡ã­ã‚‹ã¨ã€é–¢ä¿‚ãŒåœæ»ã—ã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚',
        actionAdvice: [
          '"å°ã•ãªå¤‰åŒ–ã‚¯ã‚©ãƒ¼ã‚¿"ã‚’æœˆ2å›ï¼šæ–°ã—ã„åº—/æœªçµŒé¨“ã‚¸ãƒ£ãƒ³ãƒ«ã®æ˜ ç”»ãªã©ã€ä½ãƒªã‚¹ã‚¯ã®å†’é™ºã‚’äºˆå®šåŒ–',
          'ã‚±ã‚¢ã¨è¨€èªåŒ–ã®ä¸¡è¼ªï¼šç›¸æ‰‹ãŒè½ã¡è¾¼ã‚€æ—¥ã¯æ¸©ã‹ã„æ–™ç†ï¼‹15åˆ†ã®å‚¾è´',
          'å®‰å¿ƒã®åˆè¨€è‘‰ã‚’æ±ºã‚ã‚‹ï¼šä¾‹ã€Œç§ãŸã¡ã¯é•·è·é›¢èµ°ã€'
        ]
      },
      'æº€æœˆ': {
        title: 'æº€æœˆã‚¿ã‚¤ãƒ—ã®ç‰©èª',
        introduction: 'ã‚ãªãŸãŒç”Ÿã¾ã‚ŒãŸå¤œç©ºã«ã¯ã€ã¾ã‚“ä¸¸ã«è¼ãæº€æœˆãŒã€æš—é—‡ã‚’ä½™ã™ã“ã¨ãªãç…§ã‚‰ã—ã¦ã„ã¾ã—ãŸã€‚',
        symbolism: 'æº€æœˆã¯ã€Œå…‰ã€ã€Œé–‹æ”¾ã€ã€Œæ„Ÿæƒ…ã®è±Šã‹ã•ã€ã‚’è±¡å¾´ã—ã¾ã™ã€‚',
        traits: [
          'ã¾ã‚‹ã§ç¯å°ã®ã‚ˆã†ã«ã€äººã‚’è‡ªç„¶ã¨æƒ¹ãã¤ã‘ã‚‹',
          'æ„Ÿæƒ…è¡¨ç¾ãŒã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆã§ã€å¬‰ã—ã„ã¨ãã¯å…¨èº«ã§å–œã¶',
          'æ‚²ã—ã„ã¨ãã¯æ¶™ã‚’éš ã•ãªã„æ­£ç›´ã•',
          'ä¿¡é ¼ã§ãã‚‹ã€ä¸€ç·’ã«ã„ã¦å¿ƒãŒæ¸©ã¾ã‚‹å­˜åœ¨'
        ],
        loveStyle: 'æº€æœˆã®æ‹ã¯ã€èŠ±ç«ãŒå¤œç©ºã«ä¸€æ°—ã«é–‹ãã‚ˆã†ãªã‚¹ã‚¿ãƒ¼ãƒˆã€‚å‡ºä¼šã£ãŸç¬é–“ã‹ã‚‰è·é›¢ã‚’ç¸®ã‚ã€çŸ­æœŸé–“ã§æ·±ã„çµ†ã‚’ç¯‰ãã¾ã™ã€‚',
        loveExamples: [
          'äº¤éš›åˆæœŸã‹ã‚‰ã€Œæ¯æ—¥ãŠã¯ã‚ˆã†ã¨ãŠã‚„ã™ã¿ã®LINEã€ã‚’æ¬ ã‹ã•ãªã„',
          'èª•ç”Ÿæ—¥ã‚„è¨˜å¿µæ—¥ã«ã¯å…¨åŠ›ã§ãŠç¥ã„ã—ã€ç›¸æ‰‹ã®å–œã¶é¡”ã‚’è¦‹ãŸã„ä¸€å¿ƒã§è¨ˆç”»',
          'è½ã¡è¾¼ã‚€ç›¸æ‰‹ã‚’ã€ç¬‘ã‚ã›ã‚ˆã†ã¨å†—è«‡ã‚„è¡Œå‹•ã§å…¨åŠ›ãƒ•ã‚©ãƒ­ãƒ¼'
        ],
        caution: 'æ„Ÿæƒ…ã®æ³¢ãŒå¤§ãã„ãŸã‚ã€ç†±ãŒå†·ã‚ã‚‹ã¨æ€¥ã«è·é›¢ã‚’ç½®ãå‚¾å‘ã‚‚ã€‚ç›¸æ‰‹ã‚’ä¸å®‰ã«ã•ã›ã‚„ã™ã„é¢ãŒã‚ã‚Šã¾ã™ã€‚',
        actionAdvice: [
          'æ„›ã‚’å—ã‘å–ã‚‹ç·´ç¿’ï¼šãƒ‡ãƒ¼ãƒˆè¨ˆç”»ã‚’ç›¸æ‰‹ã«ä»»ã›ã¦ã¿ã‚‹',
          'æœˆã«1ã€œ2å›ã¯ã€Œè‡ªåˆ†ã‹ã‚‰èª˜ã‚ãªã„æ—¥ã€ã‚’æ„è­˜çš„ã«ä½œã‚‹',
          'æ„Ÿæƒ…ã®ãƒ”ãƒ¼ã‚¯ã¯"ä¸€æ™©ä¿ç®¡"ãƒ«ãƒ¼ãƒ«ï¼šç¿Œæœèª­ã¿è¿”ã—ã¦ã‹ã‚‰é€ä¿¡'
        ]
      },
      'åå…­å¤œ': {
        title: 'åå…­å¤œã‚¿ã‚¤ãƒ—ã®ç‰©èª',
        introduction: 'ã‚ãªãŸãŒç”Ÿã¾ã‚ŒãŸå¤œç©ºã«æµ®ã‹ã‚“ã§ã„ãŸã®ã¯ã€æº€æœˆã®ç¿Œæ—¥ã«å°‘ã—ã ã‘æ¬ ã‘å§‹ã‚ãŸåå…­å¤œã®æœˆã€‚',
        symbolism: 'åå…­å¤œã¯ã€Œæˆç†Ÿã€ã€Œä½™è£•ã€ã€Œå¼•ãéš›ã®ç¾å­¦ã€ã‚’è±¡å¾´ã—ã¾ã™ã€‚',
        traits: [
          'ä¸€æ­©å¼•ã„ã¦å…¨ä½“ã‚’è¦‹æ¸¡ã™è¦–ç‚¹',
          'ç‰©äº‹ã‚’å††æ»‘ã«é€²ã‚ã‚‹èª¿æ•´åŠ›',
          'å¤§ããªå£°ã§ä¸»å¼µã—ãªãã¦ã‚‚å­˜åœ¨æ„ŸãŒã‚ã‚‹',
          'äººé–“é–¢ä¿‚ã®æ¸©åº¦ã‚’ä¸€å®šã«ä¿ã¤ã“ã¨ãŒã§ãã‚‹'
        ],
        loveStyle: 'åå…­å¤œã®æ‹ã¯ã€é™ã‹ã§å®‰å®šçš„ãªç‚ã€‚ç›¸æ‰‹ã‚’ã‚ˆãè¦³å¯Ÿã—ã€éå‰°ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚„æŠ¼ã—ã™ãã¯ã—ã¾ã›ã‚“ã€‚',
        loveExamples: [
          'ä¼šã„ãŸã„æ°—æŒã¡ãŒã‚ã£ã¦ã‚‚ã€ç›¸æ‰‹ã®ç–²ã‚Œã‚„äºˆå®šã‚’å„ªå…ˆã—ã¦é€£çµ¡ã‚’æ§ãˆã‚‹',
          'è¨˜å¿µæ—¥ã‚„ã‚µãƒ—ãƒ©ã‚¤ã‚ºã‚ˆã‚Šã‚‚ã€æ—¥å¸¸ã®ä¸­ã§ç›¸æ‰‹ãŒå–œã¶è¡Œå‹•ã‚’é¸ã¶',
          'å–§å˜©ã«ãªã‚Šãã†ãªæ™‚ã¯æ²ˆé»™ã‚’é¸ã³ã€æ™‚é–“ã‚’ãŠã„ã¦å†·é™ãªè©±ã—åˆã„ã«æŒã¡è¾¼ã‚€'
        ],
        caution: 'ã‚ã¾ã‚Šã«è½ã¡ç€ãã™ãã¦ã€Œæœ¬å½“ã«å¥½ããªã®ã‹ãªï¼Ÿã€ã¨æ€ã‚ã‚ŒãŸã‚Šã€æƒ…ç†±ãŒè¦‹ãˆã«ãããªã‚‹ã“ã¨ã‚‚ã€‚',
        actionAdvice: [
          '"åŠæ­©å‰é€²ãƒ‡ãƒ¼"ã‚’è¨­å®šï¼šæœˆã«1å›ã¯ã€è‡ªåˆ†ã‹ã‚‰ãƒ‡ãƒ¼ãƒˆã‚„æ—…è¡Œã®ææ¡ˆã‚’ã™ã‚‹',
          'æ„Ÿæƒ…ã‚’"è¦‹ãˆã‚‹å½¢"ã§æ¸¡ã™ç¿’æ…£ï¼šæ‰‹ç´™ãƒ»çŸ­ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§æ™®æ®µè¨€ã‚ãªã„æ°—æŒã¡ã‚’å¯è¦–åŒ–',
          '"æ€ã„å‡ºãƒˆãƒªã‚¬ãƒ¼"ã‚’æ´»ç”¨ï¼šéå»ã®æ¥½ã—ã‹ã£ãŸãƒ‡ãƒ¼ãƒˆã‚’æ™‚ã€…å¼•ã£å¼µã‚Šå‡ºã—ã¦å…±æœ‰'
        ]
      },
      'ä¸‹å¼¦ã®æœˆ': {
        title: 'ä¸‹å¼¦ã®æœˆã‚¿ã‚¤ãƒ—ã®ç‰©èª',
        introduction: 'ã‚ãªãŸãŒç”Ÿã¾ã‚ŒãŸå¤œç©ºã«ã¯ã€å·¦åŠåˆ†ãŒãã£ãã‚Šã¨å…‰ã‚‹ä¸‹å¼¦ã®æœˆã€‚',
        symbolism: 'ä¸‹å¼¦ã¯ã€Œæ•´ç†ã€ã€ŒåæŸã€ã€Œå®‰å®šåŒ–ã€ã‚’è±¡å¾´ã—ã¾ã™ã€‚',
        traits: [
          'æƒ…å ±ãƒ»æ„Ÿæƒ…ãƒ»å‡ºæ¥äº‹ã‚’å†·é™ã«æ•´ç†ã™ã‚‹åŠ›',
          'ç‰©äº‹ã‚’å¼•ãç®—ã§æ•´ãˆã‚‹',
          'æµè¡Œã‚„æ„Ÿæƒ…ã«å·¦å³ã•ã‚Œãšã€è‡ªåˆ†ã®è»¸ã‚’æŒã¤',
          'ä»–äººã®æ„Ÿæƒ…ã‚’å—ã‘æ­¢ã‚ã¤ã¤ã‚‚ã€é£²ã¿è¾¼ã¾ã‚Œãªã„è·é›¢æ„Ÿ'
        ],
        loveStyle: 'ä¸‹å¼¦ã®æ‹ã¯ã€ã˜ã£ãã‚Šç†Ÿæˆå‹ã€‚æ€¥é€Ÿãªè·é›¢ã®è©°ã‚æ–¹ã‚ˆã‚Šã‚‚ã€ãŠäº’ã„ã®ä¿¡é ¼ã‚’ç©ã¿ä¸Šã’ã¦ã‹ã‚‰æ·±ã¾ã‚Šã¾ã™ã€‚',
        loveExamples: [
          'é€£çµ¡ã¯é©åº¦ã€ç›¸æ‰‹ã®ç”Ÿæ´»ãƒªã‚ºãƒ ã‚’å°Šé‡ã—ã¦è¿”ã™',
          'ç›¸æ‰‹ãŒè½ã¡è¾¼ã‚“ã§ã„ã¦ã‚‚ã€å¿…è¦ä»¥ä¸Šã«è¸ã¿è¾¼ã¾ãšã€ãã°ã«ã„ã‚‹å®‰å¿ƒæ„Ÿã‚’ä¸ãˆã‚‹',
          'äº¤éš›ãŒå®‰å®šæœŸã«å…¥ã‚‹ã¨ã€ä¼šã†é »åº¦ã‚„éã”ã—æ–¹ã‚‚å¿ƒåœ°ã‚ˆã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å®šç€'
        ],
        caution: 'å¤‰åŒ–ã‚’æ±‚ã‚ã‚‰ã‚ŒãŸã‚Šã€å¼·ã„æ„Ÿæƒ…è¡¨ç¾ã‚’å—ã‘ã‚‹ã¨ã€Œè‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã‚’ä¹±ã•ã‚Œã‚‹ã€ã¨æ„Ÿã˜ã‚„ã™ã„å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚',
        actionAdvice: [
          '"å¤‰åŒ–ä½“é¨“"ã‚’æœˆ1å›ã ã‘å…¥ã‚Œã‚‹ï¼šæ™®æ®µã®å®‰å®šãƒ‡ãƒ¼ãƒˆã«åŠ ãˆã€æ–°ã—ã„å ´æ‰€ã‚„ä½“é¨“ã‚’è©¦ã™',
          'æ„Ÿæƒ…ã‚’"äº‹å®Ÿã®å‰"ã«è©±ã™ï¼šææ¡ˆã‚„æ•´ç†ã‚ˆã‚Šã‚‚å…ˆã«æ„Ÿæƒ…ã‚’ä¸€è¨€æ·»ãˆã‚‹',
          '"äºˆå®šãªã—æ™‚é–“"ã‚’ä¸€ç·’ã«éã”ã™è¨“ç·´ï¼šã‚´ãƒ¼ãƒ«ã®ãªã„ãƒ‡ãƒ¼ãƒˆã‚’æœˆã«1å›'
        ]
      },
      'æš': {
        title: 'æšã‚¿ã‚¤ãƒ—ã®ç‰©èª',
        introduction: 'ã‚ãªãŸãŒç”Ÿã¾ã‚ŒãŸå¤œç©ºã¯ã€æœˆãŒæ²ˆã¿ã€å¤œæ˜ã‘å‰ã®é™ã‘ã•ãŒä¸–ç•Œã‚’åŒ…ã‚“ã§ã„ã¾ã—ãŸã€‚',
        symbolism: 'æšã¯ã€Œçµ‚ã‚ã‚Šã¨å§‹ã¾ã‚Šã®å¢ƒç›®ã€ã€Œé™ã‹ãªå†…çœã€ã€Œæ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã¸ã®æº–å‚™ã€ã‚’è±¡å¾´ã—ã¾ã™ã€‚',
        traits: [
          'æ·±ãè€ƒãˆã‚‹åŠ›ã¨ã€ç‰©äº‹ã‚’é™ã‹ã«æ•´ãˆã¦ã„ãåŠ›',
          'æ„Ÿæƒ…ã‚’å¤–ã«æ¿€ã—ãå‡ºã™ã‚ˆã‚Šã€ã¾ãšå†…å´ã§æ•´ç†',
          'ã˜ã£ãã‚Šè€ƒãˆã¦ã‹ã‚‰è¡Œå‹•ã™ã‚‹',
          'æœ¬å½“ã«å¤§åˆ‡ã ã¨æ€ãˆã‚‹ç›¸æ‰‹ã‚„ã“ã¨ã ã‘ã‚’é¸ã³æŠœã'
        ],
        loveStyle: 'æšã®æ‹ã¯ã€é™ã‹ã«æ·±ã¾ã‚‹æ°´è„ˆã®ã‚ˆã†ã€‚ä¸€æ°—ã«ç‡ƒãˆä¸ŠãŒã‚‹ã‚ˆã‚Šã‚‚ã€å°‘ã—ãšã¤å¿ƒã‚’è¨±ã—ã€æ™‚é–“ã‚’ã‹ã‘ã¦çµ†ã‚’å¼·ãã—ã¦ã„ãã¾ã™ã€‚',
        loveExamples: [
          'é€£çµ¡é »åº¦ã¯å°‘ãªã‚ã§ã‚‚ã€ä¼šã£ãŸã¨ãã®æ™‚é–“å¯†åº¦ã¯æ¿ƒã„',
          'ç›¸æ‰‹ã®æ„Ÿæƒ…ã«ã™ãåå¿œã›ãšã€ã¾ãšã¯èã„ã¦å—ã‘æ­¢ã‚ã¦ã‹ã‚‰è¿”ã™',
          'ãƒ‡ãƒ¼ãƒˆã¯è½ã¡ç€ã„ãŸå ´æ‰€ã‚„äºŒäººãã‚Šã«ãªã‚Œã‚‹ç©ºé–“ã‚’å¥½ã‚€'
        ],
        caution: 'ãƒ†ãƒ³ãƒã®é€Ÿã„æ‹æ„›ã‚„ã€æ„Ÿæƒ…è¡¨ç¾ã®æ¿€ã—ã„ç›¸æ‰‹ã¨ã¯ã€ãƒšãƒ¼ã‚¹ã®é•ã„ã§ç–²ã‚Œã‚„ã™ã„å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚',
        actionAdvice: [
          '"åŠæ­©å…ˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³"ã‚’ç¿’æ…£åŒ–ï¼šè‡ªåˆ†ã‹ã‚‰ã‚‚è»½ã„ææ¡ˆã‚’æœˆ2å›ã™ã‚‹',
          'æ„Ÿæƒ…ã®"äº‹å‰ã‚·ã‚°ãƒŠãƒ«"ã‚’å‡ºã™ï¼šè€ƒãˆã‚‹æ™‚é–“ãŒå¿…è¦ãªã¨ãã¯ä¸€è¨€æ·»ãˆã‚‹',
          'æœˆ1å›"ã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼"ã‚’è¨­å®šï¼šãã®æ—¥ã¯æ„è­˜çš„ã«è‡ªåˆ†ã®æ°—æŒã¡ã‚’å¤šã‚ã«è©±ã™'
        ]
      }
    };

    // ç›¸æ€§ã®è©³ç´°èª¬æ˜
    this.compatibilityDetails = {
      95: {
        level: 'â— ã¨ã¦ã‚‚ç›¸æ€§ãŒè‰¯ã„',
        description: 'æœˆãŒå‘Šã’ã¦ã„ã¾ã™ã€‚ãŠäºŒäººã®æ³¢é•·ã¯å®Œç’§ã«èª¿å’Œã—ã€äº’ã„ã®é­…åŠ›ã‚’æœ€å¤§é™ã«å¼•ãå‡ºã™é–¢ä¿‚ã§ã™ã€‚'
      },
      75: {
        level: 'â—‹ ç›¸æ€§ãŒè‰¯ã„',
        description: 'æœˆãŒå°ã„ã¦ã„ã¾ã™ã€‚ãŠäº’ã„ã‚’æˆé•·ã•ã›ã‚‹è‰¯ã„é–¢ä¿‚ã€‚æ™‚ã«é•ã„ã‚’æ„Ÿã˜ã¦ã‚‚ã€ãã‚ŒãŒæ–°é®®ãªåˆºæ¿€ã¨ãªã‚Šã¾ã™ã€‚'
      },
      55: {
        level: 'â–³ æ™®é€š',
        description: 'æœˆãŒç¤ºã—ã¦ã„ã¾ã™ã€‚ç•°ãªã‚‹å€‹æ€§ãŒå‡ºä¼šã†ã“ã¨ã§ã€æ–°ã—ã„å¯èƒ½æ€§ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚ç†è§£ã¨å°Šé‡ãŒé–¢ä¿‚ã‚’æ·±ã‚ã‚‹éµã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚'
      }
    };
  }

  getCompatibilityBaseDetail(score) {
    if (score >= 95) return this.compatibilityDetails[95];
    if (score >= 75) return this.compatibilityDetails[75];
    return this.compatibilityDetails[55];
  }

  getCompatibilityLevel(score) {
    return this.getCompatibilityBaseDetail(score).level;
  }

  getCompatibilityDescription(score) {
    return this.getCompatibilityBaseDetail(score).description;
  }

  // æœˆé½¢ã‚’è¨ˆç®—ï¼ˆæ­£ç¢ºãªå¤©æ–‡å­¦çš„è¨ˆç®—ï¼‰
  calculateMoonAge(date) {
    // åŸºæº–æ—¥ï¼ˆæ–°æœˆï¼‰: 2000å¹´1æœˆ6æ—¥ 18:14:00
    const referenceDate = new Date('2000-01-06 18:14:00');
    const lunarCycle = 29.53059; // æœ”æœ›æœˆï¼ˆæ—¥ï¼‰

    // çµŒéæ—¥æ•°ã‚’è¨ˆç®—
    const daysDiff = (date - referenceDate) / (1000 * 60 * 60 * 24);

    // æœˆé½¢ã‚’è¨ˆç®—ï¼ˆ0-29.53æ—¥ï¼‰
    let moonAge = daysDiff % lunarCycle;
    if (moonAge < 0) moonAge += lunarCycle;

    return Math.round(moonAge * 10) / 10;
  }

  // æœˆé½¢ã‹ã‚‰æœˆã‚¿ã‚¤ãƒ—ã‚’åˆ¤å®š
  getMoonTypeFromAge(moonAge) {
    for (const phase of this.moonPhaseRanges) {
      if (moonAge >= phase.range[0] && moonAge < phase.range[1]) {
        return {
          type: phase.type,
          emoji: phase.emoji
        };
      }
    }
    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
    return {
      type: 'æ–°æœˆ',
      emoji: 'ğŸŒ‘'
    };
  }

  // ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰æœˆã‚¿ã‚¤ãƒ—ã‚’å–å¾—
  getMoonTypeFromBirthdate(birthdate) {
    const date = new Date(birthdate);
    const moonAge = this.calculateMoonAge(date);
    return this.getMoonTypeFromAge(moonAge);
  }

  // ç›¸æ€§ã‚¹ã‚³ã‚¢ã‚’å–å¾—
  getCompatibilityScore(type1, type2) {
    return this.compatibilityMatrix[type1]?.[type2] || 55;
  }

  // ç›¸æ€§ã®è©³ç´°æƒ…å ±ã‚’ç”Ÿæˆ
  getCompatibilityDetails(userType, partnerType) {
    const compatibilityData = getCompatibilityData(userType, partnerType) || {};
    const reverseCompatibilityData = getCompatibilityData(partnerType, userType) || {};
    const fallbackScore = this.getCompatibilityScore(userType, partnerType);
    const score = compatibilityData.score || fallbackScore;
    const level = this.getCompatibilityLevel(score);
    const description = this.getCompatibilityDescription(score);
    const specificDetails = this.getSpecificCompatibilityAdvice(
      userType,
      partnerType,
      compatibilityData,
      reverseCompatibilityData
    );

    return {
      score,
      level,
      description,
      rank: compatibilityData.rank || null,
      reason: compatibilityData.reason || specificDetails.reason || description,
      relationship: compatibilityData.relationship || specificDetails.relationship || '',
      specific: specificDetails
    };
  }

  // ç‰¹å®šã®çµ„ã¿åˆã‚ã›ã«å¯¾ã™ã‚‹è©³ç´°ã‚¢ãƒ‰ãƒã‚¤ã‚¹
  getSpecificCompatibilityAdvice(userType, partnerType, compatibilityData = {}, reverseCompatibilityData = {}) {
    // aisyo.mdã®ç›¸æ€§èª¬æ˜ã‚’å…¨ã¦å®Ÿè£…
    const key = `${userType}-${partnerType}`;

    const adviceMap = {
      // æ–°æœˆã®ç›¸æ€§
      'æ–°æœˆ-æ–°æœˆ': {
        reason: 'åŒã˜ã‚¹ãƒ”ãƒ¼ãƒ‰æ„Ÿã¨ç†±é‡ã§èµ°ã‚Œã‚‹åŒå¿—',
        example: 'é‡‘æ›œå¤œã«ã€Œæ˜æ—¥æ¸©æ³‰è¡Œã‹ãªã„ï¼Ÿã€ã¨ç‰‡æ–¹ãŒè¨€ãˆã°ã€ã™ãã«è·é€ ã‚Šã—ã¦GO',
        advice: 'äº’ã„ã«åˆºæ¿€ã‚’ä¸ãˆåˆã„ã€æ¯æ—¥ãŒã‚¤ãƒ™ãƒ³ãƒˆã®ã‚ˆã†ã«éã”ã›ã¾ã™'
      },
      'æ–°æœˆ-ä¸‰æ—¥æœˆ': {
        reason: 'ä¸‰æ—¥æœˆã®é…æ…®ã¨æ–°æœˆã®è¡Œå‹•åŠ›ãŒãƒãƒ©ãƒ³ã‚¹ã‚ˆãèª¿å’Œ',
        example: 'æ–°æœˆãŒææ¡ˆã—ã€ä¸‰æ—¥æœˆãŒç´°ã‹ã„èª¿æ•´ã‚’ã—ã¦å®Ÿç¾ã™ã‚‹',
        advice: 'ãŠäº’ã„ã®é•·æ‰€ã‚’æ´»ã‹ã—ã¦ã€ç„¡ç†ãªãæ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã§ãã¾ã™'
      },
      'æ–°æœˆ-ä¸Šå¼¦ã®æœˆ': {
        reason: 'ä¸Šå¼¦ã®è¨ˆç”»æ€§ãŒæ–°æœˆã®è¡å‹•ã‚’ç¾å®Ÿçš„ã«å°ã',
        example: 'æ–°æœˆã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ä¸Šå¼¦ãŒè¨ˆç”»ã«è½ã¨ã—è¾¼ã‚“ã§å®Ÿç¾',
        advice: 'å‹¢ã„ã¨æˆ¦ç•¥ã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚ŒãŸè‰¯ã„é–¢ä¿‚'
      },
      'æ–°æœˆ-åä¸‰å¤œ': {
        reason: 'åä¸‰å¤œã®ç©ã‚„ã‹ã•ãŒã€æ–°æœˆã®å‹¢ã„ã‚’å„ªã—ãé•·æŒã¡ã•ã›ã‚‹',
        example: 'æ–°æœˆã®æ€¥ãªæ—…è¡Œææ¡ˆã«ã€åä¸‰å¤œãŒäº¤é€šã‚„å®¿ã‚’æ•´ãˆã¦ãã‚Œã¦å¿«é©ã«å®Ÿç¾',
        advice: 'æ–°æœˆã¯å®‰å¿ƒæ„Ÿã‚’å¾—ãªãŒã‚‰ã€ãƒšãƒ¼ã‚¹ã‚’ç·©ã‚ãšã«é€²ã‚ã¾ã™'
      },
      'æ–°æœˆ-æº€æœˆ': {
        reason: 'æº€æœˆã®æ¸©ã‹ã•ã¨æ„Ÿæƒ…è¡¨ç¾ãŒã€æ–°æœˆã®è¡å‹•ã‚’è‚¯å®šã—å®‰å¿ƒã«å¤‰ãˆã‚‹',
        example: 'æ–°æœˆãŒçªç„¶è½ã¡è¾¼ã‚“ã§ã‚‚ã€æº€æœˆãŒå…¨åŠ›ã§åŠ±ã¾ã—ã€ç¿Œæ—¥ã«ã¯ä¸€ç·’ã«ç¬‘ã£ã¦ã„ã‚‹',
        advice: 'äºŒäººã®æƒ…ç†±ãŒå…±é³´ã—ã€é–¢ä¿‚ãŒã‚ˆã‚Šæ·±ã¾ã‚Šã¾ã™'
      },
      'æ–°æœˆ-åå…­å¤œ': {
        reason: 'åå…­å¤œã®è½ã¡ç€ããŒæ–°æœˆã®ç†±ã‚’ç¨‹ã‚ˆãã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³',
        example: 'æ–°æœˆãŒèˆˆå¥®ã—ã™ããŸæ™‚ã€åå…­å¤œãŒå„ªã—ãè½ã¡ç€ã‹ã›ã‚‹',
        advice: 'ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã¡ãªãŒã‚‰ã€ãŠäº’ã„ã‚’æˆé•·ã•ã›ã‚‹é–¢ä¿‚'
      },
      'æ–°æœˆ-ä¸‹å¼¦ã®æœˆ': {
        reason: 'ä¸‹å¼¦ã®æ•´ç†åŠ›ãŒæ–°æœˆã®æ•£ã‚‰ã‹ã‚ŠãŒã¡ãªã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ã¾ã¨ã‚ã‚‹',
        example: 'æ–°æœˆãŒå§‹ã‚ãŸã“ã¨ã‚’ä¸‹å¼¦ãŒæ•´ç†ã—ã¦ç¶™ç¶šå¯èƒ½ã«ã™ã‚‹',
        advice: 'è¡å‹•ã¨æ•´ç†ã®ãƒãƒ©ãƒ³ã‚¹ãŒå¿…è¦ã§ã™ãŒã€å”åŠ›ã™ã‚Œã°è‰¯ã„çµæœã«'
      },
      'æ–°æœˆ-æš': {
        reason: 'æšã®æ·±ã„å†…çœãŒæ–°æœˆã«æ–°ã—ã„è¦–ç‚¹ã‚’ä¸ãˆã‚‹',
        example: 'æ–°æœˆãŒè¡Œå‹•ã—ãŸå¾Œã€æšã¨ã®å¯¾è©±ã§æ·±ã„æ°—ã¥ãã‚’å¾—ã‚‹',
        advice: 'ãƒšãƒ¼ã‚¹ã®é•ã„ã‚’ç†è§£ã—åˆãˆã‚Œã°ã€æ·±ã„é–¢ä¿‚ã«ç™ºå±•'
      },

      // ä¸‰æ—¥æœˆã®ç›¸æ€§
      'ä¸‰æ—¥æœˆ-æ–°æœˆ': {
        reason: 'æ–°æœˆã®å‹¢ã„ã«ä¸‰æ—¥æœˆãŒå„ªã—ããƒ–ãƒ¬ãƒ¼ã‚­ã‚’ã‹ã‘ã‚‹',
        example: 'æ–°æœˆã®ææ¡ˆã‚’ä¸‰æ—¥æœˆãŒç¾å®Ÿçš„ã«èª¿æ•´ã—ã¦å®Ÿç¾',
        advice: 'ãŠäº’ã„ã®ãƒšãƒ¼ã‚¹ã‚’å°Šé‡ã—ãªãŒã‚‰å‰é€²ã§ãã¾ã™'
      },
      'ä¸‰æ—¥æœˆ-ä¸‰æ—¥æœˆ': {
        reason: 'ä¼¼ãŸãƒšãƒ¼ã‚¹ã¨ä¾¡å€¤è¦³ã§å®‰å¿ƒæ„ŸæŠœç¾¤',
        example: 'ã©ã¡ã‚‰ã‹ã‚‰ã‚‚æ€¥ã‹ã•ãšã€è‡ªç„¶ã«ã€Œã¾ãŸä¼šãŠã†ã­ã€ã¨æ¬¡ã®ç´„æŸãŒæ±ºã¾ã‚‹',
        advice: 'äº’ã„ã®é ˜åŸŸã‚’å°Šé‡ã—ã¤ã¤ã€ã˜ã£ãã‚Šæ„›ã‚’è‚²ã¦ã‚‰ã‚Œã¾ã™'
      },
      'ä¸‰æ—¥æœˆ-ä¸Šå¼¦ã®æœˆ': {
        reason: 'ä¸Šå¼¦ã®è¡Œå‹•åŠ›ãŒä¸‰æ—¥æœˆã®æ…é‡ã•ã‚’è‰¯ã„æ–¹å‘ã«å¼•ãä¸Šã’ã‚‹',
        example: 'ä¸Šå¼¦ãŒè¨ˆç”»ã‚’ç«‹ã¦ã€ä¸‰æ—¥æœˆãŒã€Œãã‚Œãªã‚‰å®‰å¿ƒã€ã¨ä¹—ã‚‹ãƒ‡ãƒ¼ãƒˆ',
        advice: 'ä¸‰æ—¥æœˆã¯å®‰å¿ƒã—ã¦ä¸€æ­©è¸ã¿å‡ºã›ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™'
      },
      'ä¸‰æ—¥æœˆ-åä¸‰å¤œ': {
        reason: 'ç©ã‚„ã‹ãªäºŒäººãŒä½œã‚‹å®‰å®šã—ãŸé–¢ä¿‚',
        example: 'ãŠäº’ã„ã®ãƒšãƒ¼ã‚¹ã‚’å¤§åˆ‡ã«ã—ãªãŒã‚‰ã€ã‚†ã£ãã‚Šé–¢ä¿‚ã‚’æ·±ã‚ã‚‹',
        advice: 'é•·ç¶šãã™ã‚‹ç©ã‚„ã‹ã§å„ªã—ã„é–¢ä¿‚ã‚’ç¯‰ã‘ã¾ã™'
      },
      'ä¸‰æ—¥æœˆ-æº€æœˆ': {
        reason: 'æº€æœˆã®æ˜ã‚‹ã•ãŒä¸‰æ—¥æœˆã®å†…å‘æ€§ã‚’å„ªã—ãç…§ã‚‰ã™',
        example: 'æº€æœˆãŒä¸‰æ—¥æœˆã‚’åŠ±ã¾ã—ã€æ–°ã—ã„ä¸–ç•Œã¸å°ã',
        advice: 'ä¸‰æ—¥æœˆã¯æº€æœˆã‹ã‚‰å‹‡æ°—ã‚’ã‚‚ã‚‰ã„ã€ã‚ˆã‚Šç©æ¥µçš„ã«ãªã‚Œã¾ã™'
      },
      'ä¸‰æ—¥æœˆ-åå…­å¤œ': {
        reason: 'åå…­å¤œã®åŒ…å®¹åŠ›ãŒä¸‰æ—¥æœˆã®é æ…®ã‚’ã»ã©ã',
        example: 'åå…­å¤œãŒã€Œä»Šæ—¥ã¯å›ã®è¡ŒããŸã„æ‰€ã«è¡Œã“ã†ã€ã¨ææ¡ˆã—ã€ä¸‰æ—¥æœˆãŒç´ ç›´ã«å¸Œæœ›ã‚’è¨€ãˆã‚‹',
        advice: 'æ·±ãè½ã¡ç€ã„ãŸé–¢ä¿‚ã‚’é•·ãç¶­æŒã§ãã¾ã™'
      },
      'ä¸‰æ—¥æœˆ-ä¸‹å¼¦ã®æœˆ': {
        reason: 'ä¸‹å¼¦ã®æ•´ç†åŠ›ã¨ä¸‰æ—¥æœˆã®æŸ”è»Ÿæ€§ãŒè‰¯ã„ãƒãƒ©ãƒ³ã‚¹',
        example: 'ä¸‰æ—¥æœˆã®æŸ”è»Ÿã•ã‚’ä¸‹å¼¦ãŒå—ã‘æ­¢ã‚ã€ç©ã‚„ã‹ãªæµã‚Œã‚’ä½œã‚‹',
        advice: 'ãŠäº’ã„ã®é•·æ‰€ã‚’æ´»ã‹ã—ãŸå®‰å®šã—ãŸé–¢ä¿‚'
      },
      'ä¸‰æ—¥æœˆ-æš': {
        reason: 'äºŒäººã¨ã‚‚å†…å‘çš„ã§ãƒšãƒ¼ã‚¹ãŒä¼¼ã¦ã„ã‚‹',
        example: 'é™ã‹ãªå ´æ‰€ã§ã‚†ã£ãã‚Šéã”ã™ãƒ‡ãƒ¼ãƒˆãŒå¿ƒåœ°ã‚ˆã„',
        advice: 'ãŠäº’ã„ã®å†…é¢ã‚’ç†è§£ã—åˆãˆã‚‹æ·±ã„é–¢ä¿‚'
      },

      // ä¸Šå¼¦ã®æœˆã®ç›¸æ€§
      'ä¸Šå¼¦ã®æœˆ-æ–°æœˆ': {
        reason: 'æ–°æœˆã®ç›´æ„Ÿã‚’ä¸Šå¼¦ãŒè¨ˆç”»ã«è½ã¨ã—è¾¼ã‚€',
        example: 'æ–°æœˆã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ä¸Šå¼¦ãŒæ®µå–ã‚Šã—ã¦å®Ÿç¾',
        advice: 'ç†æƒ³çš„ãªå®Ÿè¡Œãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ—'
      },
      'ä¸Šå¼¦ã®æœˆ-ä¸‰æ—¥æœˆ': {
        reason: 'ä¸‰æ—¥æœˆã®æ…é‡ã•ã‚’ã€ä¸Šå¼¦ã®è¨­è¨ˆåŠ›ãŒã‚„ã•ã—ãå‰é€²ã•ã›ã‚‹',
        example: 'ä¸‰æ—¥æœˆãŒã€Œæ··ã‚“ã§ã‚‹ã®è‹¦æ‰‹ã€ã¨è¨€ãˆã°ã€ä¸Šå¼¦ãŒæ··é›‘å›é¿ãƒ«ãƒ¼ãƒˆï¼‹äºˆç´„ã‚’æ®µå–ã‚Š',
        advice: 'ä¸‰æ—¥æœˆã¯å®‰å¿ƒã—ã¦ä¸€æ­©ã‚’è¸ã¿å‡ºã›ã€ä¸Šå¼¦ã¯ã€Œé€²ã‚ã‚‹å½¹å‰²ã€ã‚’å¿ƒåœ°ã‚ˆãæ‹…ãˆã¾ã™'
      },
      'ä¸Šå¼¦ã®æœˆ-ä¸Šå¼¦ã®æœˆ': {
        reason: 'è¨ˆç”»åŠ›Ã—è¨ˆç”»åŠ›ã§å®Œç’§ãªå®Ÿè¡Œ',
        example: 'äºŒäººã§ç·»å¯†ãªè¨ˆç”»ã‚’ç«‹ã¦ã€ç€å®Ÿã«å®Ÿè¡Œ',
        advice: 'æ™‚ã«ã¯ç›´æ„Ÿçš„ãªè¡Œå‹•ã‚‚å¤§åˆ‡ã«ã—ã¾ã—ã‚‡ã†'
      },
      'ä¸Šå¼¦ã®æœˆ-åä¸‰å¤œ': {
        reason: 'åä¸‰å¤œã®å®‰å®šæ„Ÿã¨ä¸Šå¼¦ã®æ¨é€²åŠ›ãŒè‰¯ã„ãƒãƒ©ãƒ³ã‚¹',
        example: 'ä¸Šå¼¦ãŒææ¡ˆã—ã€åä¸‰å¤œãŒç¾å®Ÿçš„ã«èª¿æ•´',
        advice: 'ç„¡ç†ãªãç€å®Ÿã«å‰é€²ã§ãã‚‹é–¢ä¿‚'
      },
      'ä¸Šå¼¦ã®æœˆ-æº€æœˆ': {
        reason: 'æº€æœˆã®æƒ…ç†±ã‚’ä¸Šå¼¦ãŒå½¢ã«ã™ã‚‹',
        example: 'æº€æœˆã®å¤¢ã‚’ä¸Šå¼¦ãŒè¨ˆç”»ã—ã¦å®Ÿç¾',
        advice: 'æ„Ÿæƒ…ã¨è«–ç†ã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚ŒãŸé–¢ä¿‚'
      },
      'ä¸Šå¼¦ã®æœˆ-åå…­å¤œ': {
        reason: 'åå…­å¤œã®ä½™è£•ãŒä¸Šå¼¦ã®ç„¦ã‚Šã‚’å’Œã‚‰ã’ã‚‹',
        example: 'ä¸Šå¼¦ãŒæ€¥ãã™ããŸæ™‚ã€åå…­å¤œãŒå„ªã—ããƒšãƒ¼ã‚¹ãƒ€ã‚¦ãƒ³',
        advice: 'æ€¥ãŒãšç„¦ã‚‰ãšã€ç€å®Ÿã«é€²ã‚€é–¢ä¿‚'
      },
      'ä¸Šå¼¦ã®æœˆ-ä¸‹å¼¦ã®æœˆ': {
        reason: 'è¡Œå‹•ï¼ˆä¸Šå¼¦ï¼‰Ã—æ•´ç†ï¼ˆä¸‹å¼¦ï¼‰ã®è£œå®Œé–¢ä¿‚',
        example: 'å¼•ã£è¶Šã—ã‚’æ¤œè¨ã™ã‚‹ã¨ãã€ä¸Šå¼¦ãŒå€™è£œã‚’é›†ã‚ã€ä¸‹å¼¦ãŒæ¡ä»¶è¡¨ã§æ¯”è¼ƒ',
        advice: 'ä¸Šå¼¦ãŒåºƒã’ãŸé¸æŠè‚¢ã‚’ã€ä¸‹å¼¦ãŒãƒ ãƒ€ãªãçµã‚Šè¾¼ã‚€ã€‚æ±ºæ–­ã®è³ªãŒä¸ŠãŒã‚Šã¾ã™'
      },
      'ä¸Šå¼¦ã®æœˆ-æš': {
        reason: 'ä¸Šå¼¦ã®è¡Œå‹•åŠ›ãŒæšã‚’å¼•ã£å¼µã£ã¦ãã‚Œã‚‹',
        example: 'æšãŒè¿·ã£ã¦ã„ã‚‹æ™‚ã€ä¸Šå¼¦ãŒé“ç­‹ã‚’ç¤ºã™',
        advice: 'æšã®å†…çœã¨ä¸Šå¼¦ã®å®Ÿè¡ŒåŠ›ãŒè£œå®Œã—åˆã†'
      },

      // åä¸‰å¤œã®ç›¸æ€§
      'åä¸‰å¤œ-æ–°æœˆ': {
        reason: 'æ–°æœˆã®ç›´æ„Ÿã¨è¡Œå‹•åŠ›ãŒã€åä¸‰å¤œã«æ–°é®®ãªé¢¨ã‚’é‹ã¶',
        example: 'æ–°æœˆãŒã€Œæ¥é€±ã€æ€¥ã ã‘ã©æ¸©æ³‰è¡Œã‹ãªã„ï¼Ÿã€â€”â€”åä¸‰å¤œã¯äºˆç®—ã¨äº¤é€šã ã‘æ•´ãˆã¦GO',
        advice: 'ã‚ãªãŸã®å®‰å®šæ„ŸãŒæ–°æœˆã®å‹¢ã„ã‚’å®‰å¿ƒã—ã¦ç¶™ç¶šã•ã›ã¾ã™'
      },
      'åä¸‰å¤œ-ä¸‰æ—¥æœˆ': {
        reason: 'ç©ã‚„ã‹ãªäºŒäººãŒä½œã‚‹å®‰ã‚‰ãã®ç©ºé–“',
        example: 'ãŠäº’ã„ã®ãƒšãƒ¼ã‚¹ã‚’å¤§åˆ‡ã«ã—ãªãŒã‚‰é–¢ä¿‚ã‚’è‚²ã‚€',
        advice: 'ç„¡ç†ãªãè‡ªç„¶ä½“ã§ã„ã‚‰ã‚Œã‚‹é–¢ä¿‚'
      },
      'åä¸‰å¤œ-ä¸Šå¼¦ã®æœˆ': {
        reason: 'ä¸Šå¼¦ã®è¨ˆç”»æ€§ã¨åä¸‰å¤œã®å®‰å®šæ„ŸãŒèª¿å’Œ',
        example: 'ä¸Šå¼¦ãŒææ¡ˆã—ã€åä¸‰å¤œãŒç¾å®Ÿçš„ã«æ”¯ãˆã‚‹',
        advice: 'ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸå»ºè¨­çš„ãªé–¢ä¿‚'
      },
      'åä¸‰å¤œ-åä¸‰å¤œ': {
        reason: 'ä¼¼ãŸãƒ†ãƒ³ãƒã¨ä¾¡å€¤è¦³ã€‚è¡çªãŒå°‘ãªãã€é™ã‹ãªå¹¸ç¦ãŒé•·ãç¶šã',
        example: 'è¨˜å¿µæ—¥ã¯å¤–é£Ÿ1å›ï¼‹è‡ªå®…ã§ãƒ‡ã‚¶ãƒ¼ãƒˆã€‚æ´¾æ‰‹ã•ã‚ˆã‚Šæº€ã¡è¶³ã‚ŠãŸä½™ç™½ã‚’å…±æœ‰',
        advice: 'ç©ã‚„ã‹ã§å®‰å®šã—ãŸé•·æœŸçš„ãªé–¢ä¿‚'
      },
      'åä¸‰å¤œ-æº€æœˆ': {
        reason: 'æº€æœˆã®æ˜ã‚‹ã•ã¨åä¸‰å¤œã®è½ã¡ç€ããŒè‰¯ã„ãƒãƒ©ãƒ³ã‚¹',
        example: 'æº€æœˆãŒç››ã‚Šä¸Šã’ã€åä¸‰å¤œãŒæ”¯ãˆã‚‹',
        advice: 'æ„Ÿæƒ…ã¨ç†æ€§ã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚ŒãŸé–¢ä¿‚'
      },
      'åä¸‰å¤œ-åå…­å¤œ': {
        reason: 'äºŒäººã¨ã‚‚æˆç†Ÿã—ãŸè½ã¡ç€ããŒã‚ã‚‹',
        example: 'å¤§äººã®ä½™è£•ã‚’æŒã£ãŸé–¢ä¿‚',
        advice: 'æ™‚ã«ã¯åˆºæ¿€ã‚‚å¿…è¦ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“'
      },
      'åä¸‰å¤œ-ä¸‹å¼¦ã®æœˆ': {
        reason: 'ä¸‹å¼¦ã®"æ‰‹æ”¾ã—ãƒ»æ•´ç†"ãŒã€åä¸‰å¤œã®"ä¿æŒãƒ»å®‰å®š"ã¨æ™‚ã«è¡çª',
        example: 'ç‰©ã‚’æ¸›ã‚‰ã—ãŸã„ä¸‹å¼¦ã€æ€ã„å‡ºã‚’æ®‹ã—ãŸã„åä¸‰å¤œã€‚"æ€ã„å‡ºã¯ãƒ‡ãƒ¼ã‚¿åŒ–ã€å®Ÿç‰©ã¯å³é¸"ã®ä¸­åº¸ã§â—',
        advice: 'å½¹å‰²ãŒå™›ã¿åˆãˆã°å …å®Ÿãªé–¢ä¿‚'
      },
      'åä¸‰å¤œ-æš': {
        reason: 'æšã®å†…çœã¨æ·±ã„å¯¾è©±ãŒã€åä¸‰å¤œã®å®‰å¿ƒåŸºç›¤ã«ã´ãŸã‚Š',
        example: 'é€±æœ«ã¯å„è‡ªã®è¶£å‘³â†’å¤œã«1æ™‚é–“ã®æ·±ã„ãŠã—ã‚ƒã¹ã‚Š',
        advice: 'é™ã‘ã•Ã—æ»‹é¤Šã§å¿ƒãŒæº€ã¡ã‚‹é–¢ä¿‚'
      },

      // æº€æœˆã®ç›¸æ€§
      'æº€æœˆ-æ–°æœˆ': {
        reason: 'æ–°æœˆã®ç›´æ„Ÿã¨è¡Œå‹•åŠ›ãŒã€æº€æœˆã®æ„Ÿæƒ…ã‚’é•·ãç‡ƒã‚„ã—ç¶šã‘ã‚‹',
        example: 'æ–°æœˆã®ã€Œçªç„¶ã ã‘ã©æ—…è¡Œè¡Œã“ã†ï¼ã€ã«ã€æº€æœˆãŒå³ãƒãƒªã§ç†±é‡å€å¢—',
        advice: 'æƒ…ç†±çš„ã§åˆºæ¿€çš„ãªé–¢ä¿‚'
      },
      'æº€æœˆ-ä¸‰æ—¥æœˆ': {
        reason: 'æº€æœˆã®æ˜ã‚‹ã•ãŒä¸‰æ—¥æœˆã‚’å„ªã—ãç…§ã‚‰ã™',
        example: 'æº€æœˆãŒä¸‰æ—¥æœˆã‚’åŠ±ã¾ã—ã€æ–°ã—ã„ä¸–ç•Œã¸å°ã',
        advice: 'æº€æœˆãŒä¸‰æ—¥æœˆã«å‹‡æ°—ã‚’ä¸ãˆã‚‹é–¢ä¿‚'
      },
      'æº€æœˆ-ä¸Šå¼¦ã®æœˆ': {
        reason: 'æº€æœˆã®æƒ…ç†±ã‚’ä¸Šå¼¦ãŒå½¢ã«ã™ã‚‹',
        example: 'æº€æœˆã®å¤¢ã‚’ä¸Šå¼¦ãŒè¨ˆç”»ã—ã¦å®Ÿç¾',
        advice: 'æ„Ÿæƒ…ã¨å®Ÿè¡ŒåŠ›ã®è‰¯ã„ã‚³ãƒ³ãƒ“ãƒãƒ¼ã‚·ãƒ§ãƒ³'
      },
      'æº€æœˆ-åä¸‰å¤œ': {
        reason: 'æº€æœˆã®ç†±ã¨åä¸‰å¤œã®å®‰å®šæ„ŸãŒãƒãƒ©ãƒ³ã‚¹',
        example: 'æº€æœˆãŒç››ã‚Šä¸Šã’ã€åä¸‰å¤œãŒæ”¯ãˆã‚‹',
        advice: 'æƒ…ç†±ã¨å®‰å®šã®èª¿å’Œ'
      },
      'æº€æœˆ-æº€æœˆ': {
        reason: 'æ„Ÿæƒ…è¡¨ç¾è±Šã‹ãªäºŒäººã®æƒ…ç†±çš„ãªé–¢ä¿‚',
        example: 'å–œã³ã‚‚æ‚²ã—ã¿ã‚‚å…¨åŠ›ã§å…±æœ‰',
        advice: 'æ™‚ã«ã¯ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ã‚‚å¿…è¦'
      },
      'æº€æœˆ-åå…­å¤œ': {
        reason: 'åå…­å¤œã®è½ã¡ç€ããŒæº€æœˆã®ç†±ã‚’ã‚„ã‚ã‚‰ã’ã€å®‰å®šæ„Ÿã¨æƒ…ç†±ã®ä¸¡ç«‹ãŒå¯èƒ½',
        example: 'èˆˆå¥®ã—ã¦è©±ã—ã™ããŸå¾Œã€åå…­å¤œãŒã€Œå°‘ã—æ•£æ­©ã—ã‚ˆã†ã€ã¨ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ã‚’ä¿ƒã—ã¦ãã‚Œã‚‹',
        advice: 'ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸæƒ…ç†±çš„ãªé–¢ä¿‚'
      },
      'æº€æœˆ-ä¸‹å¼¦ã®æœˆ': {
        reason: 'ä¸‹å¼¦ã®å†·é™ã•ãŒæº€æœˆã®ç†±ã‚’æ•´ç†',
        example: 'æº€æœˆã®æ„Ÿæƒ…ã‚’ä¸‹å¼¦ãŒæ•´ç†ã—ã¦æ–¹å‘æ€§ã‚’ç¤ºã™',
        advice: 'æ„Ÿæƒ…ã¨ç†æ€§ã®ãƒãƒ©ãƒ³ã‚¹ãŒéµ'
      },
      'æº€æœˆ-æš': {
        reason: 'æº€æœˆã®å¤–å‘æ€§ã¨æšã®å†…å‘æ€§ã®å¯¾æ¯”',
        example: 'æº€æœˆãŒæšã‚’å¤–ã®ä¸–ç•Œã¸é€£ã‚Œå‡ºã™',
        advice: 'ãŠäº’ã„ã®ä¸–ç•Œã‚’ç†è§£ã—åˆã†ã“ã¨ãŒå¤§åˆ‡'
      },

      // åå…­å¤œã®ç›¸æ€§
      'åå…­å¤œ-æ–°æœˆ': {
        reason: 'æ–°æœˆã®è¡Œå‹•åŠ›ã«å®‰å®šã®è»¸ã‚’ä¸ãˆã‚‹',
        example: 'æ–°æœˆã®è¡å‹•ã‚’åå…­å¤œãŒå„ªã—ãå°ã',
        advice: 'æ–°æœˆã¯å®‰å¿ƒã—ã¦å†’é™ºã§ãã¾ã™'
      },
      'åå…­å¤œ-ä¸‰æ—¥æœˆ': {
        reason: 'æ…é‡ã§é…æ…®ã‚ã‚‹ä¸‰æ—¥æœˆã¨ã€æˆç†Ÿã—ãŸä½™è£•ã§å®‰å®šæ„ŸæŠœç¾¤',
        example: 'åå…­å¤œãŒä¸‰æ—¥æœˆã®é æ…®ã‚’å„ªã—ãã»ã©ã',
        advice: 'æ·±ãè½ã¡ç€ã„ãŸé–¢ä¿‚'
      },
      'åå…­å¤œ-ä¸Šå¼¦ã®æœˆ': {
        reason: 'ä¸Šå¼¦ã®ç„¦ã‚Šã‚’åå…­å¤œãŒå’Œã‚‰ã’ã‚‹',
        example: 'æ€¥ãã™ãã‚‹ä¸Šå¼¦ã«åå…­å¤œãŒãƒšãƒ¼ã‚¹ãƒ€ã‚¦ãƒ³ã‚’ä¿ƒã™',
        advice: 'ç„¦ã‚‰ãšç€å®Ÿã«é€²ã‚€é–¢ä¿‚'
      },
      'åå…­å¤œ-åä¸‰å¤œ': {
        reason: 'äºŒäººã¨ã‚‚æˆç†Ÿã—ãŸå¤§äººã®é–¢ä¿‚',
        example: 'è½ã¡ç€ã„ãŸå¤§äººã®ãƒ‡ãƒ¼ãƒˆ',
        advice: 'å®‰å®šã—ã™ãã¦åˆºæ¿€ä¸è¶³ã«æ³¨æ„'
      },
      'åå…­å¤œ-æº€æœˆ': {
        reason: 'æº€æœˆã®æƒ…ç†±ã‚’ã‚„ã•ã—ãå—ã‘æ­¢ã‚ã€ç†±ã‚’ã¡ã‚‡ã†ã©ã‚ˆãä¿ã¤',
        example: 'æº€æœˆã®æ„Ÿæƒ…ã‚’åå…­å¤œãŒåŒ…ã¿è¾¼ã‚€',
        advice: 'æƒ…ç†±ã¨è½ã¡ç€ãã®èª¿å’Œ'
      },
      'åå…­å¤œ-åå…­å¤œ': {
        reason: 'ä¼¼ãŸè€…åŒå£«ã§ã€å®‰ã‚‰ãã¨è½ã¡ç€ãã‚’å…±æœ‰ã§ãã‚‹',
        example: 'é™ã‹ã§ç©ã‚„ã‹ãªæ™‚é–“ã‚’å…±æœ‰',
        advice: 'æ™‚ã«ã¯æ–°ã—ã„åˆºæ¿€ã‚‚å¿…è¦'
      },
      'åå…­å¤œ-ä¸‹å¼¦ã®æœˆ': {
        reason: 'äºŒäººã¨ã‚‚å¼•ãç®—ã®ç¾å­¦ã‚’ç†è§£',
        example: 'ã‚·ãƒ³ãƒ—ãƒ«ã§è³ªã®é«˜ã„ç”Ÿæ´»ã‚’å…±æœ‰',
        advice: 'è½ã¡ç€ã„ãŸå¤§äººã®é–¢ä¿‚'
      },
      'åå…­å¤œ-æš': {
        reason: 'æ·±ã„å†…çœã¨æˆç†Ÿã—ãŸä½™è£•ã®èª¿å’Œ',
        example: 'é™ã‹ã«æ·±ã„å¯¾è©±ã‚’æ¥½ã—ã‚€',
        advice: 'ç²¾ç¥çš„ã«è±Šã‹ãªé–¢ä¿‚'
      },

      // ä¸‹å¼¦ã®æœˆã®ç›¸æ€§
      'ä¸‹å¼¦ã®æœˆ-æ–°æœˆ': {
        reason: 'æ–°æœˆã®æ•£ã‚‰ã‹ã£ãŸã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ä¸‹å¼¦ãŒæ•´ç†',
        example: 'æ–°æœˆãŒå§‹ã‚ãŸã“ã¨ã‚’ä¸‹å¼¦ãŒã¾ã¨ã‚ã‚‹',
        advice: 'å½¹å‰²åˆ†æ‹…ã‚’æ˜ç¢ºã«ã™ã‚‹ã¨è‰¯ã„'
      },
      'ä¸‹å¼¦ã®æœˆ-ä¸‰æ—¥æœˆ': {
        reason: 'ä¸‰æ—¥æœˆã®æŸ”è»Ÿã•ã‚’ä¸‹å¼¦ãŒå—ã‘æ­¢ã‚ã€ç©ã‚„ã‹ãªæµã‚Œã‚’ä½œã‚‹',
        example: 'ä¸‰æ—¥æœˆã®å„ªã—ã•ã¨ä¸‹å¼¦ã®æ•´ç†åŠ›ãŒèª¿å’Œ',
        advice: 'ç©ã‚„ã‹ã§æ•´ç†ã•ã‚ŒãŸé–¢ä¿‚'
      },
      'ä¸‹å¼¦ã®æœˆ-ä¸Šå¼¦ã®æœˆ': {
        reason: 'ä¸Šå¼¦ã®ææ¡ˆåŠ›ï¼‹ä¸‹å¼¦ã®æ•´ç†åŠ›ã§æœ€é©è§£ã«è¾¿ã‚Šç€ã‘ã‚‹',
        example: 'ä¸Šå¼¦ãŒé¸æŠè‚¢ã‚’åºƒã’ã€ä¸‹å¼¦ãŒçµã‚Šè¾¼ã‚€',
        advice: 'å®Œç’§ãªãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ—'
      },
      'ä¸‹å¼¦ã®æœˆ-åä¸‰å¤œ': {
        reason: 'ä¿æŒã¨æ•´ç†ã®ãƒãƒ©ãƒ³ã‚¹ãŒå¿…è¦',
        example: 'æ€ã„å‡ºã®æ‰±ã„æ–¹ã§æ„è¦‹ãŒåˆ†ã‹ã‚Œã‚‹ã“ã¨ã‚‚',
        advice: 'ä¸­åº¸ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒå¤§åˆ‡'
      },
      'ä¸‹å¼¦ã®æœˆ-æº€æœˆ': {
        reason: 'æº€æœˆã®æ„Ÿæƒ…ã‚’ä¸‹å¼¦ãŒæ•´ç†',
        example: 'æ„Ÿæƒ…çš„ã«ãªã£ãŸæº€æœˆã‚’ä¸‹å¼¦ãŒå†·é™ã«å°ã',
        advice: 'æ„Ÿæƒ…ã¨ç†æ€§ã®ãƒãƒ©ãƒ³ã‚¹'
      },
      'ä¸‹å¼¦ã®æœˆ-åå…­å¤œ': {
        reason: 'äºŒäººã¨ã‚‚å¼•ãç®—ã®ç¾å­¦ã‚’ç†è§£',
        example: 'ã‚·ãƒ³ãƒ—ãƒ«ã§è³ªã®é«˜ã„æš®ã‚‰ã—',
        advice: 'è½ã¡ç€ã„ãŸé–¢ä¿‚'
      },
      'ä¸‹å¼¦ã®æœˆ-ä¸‹å¼¦ã®æœˆ': {
        reason: 'åŒã˜ãƒšãƒ¼ã‚¹ã¨ä¾¡å€¤è¦³ã§ã€äº‰ã„ãŒã»ã¼ãªã„',
        example: 'æ•´ç†æ•´é “ã•ã‚ŒãŸç”Ÿæ´»ã‚’å…±æœ‰',
        advice: 'æ™‚ã«ã¯æ•£ã‚‰ã‹ã™ã“ã¨ã‚‚å¿…è¦'
      },
      'ä¸‹å¼¦ã®æœˆ-æš': {
        reason: 'æšã®å†…çœã¨ä¸‹å¼¦ã®å®‰å®šãŒæ·±ãå™›ã¿åˆã„ã€é™ã‹ã«è‚²ã¤é–¢ä¿‚',
        example: 'æ·±ã„å¯¾è©±ã¨æ•´ç†ã•ã‚ŒãŸç”Ÿæ´»',
        advice: 'ç²¾ç¥çš„ã«æˆç†Ÿã—ãŸé–¢ä¿‚'
      },

      // æšã®ç›¸æ€§
      'æš-æ–°æœˆ': {
        reason: 'æ–°æœˆã®å¤–å‘æ€§ãŒæšã«æ–°ã—ã„ä¸–ç•Œã‚’è¦‹ã›ã‚‹',
        example: 'æ–°æœˆãŒæšã‚’å¤–ã¸é€£ã‚Œå‡ºã™',
        advice: 'ãƒšãƒ¼ã‚¹ã®é•ã„ã‚’ç†è§£ã—åˆã†ã“ã¨ãŒå¤§åˆ‡'
      },
      'æš-ä¸‰æ—¥æœˆ': {
        reason: 'äºŒäººã¨ã‚‚å†…å‘çš„ã§é™ã‹ãªé–¢ä¿‚',
        example: 'é™ã‹ãªå ´æ‰€ã§ã‚†ã£ãã‚Šéã”ã™',
        advice: 'æ™‚ã«ã¯å¤–ã®ä¸–ç•Œã¸ã‚‚ç›®ã‚’å‘ã‘ã¦'
      },
      'æš-ä¸Šå¼¦ã®æœˆ': {
        reason: 'ä¸Šå¼¦ã®è¡Œå‹•åŠ›ãŒæšã‚’å¼•ã£å¼µã£ã¦ãã‚Œã‚‹',
        example: 'æšãŒè¿·ã£ã¦ã„ã‚‹æ™‚ã€ä¸Šå¼¦ãŒé“ã‚’ç¤ºã™',
        advice: 'ä¸Šå¼¦ã®ãƒšãƒ¼ã‚¹ã«ã¤ã„ã¦ã„ãã®ã¯å¤§å¤‰ã‹ã‚‚'
      },
      'æš-åä¸‰å¤œ': {
        reason: 'ç©ã‚„ã‹ã•ã¨ä¾¡å€¤è¦³ãŒåˆã„ã€é•·ãå®‰å®šã—ãŸé–¢ä¿‚ã«',
        example: 'é™ã‹ã§æ·±ã„å¯¾è©±ã‚’æ¥½ã—ã‚€',
        advice: 'å¿ƒãŒé€šã„åˆã†æ·±ã„é–¢ä¿‚'
      },
      'æš-æº€æœˆ': {
        reason: 'æº€æœˆã®æ˜ã‚‹ã•ã¨æšã®é™ã‘ã•ã®å¯¾æ¯”',
        example: 'æº€æœˆãŒæšã‚’æ˜ã‚‹ãç…§ã‚‰ã™',
        advice: 'ãŠäº’ã„ã®ä¸–ç•Œã‚’å°Šé‡ã™ã‚‹ã“ã¨ãŒå¤§åˆ‡'
      },
      'æš-åå…­å¤œ': {
        reason: 'æˆç†Ÿã—ãŸä½™è£•ã¨æ·±ã„å†…çœã®èª¿å’Œ',
        example: 'å¤§äººã®æ·±ã„å¯¾è©±',
        advice: 'ç²¾ç¥çš„ã«è±Šã‹ãªé–¢ä¿‚'
      },
      'æš-ä¸‹å¼¦ã®æœˆ': {
        reason: 'ä¸‹å¼¦ã®æ•´ç†åŠ›ã¨æšã®å†…çœãŒå™›ã¿åˆã„ã€é™ã‹ã§æ·±ã„é–¢ä¿‚ã«',
        example: 'æ•´ç†ã•ã‚ŒãŸé™ã‹ãªç”Ÿæ´»',
        advice: 'æ·±ã„ç†è§£ã¨å…±æ„Ÿ'
      },
      'æš-æš': {
        reason: 'åŒã˜ãƒšãƒ¼ã‚¹ã§ã€ç„¡ç†ãªãä»˜ãåˆãˆã‚‹',
        example: 'é™å¯‚ã®ä¸­ã§å¿ƒãŒé€šã„åˆã†',
        advice: 'æ™‚ã«ã¯å¤–ã®åˆºæ¿€ã‚‚å¿…è¦'
      }
    };

    const defaultEntry = {
      reason: 'ãŠäº’ã„ã®å€‹æ€§ãŒèª¿å’Œã™ã‚‹é–¢ä¿‚',
      example: 'ãã‚Œãã‚Œã®é­…åŠ›ã‚’æ´»ã‹ã—ãªãŒã‚‰æˆé•·ã§ãã¾ã™',
      advice: 'é•ã„ã‚’èªã‚åˆã†ã“ã¨ã§ã€ã‚ˆã‚Šæ·±ã„çµ†ãŒç”Ÿã¾ã‚Œã‚‹ã§ã—ã‚‡ã†'
    };

    const entry = adviceMap[key] || defaultEntry;
    const reason = compatibilityData.reason || entry.reason;
    const example = entry.example || '';
    const relationship = compatibilityData.relationship || '';
    const userAdvice = compatibilityData.userAdvice || entry.advice || '';
    const partnerAdvice = reverseCompatibilityData.userAdvice || entry.advice || '';
    const actionEntry = compatibilityActionsMap.get(key);

    return {
      reason,
      example,
      relationship,
      theme: actionEntry?.theme || '',
      userAction: actionEntry?.userAction || '',
      partnerAction: actionEntry?.partnerAction || '',
      advice: {
        user: userAdvice,
        partner: partnerAdvice
      }
    };
  }

  // ä»Šæœˆã®æ‹æ„›é‹ã‚’ç”Ÿæˆ
  generateMonthlyFortune(userType, currentDate = new Date()) {
    const currentMoonAge = this.calculateMoonAge(currentDate);
    const currentMoonType = this.getMoonTypeFromAge(currentMoonAge);

    // ç¾åœ¨ã®æœˆç›¸ã¨èª•ç”Ÿæœˆç›¸ã®é–¢ä¿‚ã‹ã‚‰é‹å‹¢ã‚’æ±ºå®š
    const compatibility = this.getCompatibilityScore(userType, currentMoonType.type);

    return {
      currentMoon: {
        type: currentMoonType.type,
        emoji: currentMoonType.emoji
      },
      compatibility,
      fortune: this.getMonthlyFortuneMessage(userType, currentMoonType.type, compatibility),
      luckyDays: this.calculateLuckyDays(userType, currentDate),
      actionAdvice: this.getMonthlyActionAdvice(userType, currentDate)
    };
  }

  // æœˆé–“é‹å‹¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  getMonthlyFortuneMessage(userType, currentType, compatibility) {
    const userDetails = this.moonTypeDetails[userType];
    const month = new Date().getMonth() + 1;

    if (compatibility >= 85) {
      return {
        level: 'çµ¶å¥½èª¿',
        message: `${month}æœˆã®${currentType}ã¯ã€${userType}ã‚¿ã‚¤ãƒ—ã®ã‚ãªãŸã«æœ€é«˜ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æ³¨ãã¾ã™ã€‚${userDetails.traits[0]}ã¨ã„ã†ç‰¹æ€§ãŒæœ€å¤§é™ã«ç™ºæ®ã•ã‚Œã‚‹æ™‚ã€‚`,
        advice: userDetails.actionAdvice[0]
      };
    } else if (compatibility >= 65) {
      return {
        level: 'å¥½èª¿',
        message: `${month}æœˆã¯å®‰å®šã—ãŸé‹æ°—ã€‚${userType}ã‚¿ã‚¤ãƒ—ã®æŒã¤${userDetails.traits[1]}ã‚’æ´»ã‹ã™ãƒãƒ£ãƒ³ã‚¹ãŒè¨ªã‚Œã¾ã™ã€‚`,
        advice: userDetails.actionAdvice[1]
      };
    } else {
      return {
        level: 'å……é›»æœŸ',
        message: `${month}æœˆã¯å†…é¢ã‚’è¦‹ã¤ã‚ã‚‹æ™‚æœŸã€‚${userType}ã‚¿ã‚¤ãƒ—ã®${userDetails.caution.substring(0, 30)}...ã«æ³¨æ„ã—ã¦éã”ã—ã¾ã—ã‚‡ã†ã€‚`,
        advice: userDetails.actionAdvice[2]
      };
    }
  }

  // ãƒ©ãƒƒã‚­ãƒ¼ãƒ‡ãƒ¼ã‚’è¨ˆç®—ï¼ˆã‚ˆã‚Šè©³ç´°ã«ï¼‰
  calculateLuckyDays(userType, currentDate) {
    const luckyDays = [];
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();

    for (let day = 1; day <= 31; day++) {
      const date = new Date(year, month, day);
      if (date.getMonth() !== month) break;

      const moonAge = this.calculateMoonAge(date);
      const dayType = this.getMoonTypeFromAge(moonAge);
      const compatibility = this.getCompatibilityScore(userType, dayType.type);

      if (compatibility >= 85) {
        luckyDays.push({
          date: day,
          moonType: dayType.type,
          emoji: dayType.emoji,
          advice: this.getLuckyDayAdvice(userType, dayType.type)
        });
      }
    }

    return luckyDays.slice(0, 3);
  }

  // ãƒ©ãƒƒã‚­ãƒ¼ãƒ‡ãƒ¼ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹
  getLuckyDayAdvice(userType, dayMoonType) {
    const compatibility = this.getCompatibilityScore(userType, dayMoonType);

    if (compatibility >= 95) {
      return 'æœ€é«˜ã®æ³¢å‹•ãŒè¨ªã‚Œã‚‹æ—¥ã€‚å¤§åˆ‡ãªå‘Šç™½ã‚„æ±ºæ–­ã«æœ€é©ã€‚';
    } else if (compatibility >= 85) {
      return 'è‰¯ã„æµã‚ŒãŒæœŸå¾…ã§ãã‚‹æ—¥ã€‚ç©æ¥µçš„ãªè¡Œå‹•ãŒå‰ã€‚';
    } else {
      return 'ç©ã‚„ã‹ã«éã”ã™ã®ãŒè‰¯ã„æ—¥ã€‚';
    }
  }

  // æœˆã”ã¨ã®è¡Œå‹•ã‚¢ãƒ‰ãƒã‚¤ã‚¹
  getMonthlyActionAdvice(userType, currentDate) {
    const month = currentDate.getMonth() + 1;
    const userDetails = this.moonTypeDetails[userType];

    // æœˆã¨æœˆã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸå…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹
    const seasonalAdvice = {
      1: 'æ–°å¹´ã®å§‹ã¾ã‚Šã€‚æ–°ã—ã„é–¢ä¿‚æ€§ã‚’ç¯‰ããƒãƒ£ãƒ³ã‚¹ã€‚',
      2: 'ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³æœˆã€‚ç´ ç›´ãªæ°—æŒã¡ã‚’ä¼ãˆã‚‹æ™‚æœŸã€‚',
      3: 'æ˜¥ã®è¨ªã‚Œã€‚å¤‰åŒ–ã‚’å—ã‘å…¥ã‚Œã‚‹æº–å‚™ã‚’ã€‚',
      4: 'æ–°ã—ã„å‡ºä¼šã„ã®å­£ç¯€ã€‚ç©æ¥µçš„ã«è¡Œå‹•ã‚’ã€‚',
      5: 'å®‰å®šæœŸã€‚é–¢ä¿‚ã‚’æ·±ã‚ã‚‹è‰¯ã„æ™‚æœŸã€‚',
      6: 'æ¢…é›¨ã®æ™‚æœŸã€‚å®¤å†…ãƒ‡ãƒ¼ãƒˆã§è¦ªå¯†åº¦UPã€‚',
      7: 'å¤ã®æƒ…ç†±ã€‚æ„Ÿæƒ…ã‚’ç´ ç›´ã«è¡¨ç¾ã—ã¦ã€‚',
      8: 'çœŸå¤ã®æ‹ã€‚æ€ã„å‡ºä½œã‚Šã«æœ€é©ã€‚',
      9: 'ç§‹ã®å§‹ã¾ã‚Šã€‚è½ã¡ç€ã„ãŸé–¢ä¿‚æ§‹ç¯‰ã‚’ã€‚',
      10: 'å®Ÿã‚Šã®ç§‹ã€‚é–¢ä¿‚ã®æˆæœãŒè¦‹ãˆã‚‹æ™‚ã€‚',
      11: 'æ·±ã¾ã‚‹ç§‹ã€‚å†…é¢çš„ãªç¹‹ãŒã‚Šã‚’å¤§åˆ‡ã«ã€‚',
      12: 'å¹´æœ«ã®æŒ¯ã‚Šè¿”ã‚Šã€‚æ¥å¹´ã¸ã®æº–å‚™æœŸé–“ã€‚'
    };

    return {
      seasonal: seasonalAdvice[month],
      personal: userDetails.actionAdvice.slice(0, 2)
    };
  }

  // ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚ŒãŸè¨ºæ–­çµæœã‚’ç”Ÿæˆ
  generateCompleteReading(userBirthdate, partnerBirthdate = null) {
    const userMoonType = this.getMoonTypeFromBirthdate(userBirthdate);
    const userDetails = this.moonTypeDetails[userMoonType.type];

    const result = {
      user: {
        moonType: userMoonType.type,
        emoji: userMoonType.emoji,
        story: {
          title: userDetails.title,
          introduction: userDetails.introduction,
          symbolism: userDetails.symbolism,
          traits: userDetails.traits,
          loveStyle: userDetails.loveStyle,
          examples: userDetails.loveExamples,
          caution: userDetails.caution,
          advice: userDetails.actionAdvice
        }
      },
      monthlyFortune: this.generateMonthlyFortune(userMoonType.type)
    };

    if (partnerBirthdate) {
      const partnerMoonType = this.getMoonTypeFromBirthdate(partnerBirthdate);
      const partnerDetails = this.moonTypeDetails[partnerMoonType.type];

      result.partner = {
        moonType: partnerMoonType.type,
        emoji: partnerMoonType.emoji,
        story: {
          title: partnerDetails.title,
          introduction: partnerDetails.introduction,
          traits: partnerDetails.traits.slice(0, 3),
          loveStyle: partnerDetails.loveStyle
        }
      };

      result.compatibility = this.getCompatibilityDetails(
        userMoonType.type,
        partnerMoonType.type
      );
    }

    return result;
  }
}

module.exports = MoonFortuneEngineV2;
